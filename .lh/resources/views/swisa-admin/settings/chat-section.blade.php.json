{
    "sourceFile": "resources/views/swisa-admin/settings/chat-section.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 17,
            "patches": [
                {
                    "date": 1765093394216,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1765093431694,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -189,17 +189,8 @@\n \r\n         function closeModal() {\r\n             document.getElementById('qr-modal').classList.add('hidden');\r\n         }\r\n-        function hideLoadingOverlay() {\r\n-    const overlay = document.getElementById(\"loadingOverlay\");\r\n-    overlay.style.opacity = \"0\";\r\n-    overlay.style.pointerEvents = \"none\";\r\n-\r\n-    setTimeout(() => {\r\n-        overlay.remove(); // remove from DOM so it cannot block clicks\r\n-    }, 300);\r\n-}\r\n-\r\n+        \r\n     </script>\r\n \r\n </div>\r\n"
                },
                {
                    "date": 1765093613619,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n <!-- Chat Settings -->\r\n-<div id=\"chat-section\" class=\"settings-section hidden\">\r\n+<div id=\"chat-section\" class=\"settings-section\">\r\n \r\n     <style>\r\n         /* Modal animations + modern look */\r\n         #qr-modal .modal-content {\r\n@@ -37,15 +37,14 @@\n                     <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Role</th>\r\n                     <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Actions</th>\r\n                 </tr>\r\n             </thead>\r\n+\r\n             <tbody class=\"bg-white divide-y divide-gray-200\">\r\n-\r\n                 @foreach($quickReplies ?? [] as $qr)\r\n                 <tr>\r\n                     <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n                     <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n-\r\n                     <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n \r\n                     <td class=\"px-6 py-4 flex gap-2\">\r\n                         <!-- FIXED EDIT BUTTON -->\r\n@@ -59,10 +58,12 @@\n                         >\r\n                             Edit\r\n                         </button>\r\n \r\n-                        <form action=\"{{ route('quickreplies.destroy', $qr->id) }}\" method=\"POST\" \r\n-                              onsubmit=\"return confirm('Delete this quick reply?')\" class=\"inline\">\r\n+                        <form action=\"{{ route('quickreplies.destroy', $qr->id) }}\" \r\n+                              method=\"POST\" \r\n+                              onsubmit=\"return confirm('Delete this quick reply?')\" \r\n+                              class=\"inline\">\r\n                             @csrf\r\n                             @method('DELETE')\r\n                             <button type=\"submit\" \r\n                                 class=\"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition\">\r\n@@ -71,52 +72,61 @@\n                         </form>\r\n                     </td>\r\n                 </tr>\r\n                 @endforeach\r\n+            </tbody>\r\n \r\n-            </tbody>\r\n         </table>\r\n     </div>\r\n \r\n     <!-- Add/Edit Modal -->\r\n-    <div id=\"qr-modal\" class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-50\">\r\n+    <div id=\"qr-modal\" \r\n+        class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-[10000]\">\r\n \r\n         <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n \r\n             <!-- Close Button -->\r\n-            <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n-                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n-                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n+            <button onclick=\"closeModal()\" \r\n+                class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n+                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" \r\n+                     fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" \r\n+                          stroke-width=\"2\" \r\n+                          d=\"M6 18L18 6M6 6l12 12\"/>\r\n                 </svg>\r\n             </button>\r\n \r\n-            <h3 class=\"text-2xl font-semibold mb-5 text-[#2C6E49]\" id=\"modal-title\">Add Quick Reply</h3>\r\n+            <h3 class=\"text-2xl font-semibold mb-5 text-[#2C6E49]\" id=\"modal-title\">\r\n+                Add Quick Reply\r\n+            </h3>\r\n \r\n             <form id=\"qr-form\" method=\"POST\" class=\"flex flex-col h-full\">\r\n                 @csrf\r\n \r\n                 <!-- Question -->\r\n                 <div class=\"mb-4\">\r\n                     <label class=\"block text-sm font-medium text-gray-700\">Question</label>\r\n                     <input type=\"text\" name=\"question\" id=\"qr-question\"\r\n-                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\"\r\n+                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 \r\n+                               focus:ring-[#4C956C] focus:border-[#4C956C]\"\r\n                         required>\r\n                 </div>\r\n \r\n                 <!-- Answer -->\r\n                 <div class=\"flex-1 mb-4 flex flex-col\">\r\n                     <label class=\"block text-sm font-medium text-gray-700\">Answer</label>\r\n                     <textarea name=\"answer\" id=\"qr-answer\"\r\n-                        class=\"mt-1 block w-full h-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C] resize-none overflow-y-auto\"\r\n-                        placeholder=\"Enter the reply...\"\r\n-                        required></textarea>\r\n+                        class=\"mt-1 block w-full h-full border-gray-300 rounded-lg shadow-sm p-3 \r\n+                               focus:ring-[#4C956C] focus:border-[#4C956C] resize-none overflow-y-auto\"\r\n+                        placeholder=\"Enter the reply...\" required></textarea>\r\n                 </div>\r\n \r\n                 <!-- Role -->\r\n                 <div class=\"mb-6\">\r\n                     <label class=\"block text-sm font-medium text-gray-700\">Role (optional)</label>\r\n                     <select name=\"for_role_id\" id=\"qr-role\"\r\n-                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\">\r\n+                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 \r\n+                               focus:ring-[#4C956C] focus:border-[#4C956C]\">\r\n                         <option value=\"\">All</option>\r\n                         @foreach($roles as $role)\r\n                             <option value=\"{{ $role->id }}\">{{ $role->role_name }}</option>\r\n                         @endforeach\r\n@@ -128,23 +138,24 @@\n                     <button type=\"button\" onclick=\"closeModal()\"\r\n                         class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\r\n                         Cancel\r\n                     </button>\r\n+\r\n                     <button type=\"submit\"\r\n                         class=\"px-4 py-2 bg-[#4C956C] text-white rounded-lg hover:bg-[#3d7e59] transition\"\r\n                         id=\"modal-submit-btn\">\r\n                         Save\r\n                     </button>\r\n                 </div>\r\n+\r\n             </form>\r\n         </div>\r\n     </div>\r\n \r\n-\r\n-\r\n     <script>\r\n         function openAddModal() {\r\n             document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n+\r\n             const form = document.getElementById('qr-form');\r\n             form.action = \"{{ route('quickreplies.store') }}\";\r\n             form.method = \"POST\";\r\n \r\n@@ -157,16 +168,12 @@\n \r\n             document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n-        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n         function openEditModal(button) {\r\n             document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n \r\n             const id = button.dataset.id;\r\n-            const question = button.dataset.question;\r\n-            const answer = button.dataset.answer;\r\n-            const role_id = button.dataset.role;\r\n \r\n             const form = document.getElementById('qr-form');\r\n             form.action = \"/settings/chat/quick-replies/\" + id;\r\n             form.method = \"POST\";\r\n@@ -178,19 +185,17 @@\n                 methodInput.value = 'PUT';\r\n                 form.appendChild(methodInput);\r\n             }\r\n \r\n-            // Fill modal fields\r\n-            document.getElementById('qr-question').value = question;\r\n-            document.getElementById('qr-answer').value = answer;\r\n-            document.getElementById('qr-role').value = role_id ?? \"\";\r\n+            document.getElementById('qr-question').value = button.dataset.question;\r\n+            document.getElementById('qr-answer').value = button.dataset.answer;\r\n+            document.getElementById('qr-role').value = button.dataset.role ?? \"\";\r\n \r\n             document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n         function closeModal() {\r\n             document.getElementById('qr-modal').classList.add('hidden');\r\n         }\r\n-        \r\n     </script>\r\n \r\n </div>\r\n"
                },
                {
                    "date": 1765093635584,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n <!-- Chat Settings -->\r\n-<div id=\"chat-section\" class=\"settings-section\">\r\n+<div id=\"chat-section\" class=\"settings-section hidden\">\r\n \r\n     <style>\r\n         /* Modal animations + modern look */\r\n         #qr-modal .modal-content {\r\n@@ -37,14 +37,15 @@\n                     <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Role</th>\r\n                     <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Actions</th>\r\n                 </tr>\r\n             </thead>\r\n+            <tbody class=\"bg-white divide-y divide-gray-200\">\r\n \r\n-            <tbody class=\"bg-white divide-y divide-gray-200\">\r\n                 @foreach($quickReplies ?? [] as $qr)\r\n                 <tr>\r\n                     <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n                     <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n+\r\n                     <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n \r\n                     <td class=\"px-6 py-4 flex gap-2\">\r\n                         <!-- FIXED EDIT BUTTON -->\r\n@@ -58,12 +59,10 @@\n                         >\r\n                             Edit\r\n                         </button>\r\n \r\n-                        <form action=\"{{ route('quickreplies.destroy', $qr->id) }}\" \r\n-                              method=\"POST\" \r\n-                              onsubmit=\"return confirm('Delete this quick reply?')\" \r\n-                              class=\"inline\">\r\n+                        <form action=\"{{ route('quickreplies.destroy', $qr->id) }}\" method=\"POST\" \r\n+                              onsubmit=\"return confirm('Delete this quick reply?')\" class=\"inline\">\r\n                             @csrf\r\n                             @method('DELETE')\r\n                             <button type=\"submit\" \r\n                                 class=\"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition\">\r\n@@ -72,61 +71,52 @@\n                         </form>\r\n                     </td>\r\n                 </tr>\r\n                 @endforeach\r\n+\r\n             </tbody>\r\n-\r\n         </table>\r\n     </div>\r\n \r\n     <!-- Add/Edit Modal -->\r\n-    <div id=\"qr-modal\" \r\n-        class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-[10000]\">\r\n+    <div id=\"qr-modal\" class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-50\">\r\n \r\n         <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n \r\n             <!-- Close Button -->\r\n-            <button onclick=\"closeModal()\" \r\n-                class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n-                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" \r\n-                     fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n-                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" \r\n-                          stroke-width=\"2\" \r\n-                          d=\"M6 18L18 6M6 6l12 12\"/>\r\n+            <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n+                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n                 </svg>\r\n             </button>\r\n \r\n-            <h3 class=\"text-2xl font-semibold mb-5 text-[#2C6E49]\" id=\"modal-title\">\r\n-                Add Quick Reply\r\n-            </h3>\r\n+            <h3 class=\"text-2xl font-semibold mb-5 text-[#2C6E49]\" id=\"modal-title\">Add Quick Reply</h3>\r\n \r\n             <form id=\"qr-form\" method=\"POST\" class=\"flex flex-col h-full\">\r\n                 @csrf\r\n \r\n                 <!-- Question -->\r\n                 <div class=\"mb-4\">\r\n                     <label class=\"block text-sm font-medium text-gray-700\">Question</label>\r\n                     <input type=\"text\" name=\"question\" id=\"qr-question\"\r\n-                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 \r\n-                               focus:ring-[#4C956C] focus:border-[#4C956C]\"\r\n+                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\"\r\n                         required>\r\n                 </div>\r\n \r\n                 <!-- Answer -->\r\n                 <div class=\"flex-1 mb-4 flex flex-col\">\r\n                     <label class=\"block text-sm font-medium text-gray-700\">Answer</label>\r\n                     <textarea name=\"answer\" id=\"qr-answer\"\r\n-                        class=\"mt-1 block w-full h-full border-gray-300 rounded-lg shadow-sm p-3 \r\n-                               focus:ring-[#4C956C] focus:border-[#4C956C] resize-none overflow-y-auto\"\r\n-                        placeholder=\"Enter the reply...\" required></textarea>\r\n+                        class=\"mt-1 block w-full h-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C] resize-none overflow-y-auto\"\r\n+                        placeholder=\"Enter the reply...\"\r\n+                        required></textarea>\r\n                 </div>\r\n \r\n                 <!-- Role -->\r\n                 <div class=\"mb-6\">\r\n                     <label class=\"block text-sm font-medium text-gray-700\">Role (optional)</label>\r\n                     <select name=\"for_role_id\" id=\"qr-role\"\r\n-                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 \r\n-                               focus:ring-[#4C956C] focus:border-[#4C956C]\">\r\n+                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\">\r\n                         <option value=\"\">All</option>\r\n                         @foreach($roles as $role)\r\n                             <option value=\"{{ $role->id }}\">{{ $role->role_name }}</option>\r\n                         @endforeach\r\n@@ -138,24 +128,23 @@\n                     <button type=\"button\" onclick=\"closeModal()\"\r\n                         class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\r\n                         Cancel\r\n                     </button>\r\n-\r\n                     <button type=\"submit\"\r\n                         class=\"px-4 py-2 bg-[#4C956C] text-white rounded-lg hover:bg-[#3d7e59] transition\"\r\n                         id=\"modal-submit-btn\">\r\n                         Save\r\n                     </button>\r\n                 </div>\r\n-\r\n             </form>\r\n         </div>\r\n     </div>\r\n \r\n+\r\n+\r\n     <script>\r\n         function openAddModal() {\r\n             document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n-\r\n             const form = document.getElementById('qr-form');\r\n             form.action = \"{{ route('quickreplies.store') }}\";\r\n             form.method = \"POST\";\r\n \r\n@@ -168,12 +157,16 @@\n \r\n             document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n+        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n         function openEditModal(button) {\r\n             document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n \r\n             const id = button.dataset.id;\r\n+            const question = button.dataset.question;\r\n+            const answer = button.dataset.answer;\r\n+            const role_id = button.dataset.role;\r\n \r\n             const form = document.getElementById('qr-form');\r\n             form.action = \"/settings/chat/quick-replies/\" + id;\r\n             form.method = \"POST\";\r\n@@ -185,17 +178,19 @@\n                 methodInput.value = 'PUT';\r\n                 form.appendChild(methodInput);\r\n             }\r\n \r\n-            document.getElementById('qr-question').value = button.dataset.question;\r\n-            document.getElementById('qr-answer').value = button.dataset.answer;\r\n-            document.getElementById('qr-role').value = button.dataset.role ?? \"\";\r\n+            // Fill modal fields\r\n+            document.getElementById('qr-question').value = question;\r\n+            document.getElementById('qr-answer').value = answer;\r\n+            document.getElementById('qr-role').value = role_id ?? \"\";\r\n \r\n             document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n         function closeModal() {\r\n             document.getElementById('qr-modal').classList.add('hidden');\r\n         }\r\n+        \r\n     </script>\r\n \r\n </div>\r\n"
                },
                {
                    "date": 1765093649019,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n             100% { transform: scale(1); opacity: 1; }\r\n         }\r\n     </style>\r\n \r\n-    <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settings</h3>\r\n+    <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settingffxs</h3>\r\n     <p class=\"text-gray-600 text-sm mb-6\">Manage system chat options and quick replies.</p>\r\n \r\n     <!-- Quick Replies Header -->\r\n     <div class=\"flex justify-between items-center bg-white shadow-md border rounded-lg p-4 mb-4\">\r\n"
                },
                {
                    "date": 1765093679504,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n             100% { transform: scale(1); opacity: 1; }\r\n         }\r\n     </style>\r\n \r\n-    <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settingffxs</h3>\r\n+    <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settings</h3>\r\n     <p class=\"text-gray-600 text-sm mb-6\">Manage system chat options and quick replies.</p>\r\n \r\n     <!-- Quick Replies Header -->\r\n     <div class=\"flex justify-between items-center bg-white shadow-md border rounded-lg p-4 mb-4\">\r\n"
                },
                {
                    "date": 1765093735672,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,196 +0,0 @@\n-<!-- Chat Settings -->\r\n-<div id=\"chat-section\" class=\"settings-section hidden\">\r\n-\r\n-    <style>\r\n-        /* Modal animations + modern look */\r\n-        #qr-modal .modal-content {\r\n-            animation: fadeInScale 0.25s ease-out;\r\n-        }\r\n-        @keyframes fadeInScale {\r\n-            0% { transform: scale(0.95); opacity: 0; }\r\n-            100% { transform: scale(1); opacity: 1; }\r\n-        }\r\n-    </style>\r\n-\r\n-    <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settings</h3>\r\n-    <p class=\"text-gray-600 text-sm mb-6\">Manage system chat options and quick replies.</p>\r\n-\r\n-    <!-- Quick Replies Header -->\r\n-    <div class=\"flex justify-between items-center bg-white shadow-md border rounded-lg p-4 mb-4\">\r\n-        <div>\r\n-            <p class=\"font-semibold text-gray-800\">Quick Replies</p>\r\n-            <p class=\"text-sm text-gray-500\">Create, edit, or remove predefined replies for faster responses.</p>\r\n-        </div>\r\n-        <button onclick=\"openAddModal()\" \r\n-            class=\"px-4 py-2 bg-[#4C956C] text-white font-medium rounded-lg hover:bg-[#3d7e59] transition\">\r\n-            Add New\r\n-        </button>\r\n-    </div>\r\n-\r\n-    <!-- Quick Replies Table -->\r\n-    <div class=\"overflow-x-auto bg-white shadow rounded-lg\">\r\n-        <table class=\"min-w-full divide-y divide-gray-200\">\r\n-            <thead class=\"bg-[#4C956C] bg-opacity-90\">\r\n-                <tr>\r\n-                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Question</th>\r\n-                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Answer</th>\r\n-                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Role</th>\r\n-                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Actions</th>\r\n-                </tr>\r\n-            </thead>\r\n-            <tbody class=\"bg-white divide-y divide-gray-200\">\r\n-\r\n-                @foreach($quickReplies ?? [] as $qr)\r\n-                <tr>\r\n-                    <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n-                    <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n-\r\n-                    <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n-\r\n-                    <td class=\"px-6 py-4 flex gap-2\">\r\n-                        <!-- FIXED EDIT BUTTON -->\r\n-                        <button\r\n-                            class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n-                            data-id=\"{{ $qr->id }}\"\r\n-                            data-question=\"{{ $qr->question }}\"\r\n-                            data-answer=\"{{ $qr->answer }}\"\r\n-                            data-role=\"{{ $qr->for_role_id }}\"\r\n-                            onclick=\"openEditModal(this)\"\r\n-                        >\r\n-                            Edit\r\n-                        </button>\r\n-\r\n-                        <form action=\"{{ route('quickreplies.destroy', $qr->id) }}\" method=\"POST\" \r\n-                              onsubmit=\"return confirm('Delete this quick reply?')\" class=\"inline\">\r\n-                            @csrf\r\n-                            @method('DELETE')\r\n-                            <button type=\"submit\" \r\n-                                class=\"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition\">\r\n-                                Delete\r\n-                            </button>\r\n-                        </form>\r\n-                    </td>\r\n-                </tr>\r\n-                @endforeach\r\n-\r\n-            </tbody>\r\n-        </table>\r\n-    </div>\r\n-\r\n-    <!-- Add/Edit Modal -->\r\n-    <div id=\"qr-modal\" class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-50\">\r\n-\r\n-        <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n-\r\n-            <!-- Close Button -->\r\n-            <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n-                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n-                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n-                </svg>\r\n-            </button>\r\n-\r\n-            <h3 class=\"text-2xl font-semibold mb-5 text-[#2C6E49]\" id=\"modal-title\">Add Quick Reply</h3>\r\n-\r\n-            <form id=\"qr-form\" method=\"POST\" class=\"flex flex-col h-full\">\r\n-                @csrf\r\n-\r\n-                <!-- Question -->\r\n-                <div class=\"mb-4\">\r\n-                    <label class=\"block text-sm font-medium text-gray-700\">Question</label>\r\n-                    <input type=\"text\" name=\"question\" id=\"qr-question\"\r\n-                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\"\r\n-                        required>\r\n-                </div>\r\n-\r\n-                <!-- Answer -->\r\n-                <div class=\"flex-1 mb-4 flex flex-col\">\r\n-                    <label class=\"block text-sm font-medium text-gray-700\">Answer</label>\r\n-                    <textarea name=\"answer\" id=\"qr-answer\"\r\n-                        class=\"mt-1 block w-full h-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C] resize-none overflow-y-auto\"\r\n-                        placeholder=\"Enter the reply...\"\r\n-                        required></textarea>\r\n-                </div>\r\n-\r\n-                <!-- Role -->\r\n-                <div class=\"mb-6\">\r\n-                    <label class=\"block text-sm font-medium text-gray-700\">Role (optional)</label>\r\n-                    <select name=\"for_role_id\" id=\"qr-role\"\r\n-                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\">\r\n-                        <option value=\"\">All</option>\r\n-                        @foreach($roles as $role)\r\n-                            <option value=\"{{ $role->id }}\">{{ $role->role_name }}</option>\r\n-                        @endforeach\r\n-                    </select>\r\n-                </div>\r\n-\r\n-                <!-- Buttons -->\r\n-                <div class=\"flex justify-end gap-3\">\r\n-                    <button type=\"button\" onclick=\"closeModal()\"\r\n-                        class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\r\n-                        Cancel\r\n-                    </button>\r\n-                    <button type=\"submit\"\r\n-                        class=\"px-4 py-2 bg-[#4C956C] text-white rounded-lg hover:bg-[#3d7e59] transition\"\r\n-                        id=\"modal-submit-btn\">\r\n-                        Save\r\n-                    </button>\r\n-                </div>\r\n-            </form>\r\n-        </div>\r\n-    </div>\r\n-\r\n-\r\n-\r\n-    <script>\r\n-        function openAddModal() {\r\n-            document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n-            const form = document.getElementById('qr-form');\r\n-            form.action = \"{{ route('quickreplies.store') }}\";\r\n-            form.method = \"POST\";\r\n-\r\n-            const methodInput = form.querySelector('input[name=\"_method\"]');\r\n-            if (methodInput) methodInput.remove();\r\n-\r\n-            document.getElementById('qr-question').value = \"\";\r\n-            document.getElementById('qr-answer').value = \"\";\r\n-            document.getElementById('qr-role').value = \"\";\r\n-\r\n-            document.getElementById('qr-modal').classList.remove('hidden');\r\n-        }\r\n-\r\n-        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n-        function openEditModal(button) {\r\n-            document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n-\r\n-            const id = button.dataset.id;\r\n-            const question = button.dataset.question;\r\n-            const answer = button.dataset.answer;\r\n-            const role_id = button.dataset.role;\r\n-\r\n-            const form = document.getElementById('qr-form');\r\n-            form.action = \"/settings/chat/quick-replies/\" + id;\r\n-            form.method = \"POST\";\r\n-\r\n-            if (!form.querySelector('input[name=\"_method\"]')) {\r\n-                const methodInput = document.createElement('input');\r\n-                methodInput.type = 'hidden';\r\n-                methodInput.name = '_method';\r\n-                methodInput.value = 'PUT';\r\n-                form.appendChild(methodInput);\r\n-            }\r\n-\r\n-            // Fill modal fields\r\n-            document.getElementById('qr-question').value = question;\r\n-            document.getElementById('qr-answer').value = answer;\r\n-            document.getElementById('qr-role').value = role_id ?? \"\";\r\n-\r\n-            document.getElementById('qr-modal').classList.remove('hidden');\r\n-        }\r\n-\r\n-        function closeModal() {\r\n-            document.getElementById('qr-modal').classList.add('hidden');\r\n-        }\r\n-        \r\n-    </script>\r\n-\r\n-</div>\r\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765093763632,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,195 @@\n-\n+<!-- Chat Settings -->\r\n+<div id=\"chat-section\" class=\"settings-section hidden\">\r\n+\r\n+    <style>\r\n+        /* Modal animations + modern look */\r\n+        #qr-modal .modal-content {\r\n+            animation: fadeInScale 0.25s ease-out;\r\n+        }\r\n+        @keyframes fadeInScale {\r\n+            0% { transform: scale(0.95); opacity: 0; }\r\n+            100% { transform: scale(1); opacity: 1; }\r\n+        }\r\n+    </style>\r\n+\r\n+    <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settings</h3>\r\n+    <p class=\"text-gray-600 text-sm mb-6\">Manage system chat options and quick replies.</p>\r\n+\r\n+    <!-- Quick Replies Header -->\r\n+    <div class=\"flex justify-between items-center bg-white shadow-md border rounded-lg p-4 mb-4\">\r\n+        <div>\r\n+            <p class=\"font-semibold text-gray-800\">Quick Replies</p>\r\n+            <p class=\"text-sm text-gray-500\">Create, edit, or remove predefined replies for faster responses.</p>\r\n+        </div>\r\n+        <button onclick=\"openAddModal()\" \r\n+            class=\"px-4 py-2 bg-[#4C956C] text-white font-medium rounded-lg hover:bg-[#3d7e59] transition\">\r\n+            Add New\r\n+        </button>\r\n+    </div>\r\n+\r\n+    <!-- Quick Replies Table -->\r\n+    <div class=\"overflow-x-auto bg-white shadow rounded-lg\">\r\n+        <table class=\"min-w-full divide-y divide-gray-200\">\r\n+            <thead class=\"bg-[#4C956C] bg-opacity-90\">\r\n+                <tr>\r\n+                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Question</th>\r\n+                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Answer</th>\r\n+                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Role</th>\r\n+                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Actions</th>\r\n+                </tr>\r\n+            </thead>\r\n+            <tbody class=\"bg-white divide-y divide-gray-200\">\r\n+\r\n+                @foreach($quickReplies ?? [] as $qr)\r\n+                <tr>\r\n+                    <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n+                    <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n+\r\n+                    <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n+\r\n+                    <td class=\"px-6 py-4 flex gap-2\">\r\n+                        <!-- FIXED EDIT BUTTON -->\r\n+                        <button\r\n+                            class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n+                            data-id=\"{{ $qr->id }}\"\r\n+                            data-question=\"{{ $qr->question }}\"\r\n+                            data-answer=\"{{ $qr->answer }}\"\r\n+                            data-role=\"{{ $qr->for_role_id }}\"\r\n+                            onclick=\"openEditModal(this)\"\r\n+                        >\r\n+                            Edit\r\n+                        </button>\r\n+\r\n+                        <form action=\"{{ route('quickreplies.destroy', $qr->id) }}\" method=\"POST\" \r\n+                              onsubmit=\"return confirm('Delete this quick reply?')\" class=\"inline\">\r\n+                            @csrf\r\n+                            @method('DELETE')\r\n+                            <button type=\"submit\" \r\n+                                class=\"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition\">\r\n+                                Delete\r\n+                            </button>\r\n+                        </form>\r\n+                    </td>\r\n+                </tr>\r\n+                @endforeach\r\n+\r\n+            </tbody>\r\n+        </table>\r\n+    </div>\r\n+\r\n+    <!-- Add/Edit Modal -->\r\n+    <div id=\"qr-modal\" class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-50\">\r\n+\r\n+        <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n+\r\n+            <!-- Close Button -->\r\n+            <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n+                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n+                </svg>\r\n+            </button>\r\n+\r\n+            <h3 class=\"text-2xl font-semibold mb-5 text-[#2C6E49]\" id=\"modal-title\">Add Quick Reply</h3>\r\n+\r\n+            <form id=\"qr-form\" method=\"POST\" class=\"flex flex-col h-full\">\r\n+                @csrf\r\n+\r\n+                <!-- Question -->\r\n+                <div class=\"mb-4\">\r\n+                    <label class=\"block text-sm font-medium text-gray-700\">Question</label>\r\n+                    <input type=\"text\" name=\"question\" id=\"qr-question\"\r\n+                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\"\r\n+                        required>\r\n+                </div>\r\n+\r\n+                <!-- Answer -->\r\n+                <div class=\"flex-1 mb-4 flex flex-col\">\r\n+                    <label class=\"block text-sm font-medium text-gray-700\">Answer</label>\r\n+                    <textarea name=\"answer\" id=\"qr-answer\"\r\n+                        class=\"mt-1 block w-full h-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C] resize-none overflow-y-auto\"\r\n+                        placeholder=\"Enter the reply...\"\r\n+                        required></textarea>\r\n+                </div>\r\n+\r\n+                <!-- Role -->\r\n+                <div class=\"mb-6\">\r\n+                    <label class=\"block text-sm font-medium text-gray-700\">Role (optional)</label>\r\n+                    <select name=\"for_role_id\" id=\"qr-role\"\r\n+                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\">\r\n+                        <option value=\"\">All</option>\r\n+                        @foreach($roles as $role)\r\n+                            <option value=\"{{ $role->id }}\">{{ $role->role_name }}</option>\r\n+                        @endforeach\r\n+                    </select>\r\n+                </div>\r\n+\r\n+                <!-- Buttons -->\r\n+                <div class=\"flex justify-end gap-3\">\r\n+                    <button type=\"button\" onclick=\"closeModal()\"\r\n+                        class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\r\n+                        Cancel\r\n+                    </button>\r\n+                    <button type=\"submit\"\r\n+                        class=\"px-4 py-2 bg-[#4C956C] text-white rounded-lg hover:bg-[#3d7e59] transition\"\r\n+                        id=\"modal-submit-btn\">\r\n+                        Save\r\n+                    </button>\r\n+                </div>\r\n+            </form>\r\n+        </div>\r\n+    </div>\r\n+\r\n+\r\n+\r\n+    <script>\r\n+        function openAddModal() {\r\n+            document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n+            const form = document.getElementById('qr-form');\r\n+            form.action = \"{{ route('quickreplies.store') }}\";\r\n+            form.method = \"POST\";\r\n+\r\n+            const methodInput = form.querySelector('input[name=\"_method\"]');\r\n+            if (methodInput) methodInput.remove();\r\n+\r\n+            document.getElementById('qr-question').value = \"\";\r\n+            document.getElementById('qr-answer').value = \"\";\r\n+            document.getElementById('qr-role').value = \"\";\r\n+\r\n+            document.getElementById('qr-modal').classList.remove('hidden');\r\n+        }\r\n+\r\n+        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n+        function openEditModal(button) {\r\n+            document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n+\r\n+            const id = button.dataset.id;\r\n+            const question = button.dataset.question;\r\n+            const answer = button.dataset.answer;\r\n+            const role_id = button.dataset.role;\r\n+\r\n+            const form = document.getElementById('qr-form');\r\n+            form.action = \"/settings/chat/quick-replies/\" + id;\r\n+            form.method = \"POST\";\r\n+\r\n+            if (!form.querySelector('input[name=\"_method\"]')) {\r\n+                const methodInput = document.createElement('input');\r\n+                methodInput.type = 'hidden';\r\n+                methodInput.name = '_method';\r\n+                methodInput.value = 'PUT';\r\n+                form.appendChild(methodInput);\r\n+            }\r\n+\r\n+            // Fill modal fields\r\n+            document.getElementById('qr-question').value = question;\r\n+            document.getElementById('qr-answer').value = answer;\r\n+            document.getElementById('qr-role').value = role_id ?? \"\";\r\n+\r\n+            document.getElementById('qr-modal').classList.remove('hidden');\r\n+        }\r\n+\r\n+        function closeModal() {\r\n+            document.getElementById('qr-modal').classList.add('hidden');\r\n+        }\r\n+    </script>\r\n+\r\n+</div>\r\n"
                },
                {
                    "date": 1765093775203,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,16 +1,22 @@\n <!-- Chat Settings -->\r\n <div id=\"chat-section\" class=\"settings-section hidden\">\r\n \r\n     <style>\r\n-        /* Modal animations + modern look */\r\n+        /* Modal animations */\r\n         #qr-modal .modal-content {\r\n             animation: fadeInScale 0.25s ease-out;\r\n         }\r\n         @keyframes fadeInScale {\r\n             0% { transform: scale(0.95); opacity: 0; }\r\n             100% { transform: scale(1); opacity: 1; }\r\n         }\r\n+\r\n+        /* Fade out when closing */\r\n+        #qr-modal.fade-out {\r\n+            opacity: 0;\r\n+            transition: opacity 0.2s ease-out;\r\n+        }\r\n     </style>\r\n \r\n     <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settings</h3>\r\n     <p class=\"text-gray-600 text-sm mb-6\">Manage system chat options and quick replies.</p>\r\n@@ -47,9 +53,9 @@\n \r\n                     <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n \r\n                     <td class=\"px-6 py-4 flex gap-2\">\r\n-                        <!-- FIXED EDIT BUTTON -->\r\n+                        <!-- Edit -->\r\n                         <button\r\n                             class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n                             data-id=\"{{ $qr->id }}\"\r\n                             data-question=\"{{ $qr->question }}\"\r\n@@ -76,14 +82,15 @@\n             </tbody>\r\n         </table>\r\n     </div>\r\n \r\n-    <!-- Add/Edit Modal -->\r\n-    <div id=\"qr-modal\" class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-50\">\r\n+    <!-- MODAL (FIXED: z-index + click outside + smoother close) -->\r\n+    <div id=\"qr-modal\" \r\n+        class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-[10000] transition-opacity\">\r\n \r\n         <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n \r\n-            <!-- Close Button -->\r\n+            <!-- Close Button (FIXED) -->\r\n             <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n                 <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                     <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n                 </svg>\r\n@@ -139,10 +146,10 @@\n         </div>\r\n     </div>\r\n \r\n \r\n-\r\n     <script>\r\n+        /* ---------------------- OPEN ADD MODAL ---------------------- */\r\n         function openAddModal() {\r\n             document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n             const form = document.getElementById('qr-form');\r\n             form.action = \"{{ route('quickreplies.store') }}\";\r\n@@ -154,20 +161,16 @@\n             document.getElementById('qr-question').value = \"\";\r\n             document.getElementById('qr-answer').value = \"\";\r\n             document.getElementById('qr-role').value = \"\";\r\n \r\n-            document.getElementById('qr-modal').classList.remove('hidden');\r\n+            openModal();\r\n         }\r\n \r\n-        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n+        /* ---------------------- OPEN EDIT MODAL ---------------------- */\r\n         function openEditModal(button) {\r\n             document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n \r\n             const id = button.dataset.id;\r\n-            const question = button.dataset.question;\r\n-            const answer = button.dataset.answer;\r\n-            const role_id = button.dataset.role;\r\n-\r\n             const form = document.getElementById('qr-form');\r\n             form.action = \"/settings/chat/quick-replies/\" + id;\r\n             form.method = \"POST\";\r\n \r\n@@ -178,18 +181,36 @@\n                 methodInput.value = 'PUT';\r\n                 form.appendChild(methodInput);\r\n             }\r\n \r\n-            // Fill modal fields\r\n-            document.getElementById('qr-question').value = question;\r\n-            document.getElementById('qr-answer').value = answer;\r\n-            document.getElementById('qr-role').value = role_id ?? \"\";\r\n+            document.getElementById('qr-question').value = button.dataset.question;\r\n+            document.getElementById('qr-answer').value = button.dataset.answer;\r\n+            document.getElementById('qr-role').value = button.dataset.role ?? \"\";\r\n \r\n-            document.getElementById('qr-modal').classList.remove('hidden');\r\n+            openModal();\r\n         }\r\n \r\n+        /* ---------------------- OPEN MODAL ---------------------- */\r\n+        function openModal() {\r\n+            const modal = document.getElementById('qr-modal');\r\n+            modal.classList.remove('hidden', 'fade-out');\r\n+            modal.style.opacity = \"1\";\r\n+        }\r\n+\r\n+        /* ---------------------- CLOSE MODAL ---------------------- */\r\n         function closeModal() {\r\n-            document.getElementById('qr-modal').classList.add('hidden');\r\n+            const modal = document.getElementById('qr-modal');\r\n+            modal.classList.add('fade-out');\r\n+\r\n+            setTimeout(() => {\r\n+                modal.classList.add('hidden');\r\n+                modal.classList.remove('fade-out');\r\n+            }, 200);\r\n         }\r\n+\r\n+        /* ---------------------- CLICK OUTSIDE CLOSE ---------------------- */\r\n+        document.getElementById('qr-modal').addEventListener('click', function(e) {\r\n+            if (e.target === this) closeModal();\r\n+        });\r\n     </script>\r\n \r\n </div>\r\n"
                },
                {
                    "date": 1765093788146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,22 +1,16 @@\n <!-- Chat Settings -->\r\n <div id=\"chat-section\" class=\"settings-section hidden\">\r\n \r\n     <style>\r\n-        /* Modal animations */\r\n+        /* Modal animations + modern look */\r\n         #qr-modal .modal-content {\r\n             animation: fadeInScale 0.25s ease-out;\r\n         }\r\n         @keyframes fadeInScale {\r\n             0% { transform: scale(0.95); opacity: 0; }\r\n             100% { transform: scale(1); opacity: 1; }\r\n         }\r\n-\r\n-        /* Fade out when closing */\r\n-        #qr-modal.fade-out {\r\n-            opacity: 0;\r\n-            transition: opacity 0.2s ease-out;\r\n-        }\r\n     </style>\r\n \r\n     <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settings</h3>\r\n     <p class=\"text-gray-600 text-sm mb-6\">Manage system chat options and quick replies.</p>\r\n@@ -53,9 +47,9 @@\n \r\n                     <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n \r\n                     <td class=\"px-6 py-4 flex gap-2\">\r\n-                        <!-- Edit -->\r\n+                        <!-- FIXED EDIT BUTTON -->\r\n                         <button\r\n                             class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n                             data-id=\"{{ $qr->id }}\"\r\n                             data-question=\"{{ $qr->question }}\"\r\n@@ -82,15 +76,14 @@\n             </tbody>\r\n         </table>\r\n     </div>\r\n \r\n-    <!-- MODAL (FIXED: z-index + click outside + smoother close) -->\r\n-    <div id=\"qr-modal\" \r\n-        class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-[10000] transition-opacity\">\r\n+    <!-- Add/Edit Modal -->\r\n+    <div id=\"qr-modal\" class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-50\">\r\n \r\n         <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n \r\n-            <!-- Close Button (FIXED) -->\r\n+            <!-- Close Button -->\r\n             <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n                 <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                     <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n                 </svg>\r\n@@ -146,10 +139,10 @@\n         </div>\r\n     </div>\r\n \r\n \r\n+\r\n     <script>\r\n-        /* ---------------------- OPEN ADD MODAL ---------------------- */\r\n         function openAddModal() {\r\n             document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n             const form = document.getElementById('qr-form');\r\n             form.action = \"{{ route('quickreplies.store') }}\";\r\n@@ -161,16 +154,20 @@\n             document.getElementById('qr-question').value = \"\";\r\n             document.getElementById('qr-answer').value = \"\";\r\n             document.getElementById('qr-role').value = \"\";\r\n \r\n-            openModal();\r\n+            document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n-        /* ---------------------- OPEN EDIT MODAL ---------------------- */\r\n+        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n         function openEditModal(button) {\r\n             document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n \r\n             const id = button.dataset.id;\r\n+            const question = button.dataset.question;\r\n+            const answer = button.dataset.answer;\r\n+            const role_id = button.dataset.role;\r\n+\r\n             const form = document.getElementById('qr-form');\r\n             form.action = \"/settings/chat/quick-replies/\" + id;\r\n             form.method = \"POST\";\r\n \r\n@@ -181,36 +178,18 @@\n                 methodInput.value = 'PUT';\r\n                 form.appendChild(methodInput);\r\n             }\r\n \r\n-            document.getElementById('qr-question').value = button.dataset.question;\r\n-            document.getElementById('qr-answer').value = button.dataset.answer;\r\n-            document.getElementById('qr-role').value = button.dataset.role ?? \"\";\r\n+            // Fill modal fields\r\n+            document.getElementById('qr-question').value = question;\r\n+            document.getElementById('qr-answer').value = answer;\r\n+            document.getElementById('qr-role').value = role_id ?? \"\";\r\n \r\n-            openModal();\r\n+            document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n-        /* ---------------------- OPEN MODAL ---------------------- */\r\n-        function openModal() {\r\n-            const modal = document.getElementById('qr-modal');\r\n-            modal.classList.remove('hidden', 'fade-out');\r\n-            modal.style.opacity = \"1\";\r\n-        }\r\n-\r\n-        /* ---------------------- CLOSE MODAL ---------------------- */\r\n         function closeModal() {\r\n-            const modal = document.getElementById('qr-modal');\r\n-            modal.classList.add('fade-out');\r\n-\r\n-            setTimeout(() => {\r\n-                modal.classList.add('hidden');\r\n-                modal.classList.remove('fade-out');\r\n-            }, 200);\r\n+            document.getElementById('qr-modal').classList.add('hidden');\r\n         }\r\n-\r\n-        /* ---------------------- CLICK OUTSIDE CLOSE ---------------------- */\r\n-        document.getElementById('qr-modal').addEventListener('click', function(e) {\r\n-            if (e.target === this) closeModal();\r\n-        });\r\n     </script>\r\n \r\n </div>\r\n"
                },
                {
                    "date": 1765093833904,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,13 +43,13 @@\n                 @foreach($quickReplies ?? [] as $qr)\r\n                 <tr>\r\n                     <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n                     <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n-\r\n                     <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n \r\n                     <td class=\"px-6 py-4 flex gap-2\">\r\n-                        <!-- FIXED EDIT BUTTON -->\r\n+\r\n+                        <!-- EDIT BUTTON -->\r\n                         <button\r\n                             class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n                             data-id=\"{{ $qr->id }}\"\r\n                             data-question=\"{{ $qr->question }}\"\r\n@@ -138,11 +138,10 @@\n             </form>\r\n         </div>\r\n     </div>\r\n \r\n-\r\n-\r\n     <script>\r\n+        /* OPEN ADD MODAL */\r\n         function openAddModal() {\r\n             document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n             const form = document.getElementById('qr-form');\r\n             form.action = \"{{ route('quickreplies.store') }}\";\r\n@@ -157,9 +156,9 @@\n \r\n             document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n-        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n+        /* OPEN EDIT MODAL */\r\n         function openEditModal(button) {\r\n             document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n \r\n             const id = button.dataset.id;\r\n@@ -178,16 +177,16 @@\n                 methodInput.value = 'PUT';\r\n                 form.appendChild(methodInput);\r\n             }\r\n \r\n-            // Fill modal fields\r\n             document.getElementById('qr-question').value = question;\r\n             document.getElementById('qr-answer').value = answer;\r\n             document.getElementById('qr-role').value = role_id ?? \"\";\r\n \r\n             document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n+        /* CLOSE MODAL (Cancel + X button) */\r\n         function closeModal() {\r\n             document.getElementById('qr-modal').classList.add('hidden');\r\n         }\r\n     </script>\r\n"
                },
                {
                    "date": 1765093938536,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,13 +43,13 @@\n                 @foreach($quickReplies ?? [] as $qr)\r\n                 <tr>\r\n                     <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n                     <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n+\r\n                     <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n \r\n                     <td class=\"px-6 py-4 flex gap-2\">\r\n-\r\n-                        <!-- EDIT BUTTON -->\r\n+                        <!-- FIXED EDIT BUTTON -->\r\n                         <button\r\n                             class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n                             data-id=\"{{ $qr->id }}\"\r\n                             data-question=\"{{ $qr->question }}\"\r\n@@ -138,10 +138,11 @@\n             </form>\r\n         </div>\r\n     </div>\r\n \r\n+\r\n+\r\n     <script>\r\n-        /* OPEN ADD MODAL */\r\n         function openAddModal() {\r\n             document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n             const form = document.getElementById('qr-form');\r\n             form.action = \"{{ route('quickreplies.store') }}\";\r\n@@ -156,9 +157,9 @@\n \r\n             document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n-        /* OPEN EDIT MODAL */\r\n+        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n         function openEditModal(button) {\r\n             document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n \r\n             const id = button.dataset.id;\r\n@@ -177,16 +178,16 @@\n                 methodInput.value = 'PUT';\r\n                 form.appendChild(methodInput);\r\n             }\r\n \r\n+            // Fill modal fields\r\n             document.getElementById('qr-question').value = question;\r\n             document.getElementById('qr-answer').value = answer;\r\n             document.getElementById('qr-role').value = role_id ?? \"\";\r\n \r\n             document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n-        /* CLOSE MODAL (Cancel + X button) */\r\n         function closeModal() {\r\n             document.getElementById('qr-modal').classList.add('hidden');\r\n         }\r\n     </script>\r\n"
                },
                {
                    "date": 1765093962634,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,195 +0,0 @@\n-<!-- Chat Settings -->\r\n-<div id=\"chat-section\" class=\"settings-section hidden\">\r\n-\r\n-    <style>\r\n-        /* Modal animations + modern look */\r\n-        #qr-modal .modal-content {\r\n-            animation: fadeInScale 0.25s ease-out;\r\n-        }\r\n-        @keyframes fadeInScale {\r\n-            0% { transform: scale(0.95); opacity: 0; }\r\n-            100% { transform: scale(1); opacity: 1; }\r\n-        }\r\n-    </style>\r\n-\r\n-    <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settings</h3>\r\n-    <p class=\"text-gray-600 text-sm mb-6\">Manage system chat options and quick replies.</p>\r\n-\r\n-    <!-- Quick Replies Header -->\r\n-    <div class=\"flex justify-between items-center bg-white shadow-md border rounded-lg p-4 mb-4\">\r\n-        <div>\r\n-            <p class=\"font-semibold text-gray-800\">Quick Replies</p>\r\n-            <p class=\"text-sm text-gray-500\">Create, edit, or remove predefined replies for faster responses.</p>\r\n-        </div>\r\n-        <button onclick=\"openAddModal()\" \r\n-            class=\"px-4 py-2 bg-[#4C956C] text-white font-medium rounded-lg hover:bg-[#3d7e59] transition\">\r\n-            Add New\r\n-        </button>\r\n-    </div>\r\n-\r\n-    <!-- Quick Replies Table -->\r\n-    <div class=\"overflow-x-auto bg-white shadow rounded-lg\">\r\n-        <table class=\"min-w-full divide-y divide-gray-200\">\r\n-            <thead class=\"bg-[#4C956C] bg-opacity-90\">\r\n-                <tr>\r\n-                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Question</th>\r\n-                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Answer</th>\r\n-                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Role</th>\r\n-                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Actions</th>\r\n-                </tr>\r\n-            </thead>\r\n-            <tbody class=\"bg-white divide-y divide-gray-200\">\r\n-\r\n-                @foreach($quickReplies ?? [] as $qr)\r\n-                <tr>\r\n-                    <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n-                    <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n-\r\n-                    <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n-\r\n-                    <td class=\"px-6 py-4 flex gap-2\">\r\n-                        <!-- FIXED EDIT BUTTON -->\r\n-                        <button\r\n-                            class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n-                            data-id=\"{{ $qr->id }}\"\r\n-                            data-question=\"{{ $qr->question }}\"\r\n-                            data-answer=\"{{ $qr->answer }}\"\r\n-                            data-role=\"{{ $qr->for_role_id }}\"\r\n-                            onclick=\"openEditModal(this)\"\r\n-                        >\r\n-                            Edit\r\n-                        </button>\r\n-\r\n-                        <form action=\"{{ route('quickreplies.destroy', $qr->id) }}\" method=\"POST\" \r\n-                              onsubmit=\"return confirm('Delete this quick reply?')\" class=\"inline\">\r\n-                            @csrf\r\n-                            @method('DELETE')\r\n-                            <button type=\"submit\" \r\n-                                class=\"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition\">\r\n-                                Delete\r\n-                            </button>\r\n-                        </form>\r\n-                    </td>\r\n-                </tr>\r\n-                @endforeach\r\n-\r\n-            </tbody>\r\n-        </table>\r\n-    </div>\r\n-\r\n-    <!-- Add/Edit Modal -->\r\n-    <div id=\"qr-modal\" class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-50\">\r\n-\r\n-        <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n-\r\n-            <!-- Close Button -->\r\n-            <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n-                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n-                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n-                </svg>\r\n-            </button>\r\n-\r\n-            <h3 class=\"text-2xl font-semibold mb-5 text-[#2C6E49]\" id=\"modal-title\">Add Quick Reply</h3>\r\n-\r\n-            <form id=\"qr-form\" method=\"POST\" class=\"flex flex-col h-full\">\r\n-                @csrf\r\n-\r\n-                <!-- Question -->\r\n-                <div class=\"mb-4\">\r\n-                    <label class=\"block text-sm font-medium text-gray-700\">Question</label>\r\n-                    <input type=\"text\" name=\"question\" id=\"qr-question\"\r\n-                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\"\r\n-                        required>\r\n-                </div>\r\n-\r\n-                <!-- Answer -->\r\n-                <div class=\"flex-1 mb-4 flex flex-col\">\r\n-                    <label class=\"block text-sm font-medium text-gray-700\">Answer</label>\r\n-                    <textarea name=\"answer\" id=\"qr-answer\"\r\n-                        class=\"mt-1 block w-full h-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C] resize-none overflow-y-auto\"\r\n-                        placeholder=\"Enter the reply...\"\r\n-                        required></textarea>\r\n-                </div>\r\n-\r\n-                <!-- Role -->\r\n-                <div class=\"mb-6\">\r\n-                    <label class=\"block text-sm font-medium text-gray-700\">Role (optional)</label>\r\n-                    <select name=\"for_role_id\" id=\"qr-role\"\r\n-                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\">\r\n-                        <option value=\"\">All</option>\r\n-                        @foreach($roles as $role)\r\n-                            <option value=\"{{ $role->id }}\">{{ $role->role_name }}</option>\r\n-                        @endforeach\r\n-                    </select>\r\n-                </div>\r\n-\r\n-                <!-- Buttons -->\r\n-                <div class=\"flex justify-end gap-3\">\r\n-                    <button type=\"button\" onclick=\"closeModal()\"\r\n-                        class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\r\n-                        Cancel\r\n-                    </button>\r\n-                    <button type=\"submit\"\r\n-                        class=\"px-4 py-2 bg-[#4C956C] text-white rounded-lg hover:bg-[#3d7e59] transition\"\r\n-                        id=\"modal-submit-btn\">\r\n-                        Save\r\n-                    </button>\r\n-                </div>\r\n-            </form>\r\n-        </div>\r\n-    </div>\r\n-\r\n-\r\n-\r\n-    <script>\r\n-        function openAddModal() {\r\n-            document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n-            const form = document.getElementById('qr-form');\r\n-            form.action = \"{{ route('quickreplies.store') }}\";\r\n-            form.method = \"POST\";\r\n-\r\n-            const methodInput = form.querySelector('input[name=\"_method\"]');\r\n-            if (methodInput) methodInput.remove();\r\n-\r\n-            document.getElementById('qr-question').value = \"\";\r\n-            document.getElementById('qr-answer').value = \"\";\r\n-            document.getElementById('qr-role').value = \"\";\r\n-\r\n-            document.getElementById('qr-modal').classList.remove('hidden');\r\n-        }\r\n-\r\n-        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n-        function openEditModal(button) {\r\n-            document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n-\r\n-            const id = button.dataset.id;\r\n-            const question = button.dataset.question;\r\n-            const answer = button.dataset.answer;\r\n-            const role_id = button.dataset.role;\r\n-\r\n-            const form = document.getElementById('qr-form');\r\n-            form.action = \"/settings/chat/quick-replies/\" + id;\r\n-            form.method = \"POST\";\r\n-\r\n-            if (!form.querySelector('input[name=\"_method\"]')) {\r\n-                const methodInput = document.createElement('input');\r\n-                methodInput.type = 'hidden';\r\n-                methodInput.name = '_method';\r\n-                methodInput.value = 'PUT';\r\n-                form.appendChild(methodInput);\r\n-            }\r\n-\r\n-            // Fill modal fields\r\n-            document.getElementById('qr-question').value = question;\r\n-            document.getElementById('qr-answer').value = answer;\r\n-            document.getElementById('qr-role').value = role_id ?? \"\";\r\n-\r\n-            document.getElementById('qr-modal').classList.remove('hidden');\r\n-        }\r\n-\r\n-        function closeModal() {\r\n-            document.getElementById('qr-modal').classList.add('hidden');\r\n-        }\r\n-    </script>\r\n-\r\n-</div>\r\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765094027824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,205 @@\n+<!-- Chat Settings -->\r\n+<div id=\"chat-section\" class=\"settings-section hidden\">\r\n+\r\n+    <style>\r\n+        /* Modal animations + modern look */\r\n+        #qr-modal .modal-content {\r\n+            animation: fadeInScale 0.25s ease-out;\r\n+        }\r\n+        @keyframes fadeInScale {\r\n+            0% { transform: scale(0.95); opacity: 0; }\r\n+            100% { transform: scale(1); opacity: 1; }\r\n+        }\r\n+\r\n+        /* Modal fade out */\r\n+        #qr-modal.fade-out {\r\n+            opacity: 0;\r\n+            pointer-events: none;\r\n+            transition: opacity 0.25s ease-out;\r\n+        }\r\n+    </style>\r\n+\r\n+    <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settings</h3>\r\n+    <p class=\"text-gray-600 text-sm mb-6\">Manage system chat options and quick replies.</p>\r\n+\r\n+    <!-- Quick Replies Header -->\r\n+    <div class=\"flex justify-between items-center bg-white shadow-md border rounded-lg p-4 mb-4\">\r\n+        <div>\r\n+            <p class=\"font-semibold text-gray-800\">Quick Replies</p>\r\n+            <p class=\"text-sm text-gray-500\">Create, edit, or remove predefined replies for faster responses.</p>\r\n+        </div>\r\n+        <button onclick=\"openAddModal()\" \r\n+            class=\"px-4 py-2 bg-[#4C956C] text-white font-medium rounded-lg hover:bg-[#3d7e59] transition\">\r\n+            Add New\r\n+        </button>\r\n+    </div>\r\n+\r\n+    <!-- Quick Replies Table -->\r\n+    <div class=\"overflow-x-auto bg-white shadow rounded-lg\">\r\n+        <table class=\"min-w-full divide-y divide-gray-200\">\r\n+            <thead class=\"bg-[#4C956C] bg-opacity-90\">\r\n+                <tr>\r\n+                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Question</th>\r\n+                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Answer</th>\r\n+                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Role</th>\r\n+                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Actions</th>\r\n+                </tr>\r\n+            </thead>\r\n+            <tbody class=\"bg-white divide-y divide-gray-200\">\r\n+\r\n+                @foreach($quickReplies ?? [] as $qr)\r\n+                <tr>\r\n+                    <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n+                    <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n+                    <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n+                    <td class=\"px-6 py-4 flex gap-2\">\r\n+                        <!-- Edit Button -->\r\n+                        <button\r\n+                            class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n+                            data-id=\"{{ $qr->id }}\"\r\n+                            data-question=\"{{ $qr->question }}\"\r\n+                            data-answer=\"{{ $qr->answer }}\"\r\n+                            data-role=\"{{ $qr->for_role_id }}\"\r\n+                            onclick=\"openEditModal(this)\"\r\n+                        >\r\n+                            Edit\r\n+                        </button>\r\n+\r\n+                        <form action=\"{{ route('quickreplies.destroy', $qr->id) }}\" method=\"POST\" \r\n+                              onsubmit=\"return confirm('Delete this quick reply?')\" class=\"inline\">\r\n+                            @csrf\r\n+                            @method('DELETE')\r\n+                            <button type=\"submit\" \r\n+                                class=\"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition\">\r\n+                                Delete\r\n+                            </button>\r\n+                        </form>\r\n+                    </td>\r\n+                </tr>\r\n+                @endforeach\r\n+\r\n+            </tbody>\r\n+        </table>\r\n+    </div>\r\n+\r\n+    <!-- Add/Edit Modal -->\r\n+    <div id=\"qr-modal\" class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-50\">\r\n+\r\n+        <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n+\r\n+            <!-- Close Button -->\r\n+            <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n+                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n+                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n+                </svg>\r\n+            </button>\r\n+\r\n+            <h3 class=\"text-2xl font-semibold mb-5 text-[#2C6E49]\" id=\"modal-title\">Add Quick Reply</h3>\r\n+\r\n+            <form id=\"qr-form\" method=\"POST\" class=\"flex flex-col h-full\">\r\n+                @csrf\r\n+\r\n+                <!-- Question -->\r\n+                <div class=\"mb-4\">\r\n+                    <label class=\"block text-sm font-medium text-gray-700\">Question</label>\r\n+                    <input type=\"text\" name=\"question\" id=\"qr-question\"\r\n+                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\"\r\n+                        required>\r\n+                </div>\r\n+\r\n+                <!-- Answer -->\r\n+                <div class=\"flex-1 mb-4 flex flex-col\">\r\n+                    <label class=\"block text-sm font-medium text-gray-700\">Answer</label>\r\n+                    <textarea name=\"answer\" id=\"qr-answer\"\r\n+                        class=\"mt-1 block w-full h-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C] resize-none overflow-y-auto\"\r\n+                        placeholder=\"Enter the reply...\"\r\n+                        required></textarea>\r\n+                </div>\r\n+\r\n+                <!-- Role -->\r\n+                <div class=\"mb-6\">\r\n+                    <label class=\"block text-sm font-medium text-gray-700\">Role (optional)</label>\r\n+                    <select name=\"for_role_id\" id=\"qr-role\"\r\n+                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\">\r\n+                        <option value=\"\">All</option>\r\n+                        @foreach($roles as $role)\r\n+                            <option value=\"{{ $role->id }}\">{{ $role->role_name }}</option>\r\n+                        @endforeach\r\n+                    </select>\r\n+                </div>\r\n+\r\n+                <!-- Buttons -->\r\n+                <div class=\"flex justify-end gap-3\">\r\n+                    <button type=\"button\" onclick=\"closeModal()\"\r\n+                        class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\r\n+                        Cancel\r\n+                    </button>\r\n+                    <button type=\"submit\"\r\n+                        class=\"px-4 py-2 bg-[#4C956C] text-white rounded-lg hover:bg-[#3d7e59] transition\"\r\n+                        id=\"modal-submit-btn\">\r\n+                        Save\r\n+                    </button>\r\n+                </div>\r\n+            </form>\r\n+        </div>\r\n+    </div>\r\n+\r\n+    <script>\r\n+        function openAddModal() {\r\n+            const modal = document.getElementById('qr-modal');\r\n+            document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n+            const form = document.getElementById('qr-form');\r\n+            form.action = \"{{ route('quickreplies.store') }}\";\r\n+            form.method = \"POST\";\r\n+\r\n+            const methodInput = form.querySelector('input[name=\"_method\"]');\r\n+            if (methodInput) methodInput.remove();\r\n+\r\n+            document.getElementById('qr-question').value = \"\";\r\n+            document.getElementById('qr-answer').value = \"\";\r\n+            document.getElementById('qr-role').value = \"\";\r\n+\r\n+            modal.classList.remove('hidden', 'fade-out');\r\n+            modal.style.opacity = \"1\";\r\n+        }\r\n+\r\n+        function openEditModal(button) {\r\n+            const modal = document.getElementById('qr-modal');\r\n+            document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n+\r\n+            const id = button.dataset.id;\r\n+            const question = button.dataset.question;\r\n+            const answer = button.dataset.answer;\r\n+            const role_id = button.dataset.role;\r\n+\r\n+            const form = document.getElementById('qr-form');\r\n+            form.action = \"/settings/chat/quick-replies/\" + id;\r\n+            form.method = \"POST\";\r\n+\r\n+            if (!form.querySelector('input[name=\"_method\"]')) {\r\n+                const methodInput = document.createElement('input');\r\n+                methodInput.type = 'hidden';\r\n+                methodInput.name = '_method';\r\n+                methodInput.value = 'PUT';\r\n+                form.appendChild(methodInput);\r\n+            }\r\n+\r\n+            document.getElementById('qr-question').value = question;\r\n+            document.getElementById('qr-answer').value = answer;\r\n+            document.getElementById('qr-role').value = role_id ?? \"\";\r\n+\r\n+            modal.classList.remove('hidden', 'fade-out');\r\n+            modal.style.opacity = \"1\";\r\n+        }\r\n+\r\n+        function closeModal() {\r\n+            const modal = document.getElementById('qr-modal');\r\n+            modal.classList.add('fade-out');\r\n+            setTimeout(() => {\r\n+                modal.classList.add('hidden');\r\n+                modal.classList.remove('fade-out');\r\n+            }, 250); // matches transition duration\r\n+        }\r\n+    </script>\r\n+\r\n+</div>\r\n"
                },
                {
                    "date": 1765094046960,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,15 +9,8 @@\n         @keyframes fadeInScale {\r\n             0% { transform: scale(0.95); opacity: 0; }\r\n             100% { transform: scale(1); opacity: 1; }\r\n         }\r\n-\r\n-        /* Modal fade out */\r\n-        #qr-modal.fade-out {\r\n-            opacity: 0;\r\n-            pointer-events: none;\r\n-            transition: opacity 0.25s ease-out;\r\n-        }\r\n     </style>\r\n \r\n     <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settings</h3>\r\n     <p class=\"text-gray-600 text-sm mb-6\">Manage system chat options and quick replies.</p>\r\n@@ -50,11 +43,13 @@\n                 @foreach($quickReplies ?? [] as $qr)\r\n                 <tr>\r\n                     <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n                     <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n+\r\n                     <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n+\r\n                     <td class=\"px-6 py-4 flex gap-2\">\r\n-                        <!-- Edit Button -->\r\n+                        <!-- FIXED EDIT BUTTON -->\r\n                         <button\r\n                             class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n                             data-id=\"{{ $qr->id }}\"\r\n                             data-question=\"{{ $qr->question }}\"\r\n@@ -143,11 +138,12 @@\n             </form>\r\n         </div>\r\n     </div>\r\n \r\n+\r\n+\r\n     <script>\r\n         function openAddModal() {\r\n-            const modal = document.getElementById('qr-modal');\r\n             document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n             const form = document.getElementById('qr-form');\r\n             form.action = \"{{ route('quickreplies.store') }}\";\r\n             form.method = \"POST\";\r\n@@ -158,14 +154,13 @@\n             document.getElementById('qr-question').value = \"\";\r\n             document.getElementById('qr-answer').value = \"\";\r\n             document.getElementById('qr-role').value = \"\";\r\n \r\n-            modal.classList.remove('hidden', 'fade-out');\r\n-            modal.style.opacity = \"1\";\r\n+            document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n+        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n         function openEditModal(button) {\r\n-            const modal = document.getElementById('qr-modal');\r\n             document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n \r\n             const id = button.dataset.id;\r\n             const question = button.dataset.question;\r\n@@ -183,24 +178,18 @@\n                 methodInput.value = 'PUT';\r\n                 form.appendChild(methodInput);\r\n             }\r\n \r\n+            // Fill modal fields\r\n             document.getElementById('qr-question').value = question;\r\n             document.getElementById('qr-answer').value = answer;\r\n             document.getElementById('qr-role').value = role_id ?? \"\";\r\n \r\n-            modal.classList.remove('hidden', 'fade-out');\r\n-            modal.style.opacity = \"1\";\r\n+            document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n         function closeModal() {\r\n-            const modal = document.getElementById('qr-modal');\r\n-            modal.classList.add('fade-out');\r\n-            setTimeout(() => {\r\n-                modal.classList.add('hidden');\r\n-                modal.classList.remove('fade-out');\r\n-            }, 250); // matches transition duration\r\n+            document.getElementById('qr-modal').classList.add('hidden');\r\n         }\r\n     </script>\r\n \r\n </div>\r\n-\n"
                },
                {
                    "date": 1765094175900,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,13 +43,11 @@\n                 @foreach($quickReplies ?? [] as $qr)\r\n                 <tr>\r\n                     <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n                     <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n-\r\n                     <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n-\r\n                     <td class=\"px-6 py-4 flex gap-2\">\r\n-                        <!-- FIXED EDIT BUTTON -->\r\n+                        <!-- Edit Button -->\r\n                         <button\r\n                             class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n                             data-id=\"{{ $qr->id }}\"\r\n                             data-question=\"{{ $qr->question }}\"\r\n@@ -82,9 +80,9 @@\n \r\n         <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n \r\n             <!-- Close Button -->\r\n-            <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n+            <button onclick=\"forceCloseModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n                 <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                     <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n                 </svg>\r\n             </button>\r\n@@ -124,9 +122,9 @@\n                 </div>\r\n \r\n                 <!-- Buttons -->\r\n                 <div class=\"flex justify-end gap-3\">\r\n-                    <button type=\"button\" onclick=\"closeModal()\"\r\n+                    <button type=\"button\" onclick=\"forceCloseModal()\"\r\n                         class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\r\n                         Cancel\r\n                     </button>\r\n                     <button type=\"submit\"\r\n@@ -138,14 +136,14 @@\n             </form>\r\n         </div>\r\n     </div>\r\n \r\n+    <script>\r\n+        const modal = document.getElementById('qr-modal');\r\n+        const form = document.getElementById('qr-form');\r\n \r\n-\r\n-    <script>\r\n         function openAddModal() {\r\n             document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n-            const form = document.getElementById('qr-form');\r\n             form.action = \"{{ route('quickreplies.store') }}\";\r\n             form.method = \"POST\";\r\n \r\n             const methodInput = form.querySelector('input[name=\"_method\"]');\r\n@@ -154,21 +152,19 @@\n             document.getElementById('qr-question').value = \"\";\r\n             document.getElementById('qr-answer').value = \"\";\r\n             document.getElementById('qr-role').value = \"\";\r\n \r\n-            document.getElementById('qr-modal').classList.remove('hidden');\r\n+            modal.classList.remove('hidden');\r\n         }\r\n \r\n-        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n         function openEditModal(button) {\r\n             document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n \r\n             const id = button.dataset.id;\r\n             const question = button.dataset.question;\r\n             const answer = button.dataset.answer;\r\n             const role_id = button.dataset.role;\r\n \r\n-            const form = document.getElementById('qr-form');\r\n             form.action = \"/settings/chat/quick-replies/\" + id;\r\n             form.method = \"POST\";\r\n \r\n             if (!form.querySelector('input[name=\"_method\"]')) {\r\n@@ -178,18 +174,28 @@\n                 methodInput.value = 'PUT';\r\n                 form.appendChild(methodInput);\r\n             }\r\n \r\n-            // Fill modal fields\r\n             document.getElementById('qr-question').value = question;\r\n             document.getElementById('qr-answer').value = answer;\r\n             document.getElementById('qr-role').value = role_id ?? \"\";\r\n \r\n-            document.getElementById('qr-modal').classList.remove('hidden');\r\n+            modal.classList.remove('hidden');\r\n         }\r\n \r\n-        function closeModal() {\r\n-            document.getElementById('qr-modal').classList.add('hidden');\r\n+        // Force Close Modal: always works\r\n+        function forceCloseModal() {\r\n+            // Clear all inputs\r\n+            document.getElementById('qr-question').value = \"\";\r\n+            document.getElementById('qr-answer').value = \"\";\r\n+            document.getElementById('qr-role').value = \"\";\r\n+\r\n+            // Hide modal\r\n+            modal.classList.add('hidden');\r\n+\r\n+            // Remove any existing _method input in edit mode\r\n+            const methodInput = form.querySelector('input[name=\"_method\"]');\r\n+            if (methodInput) methodInput.remove();\r\n         }\r\n     </script>\r\n \r\n </div>\r\n"
                },
                {
                    "date": 1765094208170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,11 +43,13 @@\n                 @foreach($quickReplies ?? [] as $qr)\r\n                 <tr>\r\n                     <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n                     <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n+\r\n                     <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n+\r\n                     <td class=\"px-6 py-4 flex gap-2\">\r\n-                        <!-- Edit Button -->\r\n+                        <!-- FIXED EDIT BUTTON -->\r\n                         <button\r\n                             class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n                             data-id=\"{{ $qr->id }}\"\r\n                             data-question=\"{{ $qr->question }}\"\r\n@@ -80,9 +82,9 @@\n \r\n         <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n \r\n             <!-- Close Button -->\r\n-            <button onclick=\"forceCloseModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n+            <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n                 <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                     <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n                 </svg>\r\n             </button>\r\n@@ -122,9 +124,9 @@\n                 </div>\r\n \r\n                 <!-- Buttons -->\r\n                 <div class=\"flex justify-end gap-3\">\r\n-                    <button type=\"button\" onclick=\"forceCloseModal()\"\r\n+                    <button type=\"button\" onclick=\"closeModal()\"\r\n                         class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\r\n                         Cancel\r\n                     </button>\r\n                     <button type=\"submit\"\r\n@@ -136,14 +138,14 @@\n             </form>\r\n         </div>\r\n     </div>\r\n \r\n+\r\n+\r\n     <script>\r\n-        const modal = document.getElementById('qr-modal');\r\n-        const form = document.getElementById('qr-form');\r\n-\r\n         function openAddModal() {\r\n             document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n+            const form = document.getElementById('qr-form');\r\n             form.action = \"{{ route('quickreplies.store') }}\";\r\n             form.method = \"POST\";\r\n \r\n             const methodInput = form.querySelector('input[name=\"_method\"]');\r\n@@ -152,19 +154,21 @@\n             document.getElementById('qr-question').value = \"\";\r\n             document.getElementById('qr-answer').value = \"\";\r\n             document.getElementById('qr-role').value = \"\";\r\n \r\n-            modal.classList.remove('hidden');\r\n+            document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n+        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n         function openEditModal(button) {\r\n             document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n \r\n             const id = button.dataset.id;\r\n             const question = button.dataset.question;\r\n             const answer = button.dataset.answer;\r\n             const role_id = button.dataset.role;\r\n \r\n+            const form = document.getElementById('qr-form');\r\n             form.action = \"/settings/chat/quick-replies/\" + id;\r\n             form.method = \"POST\";\r\n \r\n             if (!form.querySelector('input[name=\"_method\"]')) {\r\n@@ -174,28 +178,18 @@\n                 methodInput.value = 'PUT';\r\n                 form.appendChild(methodInput);\r\n             }\r\n \r\n+            // Fill modal fields\r\n             document.getElementById('qr-question').value = question;\r\n             document.getElementById('qr-answer').value = answer;\r\n             document.getElementById('qr-role').value = role_id ?? \"\";\r\n \r\n-            modal.classList.remove('hidden');\r\n+            document.getElementById('qr-modal').classList.remove('hidden');\r\n         }\r\n \r\n-        // Force Close Modal: always works\r\n-        function forceCloseModal() {\r\n-            // Clear all inputs\r\n-            document.getElementById('qr-question').value = \"\";\r\n-            document.getElementById('qr-answer').value = \"\";\r\n-            document.getElementById('qr-role').value = \"\";\r\n-\r\n-            // Hide modal\r\n-            modal.classList.add('hidden');\r\n-\r\n-            // Remove any existing _method input in edit mode\r\n-            const methodInput = form.querySelector('input[name=\"_method\"]');\r\n-            if (methodInput) methodInput.remove();\r\n+        function closeModal() {\r\n+            document.getElementById('qr-modal').classList.add('hidden');\r\n         }\r\n     </script>\r\n \r\n </div>\r\n"
                },
                {
                    "date": 1765096721007,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,13 +43,11 @@\n                 @foreach($quickReplies ?? [] as $qr)\r\n                 <tr>\r\n                     <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n                     <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n-\r\n                     <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n-\r\n                     <td class=\"px-6 py-4 flex gap-2\">\r\n-                        <!-- FIXED EDIT BUTTON -->\r\n+                        <!-- Edit Button -->\r\n                         <button\r\n                             class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n                             data-id=\"{{ $qr->id }}\"\r\n                             data-question=\"{{ $qr->question }}\"\r\n@@ -82,9 +80,9 @@\n \r\n         <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n \r\n             <!-- Close Button -->\r\n-            <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n+            <button onclick=\"forceCloseModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n                 <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                     <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n                 </svg>\r\n             </button>\r\n@@ -124,9 +122,9 @@\n                 </div>\r\n \r\n                 <!-- Buttons -->\r\n                 <div class=\"flex justify-end gap-3\">\r\n-                    <button type=\"button\" onclick=\"closeModal()\"\r\n+                    <button type=\"button\" onclick=\"forceCloseModal()\"\r\n                         class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\r\n                         Cancel\r\n                     </button>\r\n                     <button type=\"submit\"\r\n@@ -138,14 +136,14 @@\n             </form>\r\n         </div>\r\n     </div>\r\n \r\n+    <script>\r\n+        const modal = document.getElementById('qr-modal');\r\n+        const form = document.getElementById('qr-form');\r\n \r\n-\r\n-    <script>\r\n         function openAddModal() {\r\n             document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n-            const form = document.getElementById('qr-form');\r\n             form.action = \"{{ route('quickreplies.store') }}\";\r\n             form.method = \"POST\";\r\n \r\n             const methodInput = form.querySelector('input[name=\"_method\"]');\r\n@@ -154,21 +152,19 @@\n             document.getElementById('qr-question').value = \"\";\r\n             document.getElementById('qr-answer').value = \"\";\r\n             document.getElementById('qr-role').value = \"\";\r\n \r\n-            document.getElementById('qr-modal').classList.remove('hidden');\r\n+            modal.classList.remove('hidden');\r\n         }\r\n \r\n-        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n         function openEditModal(button) {\r\n             document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n \r\n             const id = button.dataset.id;\r\n             const question = button.dataset.question;\r\n             const answer = button.dataset.answer;\r\n             const role_id = button.dataset.role;\r\n \r\n-            const form = document.getElementById('qr-form');\r\n             form.action = \"/settings/chat/quick-replies/\" + id;\r\n             form.method = \"POST\";\r\n \r\n             if (!form.querySelector('input[name=\"_method\"]')) {\r\n@@ -178,18 +174,28 @@\n                 methodInput.value = 'PUT';\r\n                 form.appendChild(methodInput);\r\n             }\r\n \r\n-            // Fill modal fields\r\n             document.getElementById('qr-question').value = question;\r\n             document.getElementById('qr-answer').value = answer;\r\n             document.getElementById('qr-role').value = role_id ?? \"\";\r\n \r\n-            document.getElementById('qr-modal').classList.remove('hidden');\r\n+            modal.classList.remove('hidden');\r\n         }\r\n \r\n-        function closeModal() {\r\n-            document.getElementById('qr-modal').classList.add('hidden');\r\n+        // Force Close Modal: always works\r\n+        function forceCloseModal() {\r\n+            // Clear all inputs\r\n+            document.getElementById('qr-question').value = \"\";\r\n+            document.getElementById('qr-answer').value = \"\";\r\n+            document.getElementById('qr-role').value = \"\";\r\n+\r\n+            // Hide modal\r\n+            modal.classList.add('hidden');\r\n+\r\n+            // Remove any existing _method input in edit mode\r\n+            const methodInput = form.querySelector('input[name=\"_method\"]');\r\n+            if (methodInput) methodInput.remove();\r\n         }\r\n     </script>\r\n \r\n </div>\r\n"
                }
            ],
            "date": 1765093394216,
            "name": "Commit-0",
            "content": "<!-- Chat Settings -->\r\n<div id=\"chat-section\" class=\"settings-section hidden\">\r\n\r\n    <style>\r\n        /* Modal animations + modern look */\r\n        #qr-modal .modal-content {\r\n            animation: fadeInScale 0.25s ease-out;\r\n        }\r\n        @keyframes fadeInScale {\r\n            0% { transform: scale(0.95); opacity: 0; }\r\n            100% { transform: scale(1); opacity: 1; }\r\n        }\r\n    </style>\r\n\r\n    <h3 class=\"text-2xl font-bold text-[#2C6E49] mb-4\">Chat Settings</h3>\r\n    <p class=\"text-gray-600 text-sm mb-6\">Manage system chat options and quick replies.</p>\r\n\r\n    <!-- Quick Replies Header -->\r\n    <div class=\"flex justify-between items-center bg-white shadow-md border rounded-lg p-4 mb-4\">\r\n        <div>\r\n            <p class=\"font-semibold text-gray-800\">Quick Replies</p>\r\n            <p class=\"text-sm text-gray-500\">Create, edit, or remove predefined replies for faster responses.</p>\r\n        </div>\r\n        <button onclick=\"openAddModal()\" \r\n            class=\"px-4 py-2 bg-[#4C956C] text-white font-medium rounded-lg hover:bg-[#3d7e59] transition\">\r\n            Add New\r\n        </button>\r\n    </div>\r\n\r\n    <!-- Quick Replies Table -->\r\n    <div class=\"overflow-x-auto bg-white shadow rounded-lg\">\r\n        <table class=\"min-w-full divide-y divide-gray-200\">\r\n            <thead class=\"bg-[#4C956C] bg-opacity-90\">\r\n                <tr>\r\n                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Question</th>\r\n                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Answer</th>\r\n                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Role</th>\r\n                    <th class=\"px-6 py-3 text-left text-md font-medium text-white\">Actions</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody class=\"bg-white divide-y divide-gray-200\">\r\n\r\n                @foreach($quickReplies ?? [] as $qr)\r\n                <tr>\r\n                    <td class=\"px-6 py-4\">{{ $qr->question }}</td>\r\n                    <td class=\"px-6 py-4 break-words max-w-xs\">{{ $qr->answer }}</td>\r\n\r\n                    <td class=\"px-6 py-4\">{{ $qr->role?->role_name ?? 'All' }}</td>\r\n\r\n                    <td class=\"px-6 py-4 flex gap-2\">\r\n                        <!-- FIXED EDIT BUTTON -->\r\n                        <button\r\n                            class=\"px-3 py-1 bg-[#4C956C] text-white rounded hover:bg-gray-200 transition\"\r\n                            data-id=\"{{ $qr->id }}\"\r\n                            data-question=\"{{ $qr->question }}\"\r\n                            data-answer=\"{{ $qr->answer }}\"\r\n                            data-role=\"{{ $qr->for_role_id }}\"\r\n                            onclick=\"openEditModal(this)\"\r\n                        >\r\n                            Edit\r\n                        </button>\r\n\r\n                        <form action=\"{{ route('quickreplies.destroy', $qr->id) }}\" method=\"POST\" \r\n                              onsubmit=\"return confirm('Delete this quick reply?')\" class=\"inline\">\r\n                            @csrf\r\n                            @method('DELETE')\r\n                            <button type=\"submit\" \r\n                                class=\"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition\">\r\n                                Delete\r\n                            </button>\r\n                        </form>\r\n                    </td>\r\n                </tr>\r\n                @endforeach\r\n\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <!-- Add/Edit Modal -->\r\n    <div id=\"qr-modal\" class=\"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center hidden z-50\">\r\n\r\n        <div class=\"modal-content bg-white rounded-xl shadow-2xl w-full h-[600px] max-w-3xl p-6 relative flex flex-col\">\r\n\r\n            <!-- Close Button -->\r\n            <button onclick=\"closeModal()\" class=\"absolute top-3 right-3 text-gray-400 hover:text-gray-700\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\r\n                </svg>\r\n            </button>\r\n\r\n            <h3 class=\"text-2xl font-semibold mb-5 text-[#2C6E49]\" id=\"modal-title\">Add Quick Reply</h3>\r\n\r\n            <form id=\"qr-form\" method=\"POST\" class=\"flex flex-col h-full\">\r\n                @csrf\r\n\r\n                <!-- Question -->\r\n                <div class=\"mb-4\">\r\n                    <label class=\"block text-sm font-medium text-gray-700\">Question</label>\r\n                    <input type=\"text\" name=\"question\" id=\"qr-question\"\r\n                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\"\r\n                        required>\r\n                </div>\r\n\r\n                <!-- Answer -->\r\n                <div class=\"flex-1 mb-4 flex flex-col\">\r\n                    <label class=\"block text-sm font-medium text-gray-700\">Answer</label>\r\n                    <textarea name=\"answer\" id=\"qr-answer\"\r\n                        class=\"mt-1 block w-full h-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C] resize-none overflow-y-auto\"\r\n                        placeholder=\"Enter the reply...\"\r\n                        required></textarea>\r\n                </div>\r\n\r\n                <!-- Role -->\r\n                <div class=\"mb-6\">\r\n                    <label class=\"block text-sm font-medium text-gray-700\">Role (optional)</label>\r\n                    <select name=\"for_role_id\" id=\"qr-role\"\r\n                        class=\"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 focus:ring-[#4C956C] focus:border-[#4C956C]\">\r\n                        <option value=\"\">All</option>\r\n                        @foreach($roles as $role)\r\n                            <option value=\"{{ $role->id }}\">{{ $role->role_name }}</option>\r\n                        @endforeach\r\n                    </select>\r\n                </div>\r\n\r\n                <!-- Buttons -->\r\n                <div class=\"flex justify-end gap-3\">\r\n                    <button type=\"button\" onclick=\"closeModal()\"\r\n                        class=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition\">\r\n                        Cancel\r\n                    </button>\r\n                    <button type=\"submit\"\r\n                        class=\"px-4 py-2 bg-[#4C956C] text-white rounded-lg hover:bg-[#3d7e59] transition\"\r\n                        id=\"modal-submit-btn\">\r\n                        Save\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n\r\n\r\n\r\n    <script>\r\n        function openAddModal() {\r\n            document.getElementById('modal-title').innerText = \"Add Quick Reply\";\r\n            const form = document.getElementById('qr-form');\r\n            form.action = \"{{ route('quickreplies.store') }}\";\r\n            form.method = \"POST\";\r\n\r\n            const methodInput = form.querySelector('input[name=\"_method\"]');\r\n            if (methodInput) methodInput.remove();\r\n\r\n            document.getElementById('qr-question').value = \"\";\r\n            document.getElementById('qr-answer').value = \"\";\r\n            document.getElementById('qr-role').value = \"\";\r\n\r\n            document.getElementById('qr-modal').classList.remove('hidden');\r\n        }\r\n\r\n        // ðŸŒŸ FIXED: SAFELY LOAD LONG TEXT USING data-* ATTRIBUTES\r\n        function openEditModal(button) {\r\n            document.getElementById('modal-title').innerText = \"Edit Quick Reply\";\r\n\r\n            const id = button.dataset.id;\r\n            const question = button.dataset.question;\r\n            const answer = button.dataset.answer;\r\n            const role_id = button.dataset.role;\r\n\r\n            const form = document.getElementById('qr-form');\r\n            form.action = \"/settings/chat/quick-replies/\" + id;\r\n            form.method = \"POST\";\r\n\r\n            if (!form.querySelector('input[name=\"_method\"]')) {\r\n                const methodInput = document.createElement('input');\r\n                methodInput.type = 'hidden';\r\n                methodInput.name = '_method';\r\n                methodInput.value = 'PUT';\r\n                form.appendChild(methodInput);\r\n            }\r\n\r\n            // Fill modal fields\r\n            document.getElementById('qr-question').value = question;\r\n            document.getElementById('qr-answer').value = answer;\r\n            document.getElementById('qr-role').value = role_id ?? \"\";\r\n\r\n            document.getElementById('qr-modal').classList.remove('hidden');\r\n        }\r\n\r\n        function closeModal() {\r\n            document.getElementById('qr-modal').classList.add('hidden');\r\n        }\r\n        function hideLoadingOverlay() {\r\n    const overlay = document.getElementById(\"loadingOverlay\");\r\n    overlay.style.opacity = \"0\";\r\n    overlay.style.pointerEvents = \"none\";\r\n\r\n    setTimeout(() => {\r\n        overlay.remove(); // remove from DOM so it cannot block clicks\r\n    }, 300);\r\n}\r\n\r\n    </script>\r\n\r\n</div>\r\n"
        }
    ]
}