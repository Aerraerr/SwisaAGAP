{
    "sourceFile": "resources/views/swisa-admin/messages.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 40,
            "patches": [
                {
                    "date": 1764076690064,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764076701982,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,21 +44,19 @@\n           </svg>\r\n         </div>\r\n \r\n         <div class=\"relative\">\r\n-          <select\r\n-            id=\"chat-filter\"\r\n-            class=\"w-full bg-white border border-gray-200 rounded-xl px-4 py-2 text-sm shadow-sm\r\n-                  focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C] transition\"\r\n-            onchange=\"filterChats()\"\r\n-          >\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n             <option value=\"all\">All</option>\r\n             <option value=\"support\">Support Staff</option>\r\n             <option value=\"user\">User</option>\r\n           </select>\r\n         </div>\r\n+      </div>\r\n \r\n-\r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n     @php\r\n         use App\\Models\\Chat;\r\n"
                },
                {
                    "date": 1764076743868,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,16 +44,20 @@\n           </svg>\r\n         </div>\r\n \r\n         <div class=\"relative\">\r\n-          <select \r\n-            id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n-            onchange=\"filterChats()\">\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n+<select\r\n+  id=\"chat-filter\"\r\n+  class=\"w-full bg-white border border-gray-200 rounded-xl px-4 py-2 text-sm \r\n+         shadow-sm focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C]\r\n+         transition cursor-pointer\"\r\n+  onchange=\"filterChats()\"\r\n+>\r\n+  <option value=\"all\">All</option>\r\n+  <option value=\"support\">Support Staff</option>\r\n+  <option value=\"user\">User</option>\r\n+</select>\r\n+\r\n         </div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n"
                },
                {
                    "date": 1764076836249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,20 +44,48 @@\n           </svg>\r\n         </div>\r\n \r\n         <div class=\"relative\">\r\n-<select\r\n-  id=\"chat-filter\"\r\n-  class=\"w-full bg-white border border-gray-200 rounded-xl px-4 py-2 text-sm \r\n-         shadow-sm focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C]\r\n-         transition cursor-pointer\"\r\n-  onchange=\"filterChats()\"\r\n->\r\n-  <option value=\"all\">All</option>\r\n-  <option value=\"support\">Support Staff</option>\r\n-  <option value=\"user\">User</option>\r\n-</select>\r\n+<div x-data=\"{ open: false, selected: 'All' }\" class=\"relative w-full\">\r\n+    <!-- Trigger -->\r\n+    <button \r\n+        @click=\"open = !open\"\r\n+        class=\"w-full flex justify-between items-center bg-white border border-gray-200 \r\n+               rounded-xl px-4 py-2 text-sm shadow-sm focus:ring-2 focus:ring-[#4C956C] \r\n+               transition\"\r\n+    >\r\n+        <span x-text=\"selected\"></span>\r\n+        <svg class=\"w-4 h-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\r\n+            viewBox=\"0 0 24 24\">\r\n+            <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\r\n+                d=\"M19 9l-7 7-7-7\" />\r\n+        </svg>\r\n+    </button>\r\n \r\n+    <!-- Dropdown -->\r\n+    <div \r\n+        x-show=\"open\"\r\n+        @click.outside=\"open = false\"\r\n+        class=\"absolute w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg \r\n+               overflow-hidden z-20\"\r\n+    >\r\n+        <div \r\n+            class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n+            @click=\"selected='All'; open=false; filterChats('all')\"\r\n+        >All</div>\r\n+\r\n+        <div \r\n+            class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n+            @click=\"selected='Support Staff'; open=false; filterChats('support')\"\r\n+        >Support Staff</div>\r\n+\r\n+        <div \r\n+            class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n+            @click=\"selected='User'; open=false; filterChats('user')\"\r\n+        >User</div>\r\n+    </div>\r\n+</div>\r\n+\r\n         </div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n"
                },
                {
                    "date": 1764076850308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,9 +82,8 @@\n             class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n             @click=\"selected='User'; open=false; filterChats('user')\"\r\n         >User</div>\r\n     </div>\r\n-</div>\r\n \r\n         </div>\r\n       </div>\r\n \r\n"
                },
                {
                    "date": 1764076862600,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,8 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-        <div class=\"relative\">\r\n <div x-data=\"{ open: false, selected: 'All' }\" class=\"relative w-full\">\r\n     <!-- Trigger -->\r\n     <button \r\n         @click=\"open = !open\"\r\n@@ -82,10 +81,10 @@\n             class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n             @click=\"selected='User'; open=false; filterChats('user')\"\r\n         >User</div>\r\n     </div>\r\n+</div>\r\n \r\n-        </div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764076897687,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,8 @@\n             class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n             @click=\"selected='User'; open=false; filterChats('user')\"\r\n         >User</div>\r\n     </div>\r\n-</div>\r\n \r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n"
                },
                {
                    "date": 1764076905062,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,8 +81,9 @@\n             class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n             @click=\"selected='User'; open=false; filterChats('user')\"\r\n         >User</div>\r\n     </div>\r\n+</div>\r\n \r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n"
                },
                {
                    "date": 1764076936465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,46 +43,28 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div x-data=\"{ open: false, selected: 'All' }\" class=\"relative w-full\">\r\n-    <!-- Trigger -->\r\n-    <button \r\n-        @click=\"open = !open\"\r\n-        class=\"w-full flex justify-between items-center bg-white border border-gray-200 \r\n-               rounded-xl px-4 py-2 text-sm shadow-sm focus:ring-2 focus:ring-[#4C956C] \r\n-               transition\"\r\n-    >\r\n-        <span x-text=\"selected\"></span>\r\n-        <svg class=\"w-4 h-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\r\n-            viewBox=\"0 0 24 24\">\r\n-            <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\r\n-                d=\"M19 9l-7 7-7-7\" />\r\n-        </svg>\r\n-    </button>\r\n+<div class=\"relative w-full\">\r\n+  <select\r\n+    id=\"chat-filter\"\r\n+    class=\"appearance-none w-full bg-white border border-gray-200 rounded-xl \r\n+           px-4 py-2 text-sm shadow-sm focus:ring-2 focus:ring-[#4C956C] \r\n+           focus:border-[#4C956C] transition cursor-pointer pr-10\"\r\n+    onchange=\"filterChats()\"\r\n+  >\r\n+    <option value=\"all\">All</option>\r\n+    <option value=\"support\">Support Staff</option>\r\n+    <option value=\"user\">User</option>\r\n+  </select>\r\n \r\n-    <!-- Dropdown -->\r\n-    <div \r\n-        x-show=\"open\"\r\n-        @click.outside=\"open = false\"\r\n-        class=\"absolute w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg \r\n-               overflow-hidden z-20\"\r\n-    >\r\n-        <div \r\n-            class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n-            @click=\"selected='All'; open=false; filterChats('all')\"\r\n-        >All</div>\r\n-\r\n-        <div \r\n-            class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n-            @click=\"selected='Support Staff'; open=false; filterChats('support')\"\r\n-        >Support Staff</div>\r\n-\r\n-        <div \r\n-            class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n-            @click=\"selected='User'; open=false; filterChats('user')\"\r\n-        >User</div>\r\n-    </div>\r\n+  <!-- Custom arrow -->\r\n+  <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-4\">\r\n+    <svg class=\"h-4 w-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\r\n+      viewBox=\"0 0 24 24\">\r\n+      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19 9l-7 7-7-7\"/>\r\n+    </svg>\r\n+  </div>\r\n </div>\r\n \r\n       </div>\r\n \r\n"
                },
                {
                    "date": 1764076944331,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,30 +43,21 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div class=\"relative w-full\">\r\n-  <select\r\n-    id=\"chat-filter\"\r\n-    class=\"appearance-none w-full bg-white border border-gray-200 rounded-xl \r\n-           px-4 py-2 text-sm shadow-sm focus:ring-2 focus:ring-[#4C956C] \r\n-           focus:border-[#4C956C] transition cursor-pointer pr-10\"\r\n-    onchange=\"filterChats()\"\r\n-  >\r\n-    <option value=\"all\">All</option>\r\n-    <option value=\"support\">Support Staff</option>\r\n-    <option value=\"user\">User</option>\r\n-  </select>\r\n-\r\n-  <!-- Custom arrow -->\r\n-  <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-4\">\r\n-    <svg class=\"h-4 w-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\r\n-      viewBox=\"0 0 24 24\">\r\n-      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19 9l-7 7-7-7\"/>\r\n-    </svg>\r\n-  </div>\r\n-</div>\r\n-\r\n+        <div class=\"relative\">\r\n+          <select\r\n+            id=\"chat-filter\"\r\n+            class=\"w-full bg-white border border-gray-200 rounded-xl px-4 py-2 text-sm \r\n+                  shadow-sm focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C]\r\n+                  transition cursor-pointer\"\r\n+            onchange=\"filterChats()\"\r\n+          >\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n+        </div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764076988776,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,23 +43,30 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-        <div class=\"relative\">\r\n-          <select\r\n-            id=\"chat-filter\"\r\n-            class=\"w-full bg-white border border-gray-200 rounded-xl px-4 py-2 text-sm \r\n-                  shadow-sm focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C]\r\n-                  transition cursor-pointer\"\r\n-            onchange=\"filterChats()\"\r\n-          >\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n-        </div>\r\n-      </div>\r\n+<div class=\"relative\">\r\n+  <select\r\n+    id=\"chat-filter\"\r\n+    class=\"appearance-none bg-white border border-gray-300 rounded-lg h-[40px] \r\n+           pl-3 pr-8 text-sm focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C]\r\n+           shadow-sm cursor-pointer\"\r\n+    onchange=\"filterChats()\"\r\n+  >\r\n+    <option value=\"all\">All</option>\r\n+    <option value=\"support\">Support Staff</option>\r\n+    <option value=\"user\">User</option>\r\n+  </select>\r\n \r\n+  <!-- Arrow -->\r\n+  <svg class=\"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500\" \r\n+       fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\">\r\n+    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19 9l-7 7-7-7\"/>\r\n+  </svg>\r\n+</div>\r\n+\r\n+  </div>\r\n+\r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n     @php\r\n         use App\\Models\\Chat;\r\n"
                },
                {
                    "date": 1764077003561,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,30 +43,20 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div class=\"relative\">\r\n-  <select\r\n-    id=\"chat-filter\"\r\n-    class=\"appearance-none bg-white border border-gray-300 rounded-lg h-[40px] \r\n-           pl-3 pr-8 text-sm focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C]\r\n-           shadow-sm cursor-pointer\"\r\n-    onchange=\"filterChats()\"\r\n-  >\r\n-    <option value=\"all\">All</option>\r\n-    <option value=\"support\">Support Staff</option>\r\n-    <option value=\"user\">User</option>\r\n-  </select>\r\n+        <div class=\"relative\">\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n+        </div>\r\n+      </div>\r\n \r\n-  <!-- Arrow -->\r\n-  <svg class=\"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500\" \r\n-       fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\">\r\n-    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19 9l-7 7-7-7\"/>\r\n-  </svg>\r\n-</div>\r\n-\r\n-  </div>\r\n-\r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n     @php\r\n         use App\\Models\\Chat;\r\n"
                },
                {
                    "date": 1764077060530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,18 +43,39 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-        <div class=\"relative\">\r\n-          <select \r\n-            id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n-            onchange=\"filterChats()\">\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n-        </div>\r\n+<div class=\"relative\" id=\"chatFilterDropdown\">\r\n+    <!-- Button -->\r\n+    <button \r\n+        onclick=\"toggleDropdown()\"\r\n+        class=\"w-full bg-white border border-gray-300 rounded-lg h-[40px] px-3 \r\n+               text-sm shadow-sm flex items-center justify-between\r\n+               focus:ring-2 focus:ring-[#4C956C] transition\"\r\n+    >\r\n+        <span id=\"selectedFilter\">All</span>\r\n+        <svg class=\"w-4 h-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\r\n+             viewBox=\"0 0 24 24\">\r\n+            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19 9l-7 7-7-7\"/>\r\n+        </svg>\r\n+    </button>\r\n+\r\n+    <!-- Dropdown box -->\r\n+    <div \r\n+        id=\"dropdownMenu\" \r\n+        class=\"hidden absolute right-0 mt-2 w-40 bg-white border border-gray-200 \r\n+               rounded-lg shadow-lg overflow-hidden z-20\"\r\n+    >\r\n+        <div class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n+             onclick=\"setFilter('all','All')\">All</div>\r\n+\r\n+        <div class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n+             onclick=\"setFilter('support','Support Staff')\">Support Staff</div>\r\n+\r\n+        <div class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n+             onclick=\"setFilter('user','User')\">User</div>\r\n+    </div>\r\n+</div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077073841,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,39 +43,18 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div class=\"relative\" id=\"chatFilterDropdown\">\r\n-    <!-- Button -->\r\n-    <button \r\n-        onclick=\"toggleDropdown()\"\r\n-        class=\"w-full bg-white border border-gray-300 rounded-lg h-[40px] px-3 \r\n-               text-sm shadow-sm flex items-center justify-between\r\n-               focus:ring-2 focus:ring-[#4C956C] transition\"\r\n-    >\r\n-        <span id=\"selectedFilter\">All</span>\r\n-        <svg class=\"w-4 h-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\r\n-             viewBox=\"0 0 24 24\">\r\n-            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19 9l-7 7-7-7\"/>\r\n-        </svg>\r\n-    </button>\r\n-\r\n-    <!-- Dropdown box -->\r\n-    <div \r\n-        id=\"dropdownMenu\" \r\n-        class=\"hidden absolute right-0 mt-2 w-40 bg-white border border-gray-200 \r\n-               rounded-lg shadow-lg overflow-hidden z-20\"\r\n-    >\r\n-        <div class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n-             onclick=\"setFilter('all','All')\">All</div>\r\n-\r\n-        <div class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n-             onclick=\"setFilter('support','Support Staff')\">Support Staff</div>\r\n-\r\n-        <div class=\"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer\"\r\n-             onclick=\"setFilter('user','User')\">User</div>\r\n-    </div>\r\n-</div>\r\n+        <div class=\"relative\">\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n+        </div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077084030,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,9 +46,9 @@\n \r\n         <div class=\"relative\">\r\n           <select \r\n             id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            class=\"border rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n             onchange=\"filterChats()\">\r\n             <option value=\"all\">All</option>\r\n             <option value=\"support\">Support Staff</option>\r\n             <option value=\"user\">User</option>\r\n"
                },
                {
                    "date": 1764077090029,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,9 +46,9 @@\n \r\n         <div class=\"relative\">\r\n           <select \r\n             id=\"chat-filter\" \r\n-            class=\"border rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n             onchange=\"filterChats()\">\r\n             <option value=\"all\">All</option>\r\n             <option value=\"support\">Support Staff</option>\r\n             <option value=\"user\">User</option>\r\n"
                },
                {
                    "date": 1764077160276,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,18 +43,26 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-        <div class=\"relative\">\r\n-          <select \r\n-            id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n-            onchange=\"filterChats()\">\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n-        </div>\r\n+<div class=\"relative\">\r\n+    <select \r\n+        id=\"chat-filter\"\r\n+        class=\"appearance-none w-full border border-gray-300 rounded-xl px-4 py-2 text-sm bg-white shadow-sm\r\n+               focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C] transition\">\r\n+        <option value=\"all\">All</option>\r\n+        <option value=\"support\">Support Staff</option>\r\n+        <option value=\"user\">User</option>\r\n+    </select>\r\n+\r\n+    <!-- Custom arrow -->\r\n+    <div class=\"pointer-events-none absolute inset-y-0 right-3 flex items-center\">\r\n+        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n+            <path d=\"M6 9l3 3 3-3\"/>\r\n+        </svg>\r\n+    </div>\r\n+</div>\r\n+\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077170086,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,26 +43,18 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div class=\"relative\">\r\n-    <select \r\n-        id=\"chat-filter\"\r\n-        class=\"appearance-none w-full border border-gray-300 rounded-xl px-4 py-2 text-sm bg-white shadow-sm\r\n-               focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C] transition\">\r\n-        <option value=\"all\">All</option>\r\n-        <option value=\"support\">Support Staff</option>\r\n-        <option value=\"user\">User</option>\r\n-    </select>\r\n-\r\n-    <!-- Custom arrow -->\r\n-    <div class=\"pointer-events-none absolute inset-y-0 right-3 flex items-center\">\r\n-        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n-            <path d=\"M6 9l3 3 3-3\"/>\r\n-        </svg>\r\n-    </div>\r\n-</div>\r\n-\r\n+        <div class=\"relative\">\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n+        </div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077266417,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,18 +43,51 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-        <div class=\"relative\">\r\n-          <select \r\n-            id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n-            onchange=\"filterChats()\">\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n+<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-full\">\r\n+\r\n+    <!-- Trigger -->\r\n+    <button \r\n+        @click=\"open = !open\"\r\n+        class=\"w-full flex justify-between items-center border border-gray-300 rounded-xl px-4 py-2 bg-white shadow-sm\r\n+               focus:ring-2 focus:ring-[#4C956C] transition text-sm\">\r\n+        <span x-text=\"selected\"></span>\r\n+\r\n+        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\"\r\n+             stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n+            <path d=\"M6 8l3 3 3-3\"/>\r\n+        </svg>\r\n+    </button>\r\n+\r\n+    <!-- Dropdown -->\r\n+    <div \r\n+        x-show=\"open\"\r\n+        @click.away=\"open=false\"\r\n+        class=\"absolute mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n+\r\n+        <div class=\"p-1 text-sm\">\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='All'; open=false\">\r\n+                All\r\n+            </div>\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='Support Staff'; open=false\">\r\n+                Support Staff\r\n+            </div>\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='User'; open=false\">\r\n+                User\r\n+            </div>\r\n+\r\n         </div>\r\n+    </div>\r\n+\r\n+</div>\r\n+\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077279496,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,9 @@\n     <!-- Dropdown -->\r\n     <div \r\n         x-show=\"open\"\r\n         @click.away=\"open=false\"\r\n-        class=\"absolute mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n+        class=\"absolute mt-2 w-1/4 bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n \r\n         <div class=\"p-1 text-sm\">\r\n \r\n             <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n"
                },
                {
                    "date": 1764077294223,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,9 @@\n     <!-- Dropdown -->\r\n     <div \r\n         x-show=\"open\"\r\n         @click.away=\"open=false\"\r\n-        class=\"absolute mt-2 w-1/4 bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n+        class=\"absolute mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n \r\n         <div class=\"p-1 text-sm\">\r\n \r\n             <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n"
                },
                {
                    "date": 1764077312799,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,9 +43,9 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-full\">\r\n+<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-1/3\">\r\n \r\n     <!-- Trigger -->\r\n     <button \r\n         @click=\"open = !open\"\r\n"
                },
                {
                    "date": 1764077375506,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,51 +43,18 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-1/3\">\r\n-\r\n-    <!-- Trigger -->\r\n-    <button \r\n-        @click=\"open = !open\"\r\n-        class=\"w-full flex justify-between items-center border border-gray-300 rounded-xl px-4 py-2 bg-white shadow-sm\r\n-               focus:ring-2 focus:ring-[#4C956C] transition text-sm\">\r\n-        <span x-text=\"selected\"></span>\r\n-\r\n-        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\"\r\n-             stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n-            <path d=\"M6 8l3 3 3-3\"/>\r\n-        </svg>\r\n-    </button>\r\n-\r\n-    <!-- Dropdown -->\r\n-    <div \r\n-        x-show=\"open\"\r\n-        @click.away=\"open=false\"\r\n-        class=\"absolute mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n-\r\n-        <div class=\"p-1 text-sm\">\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='All'; open=false\">\r\n-                All\r\n-            </div>\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='Support Staff'; open=false\">\r\n-                Support Staff\r\n-            </div>\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='User'; open=false\">\r\n-                User\r\n-            </div>\r\n-\r\n+        <div class=\"relative\">\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n         </div>\r\n-    </div>\r\n-\r\n-</div>\r\n-\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077383704,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,18 +43,51 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-        <div class=\"relative\">\r\n-          <select \r\n-            id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n-            onchange=\"filterChats()\">\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n+<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-1/3\">\r\n+\r\n+    <!-- Trigger -->\r\n+    <button \r\n+        @click=\"open = !open\"\r\n+        class=\"w-full flex justify-between items-center border border-gray-300 rounded-xl px-4 py-2 bg-white shadow-sm\r\n+               focus:ring-2 focus:ring-[#4C956C] transition text-sm\">\r\n+        <span x-text=\"selected\"></span>\r\n+\r\n+        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\"\r\n+             stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n+            <path d=\"M6 8l3 3 3-3\"/>\r\n+        </svg>\r\n+    </button>\r\n+\r\n+    <!-- Dropdown -->\r\n+    <div \r\n+        x-show=\"open\"\r\n+        @click.away=\"open=false\"\r\n+        class=\"absolute mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n+\r\n+        <div class=\"p-1 text-sm\">\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='All'; open=false\">\r\n+                All\r\n+            </div>\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='Support Staff'; open=false\">\r\n+                Support Staff\r\n+            </div>\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='User'; open=false\">\r\n+                User\r\n+            </div>\r\n+\r\n         </div>\r\n+    </div>\r\n+\r\n+</div>\r\n+\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077430192,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,49 +43,36 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-1/3\">\r\n+<div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+     @click=\"\r\n+        selected='All';\r\n+        document.getElementById('chat-filter').value = 'all';\r\n+        open=false;\r\n+        filterChats();\r\n+     \">\r\n+    All\r\n+</div>\r\n \r\n-    <!-- Trigger -->\r\n-    <button \r\n-        @click=\"open = !open\"\r\n-        class=\"w-full flex justify-between items-center border border-gray-300 rounded-xl px-4 py-2 bg-white shadow-sm\r\n-               focus:ring-2 focus:ring-[#4C956C] transition text-sm\">\r\n-        <span x-text=\"selected\"></span>\r\n+<div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+     @click=\"\r\n+        selected='Support Staff';\r\n+        document.getElementById('chat-filter').value = 'support';\r\n+        open=false;\r\n+        filterChats();\r\n+     \">\r\n+    Support Staff\r\n+</div>\r\n \r\n-        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\"\r\n-             stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n-            <path d=\"M6 8l3 3 3-3\"/>\r\n-        </svg>\r\n-    </button>\r\n-\r\n-    <!-- Dropdown -->\r\n-    <div \r\n-        x-show=\"open\"\r\n-        @click.away=\"open=false\"\r\n-        class=\"absolute mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n-\r\n-        <div class=\"p-1 text-sm\">\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='All'; open=false\">\r\n-                All\r\n-            </div>\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='Support Staff'; open=false\">\r\n-                Support Staff\r\n-            </div>\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='User'; open=false\">\r\n-                User\r\n-            </div>\r\n-\r\n-        </div>\r\n-    </div>\r\n-\r\n+<div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+     @click=\"\r\n+        selected='User';\r\n+        document.getElementById('chat-filter').value = 'user';\r\n+        open=false;\r\n+        filterChats();\r\n+     \">\r\n+    User\r\n </div>\r\n \r\n       </div>\r\n \r\n"
                },
                {
                    "date": 1764077437653,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,38 +43,18 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-     @click=\"\r\n-        selected='All';\r\n-        document.getElementById('chat-filter').value = 'all';\r\n-        open=false;\r\n-        filterChats();\r\n-     \">\r\n-    All\r\n-</div>\r\n-\r\n-<div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-     @click=\"\r\n-        selected='Support Staff';\r\n-        document.getElementById('chat-filter').value = 'support';\r\n-        open=false;\r\n-        filterChats();\r\n-     \">\r\n-    Support Staff\r\n-</div>\r\n-\r\n-<div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-     @click=\"\r\n-        selected='User';\r\n-        document.getElementById('chat-filter').value = 'user';\r\n-        open=false;\r\n-        filterChats();\r\n-     \">\r\n-    User\r\n-</div>\r\n-\r\n+        <div class=\"relative\">\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n+        </div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077462327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,18 +43,51 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-        <div class=\"relative\">\r\n-          <select \r\n-            id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n-            onchange=\"filterChats()\">\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n+<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-full\">\r\n+\r\n+    <!-- Trigger -->\r\n+    <button \r\n+        @click=\"open = !open\"\r\n+        class=\"w-full flex justify-between items-center border border-gray-300 rounded-xl px-4 py-2 bg-white shadow-sm\r\n+               focus:ring-2 focus:ring-[#4C956C] transition text-sm\">\r\n+        <span x-text=\"selected\"></span>\r\n+\r\n+        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\"\r\n+             stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n+            <path d=\"M6 8l3 3 3-3\"/>\r\n+        </svg>\r\n+    </button>\r\n+\r\n+    <!-- Dropdown -->\r\n+    <div \r\n+        x-show=\"open\"\r\n+        @click.away=\"open=false\"\r\n+        class=\"absolute mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n+\r\n+        <div class=\"p-1 text-sm\">\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='All'; open=false\">\r\n+                All\r\n+            </div>\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='Support Staff'; open=false\">\r\n+                Support Staff\r\n+            </div>\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='User'; open=false\">\r\n+                User\r\n+            </div>\r\n+\r\n         </div>\r\n+    </div>\r\n+\r\n+</div>\r\n+\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077475744,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,51 +43,18 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-full\">\r\n-\r\n-    <!-- Trigger -->\r\n-    <button \r\n-        @click=\"open = !open\"\r\n-        class=\"w-full flex justify-between items-center border border-gray-300 rounded-xl px-4 py-2 bg-white shadow-sm\r\n-               focus:ring-2 focus:ring-[#4C956C] transition text-sm\">\r\n-        <span x-text=\"selected\"></span>\r\n-\r\n-        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\"\r\n-             stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n-            <path d=\"M6 8l3 3 3-3\"/>\r\n-        </svg>\r\n-    </button>\r\n-\r\n-    <!-- Dropdown -->\r\n-    <div \r\n-        x-show=\"open\"\r\n-        @click.away=\"open=false\"\r\n-        class=\"absolute mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n-\r\n-        <div class=\"p-1 text-sm\">\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='All'; open=false\">\r\n-                All\r\n-            </div>\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='Support Staff'; open=false\">\r\n-                Support Staff\r\n-            </div>\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='User'; open=false\">\r\n-                User\r\n-            </div>\r\n-\r\n+        <div class=\"relative\">\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n         </div>\r\n-    </div>\r\n-\r\n-</div>\r\n-\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077502250,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,18 +43,28 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-        <div class=\"relative\">\r\n-          <select \r\n-            id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n-            onchange=\"filterChats()\">\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n-        </div>\r\n+<div class=\"relative w-48\">\r\n+  <select \r\n+    id=\"chat-filter\"\r\n+    class=\"block w-full appearance-none bg-white border border-gray-300 rounded-xl px-4 py-2 text-sm text-gray-700 font-medium\r\n+           focus:outline-none focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C] shadow-md hover:shadow-lg transition-all duration-200\r\n+           cursor-pointer\"\r\n+    onchange=\"filterChats()\">\r\n+    <option value=\"all\">All</option>\r\n+    <option value=\"support\">Support Staff</option>\r\n+    <option value=\"user\">User</option>\r\n+  </select>\r\n+  \r\n+  <!-- Dropdown arrow -->\r\n+  <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3\">\r\n+    <svg class=\"w-4 h-4 text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n+      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n+    </svg>\r\n+  </div>\r\n+</div>\r\n+\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077510550,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,28 +43,18 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div class=\"relative w-48\">\r\n-  <select \r\n-    id=\"chat-filter\"\r\n-    class=\"block w-full appearance-none bg-white border border-gray-300 rounded-xl px-4 py-2 text-sm text-gray-700 font-medium\r\n-           focus:outline-none focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C] shadow-md hover:shadow-lg transition-all duration-200\r\n-           cursor-pointer\"\r\n-    onchange=\"filterChats()\">\r\n-    <option value=\"all\">All</option>\r\n-    <option value=\"support\">Support Staff</option>\r\n-    <option value=\"user\">User</option>\r\n-  </select>\r\n-  \r\n-  <!-- Dropdown arrow -->\r\n-  <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3\">\r\n-    <svg class=\"w-4 h-4 text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n-      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n-    </svg>\r\n-  </div>\r\n-</div>\r\n-\r\n+        <div class=\"relative\">\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n+        </div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077527204,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,18 +43,51 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-        <div class=\"relative\">\r\n-          <select \r\n-            id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n-            onchange=\"filterChats()\">\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n+<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-full\">\r\n+\r\n+    <!-- Trigger -->\r\n+    <button \r\n+        @click=\"open = !open\"\r\n+        class=\"w-full flex justify-between items-center border border-gray-300 rounded-xl px-4 py-2 bg-white shadow-sm\r\n+               focus:ring-2 focus:ring-[#4C956C] transition text-sm\">\r\n+        <span x-text=\"selected\"></span>\r\n+\r\n+        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\"\r\n+             stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n+            <path d=\"M6 8l3 3 3-3\"/>\r\n+        </svg>\r\n+    </button>\r\n+\r\n+    <!-- Dropdown -->\r\n+    <div \r\n+        x-show=\"open\"\r\n+        @click.away=\"open=false\"\r\n+        class=\"absolute mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n+\r\n+        <div class=\"p-1 text-sm\">\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='All'; open=false\">\r\n+                All\r\n+            </div>\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='Support Staff'; open=false\">\r\n+                Support Staff\r\n+            </div>\r\n+\r\n+            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n+                 @click=\"selected='User'; open=false\">\r\n+                User\r\n+            </div>\r\n+\r\n         </div>\r\n+    </div>\r\n+\r\n+</div>\r\n+\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077608035,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,35 +59,52 @@\n         </svg>\r\n     </button>\r\n \r\n     <!-- Dropdown -->\r\n+<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-full\">\r\n+\r\n+    <!-- Trigger -->\r\n+    <button \r\n+        @click=\"open = !open; filterChats(selected)\"\r\n+        class=\"w-full flex justify-between items-center border border-gray-300 rounded-xl px-4 py-2 bg-white shadow-sm\r\n+               focus:ring-2 focus:ring-[#4C956C] transition text-sm\">\r\n+        <span x-text=\"selected\"></span>\r\n+\r\n+        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\"\r\n+             stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n+            <path d=\"M6 8l3 3 3-3\"/>\r\n+        </svg>\r\n+    </button>\r\n+\r\n+    <!-- Dropdown -->\r\n     <div \r\n         x-show=\"open\"\r\n         @click.away=\"open=false\"\r\n         class=\"absolute mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n \r\n         <div class=\"p-1 text-sm\">\r\n \r\n             <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='All'; open=false\">\r\n+                 @click=\"selected='All'; open=false; filterChats('All')\">\r\n                 All\r\n             </div>\r\n \r\n             <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='Support Staff'; open=false\">\r\n+                 @click=\"selected='Support Staff'; open=false; filterChats('support')\">\r\n                 Support Staff\r\n             </div>\r\n \r\n             <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='User'; open=false\">\r\n+                 @click=\"selected='User'; open=false; filterChats('user')\">\r\n                 User\r\n             </div>\r\n \r\n         </div>\r\n     </div>\r\n \r\n </div>\r\n \r\n+\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077621826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,68 +43,18 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-full\">\r\n-\r\n-    <!-- Trigger -->\r\n-    <button \r\n-        @click=\"open = !open\"\r\n-        class=\"w-full flex justify-between items-center border border-gray-300 rounded-xl px-4 py-2 bg-white shadow-sm\r\n-               focus:ring-2 focus:ring-[#4C956C] transition text-sm\">\r\n-        <span x-text=\"selected\"></span>\r\n-\r\n-        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\"\r\n-             stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n-            <path d=\"M6 8l3 3 3-3\"/>\r\n-        </svg>\r\n-    </button>\r\n-\r\n-    <!-- Dropdown -->\r\n-<div x-data=\"{ open:false, selected:'All' }\" class=\"relative w-full\">\r\n-\r\n-    <!-- Trigger -->\r\n-    <button \r\n-        @click=\"open = !open; filterChats(selected)\"\r\n-        class=\"w-full flex justify-between items-center border border-gray-300 rounded-xl px-4 py-2 bg-white shadow-sm\r\n-               focus:ring-2 focus:ring-[#4C956C] transition text-sm\">\r\n-        <span x-text=\"selected\"></span>\r\n-\r\n-        <svg width=\"18\" height=\"18\" fill=\"none\" stroke=\"#4C956C\" stroke-width=\"2\"\r\n-             stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n-            <path d=\"M6 8l3 3 3-3\"/>\r\n-        </svg>\r\n-    </button>\r\n-\r\n-    <!-- Dropdown -->\r\n-    <div \r\n-        x-show=\"open\"\r\n-        @click.away=\"open=false\"\r\n-        class=\"absolute mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 z-50 overflow-hidden\">\r\n-\r\n-        <div class=\"p-1 text-sm\">\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='All'; open=false; filterChats('All')\">\r\n-                All\r\n-            </div>\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='Support Staff'; open=false; filterChats('support')\">\r\n-                Support Staff\r\n-            </div>\r\n-\r\n-            <div class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer\"\r\n-                 @click=\"selected='User'; open=false; filterChats('user')\">\r\n-                User\r\n-            </div>\r\n-\r\n+        <div class=\"relative\">\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n         </div>\r\n-    </div>\r\n-\r\n-</div>\r\n-\r\n-\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077698526,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,18 +43,28 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-        <div class=\"relative\">\r\n-          <select \r\n-            id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n-            onchange=\"filterChats()\">\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n-        </div>\r\n+<div class=\"relative w-48\">\r\n+  <select\r\n+    id=\"chat-filter\"\r\n+    class=\"block w-full appearance-none bg-white text-gray-700 text-sm font-medium \r\n+           rounded-xl px-4 py-2 pr-8 shadow-md hover:shadow-lg\r\n+           focus:outline-none focus:ring-2 focus:ring-[#4C956C] focus:ring-offset-1\r\n+           transition-all duration-200 cursor-pointer\">\r\n+    <option value=\"all\">All</option>\r\n+    <option value=\"support\">Support Staff</option>\r\n+    <option value=\"user\">User</option>\r\n+  </select>\r\n+\r\n+  <!-- Custom dropdown arrow -->\r\n+  <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3\">\r\n+    <svg class=\"w-4 h-4 text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n+      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 9l6 6 6-6\" />\r\n+    </svg>\r\n+  </div>\r\n+</div>\r\n+\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077717081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,28 +43,18 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div class=\"relative w-48\">\r\n-  <select\r\n-    id=\"chat-filter\"\r\n-    class=\"block w-full appearance-none bg-white text-gray-700 text-sm font-medium \r\n-           rounded-xl px-4 py-2 pr-8 shadow-md hover:shadow-lg\r\n-           focus:outline-none focus:ring-2 focus:ring-[#4C956C] focus:ring-offset-1\r\n-           transition-all duration-200 cursor-pointer\">\r\n-    <option value=\"all\">All</option>\r\n-    <option value=\"support\">Support Staff</option>\r\n-    <option value=\"user\">User</option>\r\n-  </select>\r\n-\r\n-  <!-- Custom dropdown arrow -->\r\n-  <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3\">\r\n-    <svg class=\"w-4 h-4 text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n-      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 9l6 6 6-6\" />\r\n-    </svg>\r\n-  </div>\r\n-</div>\r\n-\r\n+        <div class=\"relative\">\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n+        </div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077842012,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,18 +43,47 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-        <div class=\"relative\">\r\n-          <select \r\n-            id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n-            onchange=\"filterChats()\">\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n+<div x-data=\"{ open: false, selected: 'All' }\" class=\"relative w-48\">\r\n+\r\n+  <!-- Trigger button -->\r\n+  <button \r\n+    @click=\"open = !open\" \r\n+    class=\"w-full flex justify-between items-center bg-white rounded-xl px-4 py-2 shadow-md\r\n+           hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-[#4C956C] transition text-sm font-medium\">\r\n+    <span x-text=\"selected\"></span>\r\n+    <svg class=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\">\r\n+      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 9l6 6 6-6\" />\r\n+    </svg>\r\n+  </button>\r\n+\r\n+  <!-- Dropdown panel -->\r\n+  <div \r\n+    x-show=\"open\" \r\n+    @click.away=\"open = false\" \r\n+    x-transition:enter=\"transition ease-out duration-200\" \r\n+    x-transition:enter-start=\"opacity-0 transform scale-95\" \r\n+    x-transition:enter-end=\"opacity-100 transform scale-100\" \r\n+    x-transition:leave=\"transition ease-in duration-150\" \r\n+    x-transition:leave-start=\"opacity-100 transform scale-100\" \r\n+    x-transition:leave-end=\"opacity-0 transform scale-95\"\r\n+    class=\"absolute mt-2 w-full bg-white rounded-xl shadow-lg border border-gray-100 z-50 overflow-hidden\">\r\n+    \r\n+    <div class=\"p-1 text-sm\">\r\n+      <template x-for=\"option in ['All','Support Staff','User']\" :key=\"option\">\r\n+        <div \r\n+          @click=\"selected = option; open = false; filterChats(option.toLowerCase().replace(' ', ''))\"\r\n+          class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer transition\">\r\n+          <span x-text=\"option\"></span>\r\n         </div>\r\n+      </template>\r\n+    </div>\r\n+\r\n+  </div>\r\n+\r\n+</div>\r\n+\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077861556,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,47 +43,18 @@\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n           </svg>\r\n         </div>\r\n \r\n-<div x-data=\"{ open: false, selected: 'All' }\" class=\"relative w-48\">\r\n-\r\n-  <!-- Trigger button -->\r\n-  <button \r\n-    @click=\"open = !open\" \r\n-    class=\"w-full flex justify-between items-center bg-white rounded-xl px-4 py-2 shadow-md\r\n-           hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-[#4C956C] transition text-sm font-medium\">\r\n-    <span x-text=\"selected\"></span>\r\n-    <svg class=\"w-4 h-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\">\r\n-      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 9l6 6 6-6\" />\r\n-    </svg>\r\n-  </button>\r\n-\r\n-  <!-- Dropdown panel -->\r\n-  <div \r\n-    x-show=\"open\" \r\n-    @click.away=\"open = false\" \r\n-    x-transition:enter=\"transition ease-out duration-200\" \r\n-    x-transition:enter-start=\"opacity-0 transform scale-95\" \r\n-    x-transition:enter-end=\"opacity-100 transform scale-100\" \r\n-    x-transition:leave=\"transition ease-in duration-150\" \r\n-    x-transition:leave-start=\"opacity-100 transform scale-100\" \r\n-    x-transition:leave-end=\"opacity-0 transform scale-95\"\r\n-    class=\"absolute mt-2 w-full bg-white rounded-xl shadow-lg border border-gray-100 z-50 overflow-hidden\">\r\n-    \r\n-    <div class=\"p-1 text-sm\">\r\n-      <template x-for=\"option in ['All','Support Staff','User']\" :key=\"option\">\r\n-        <div \r\n-          @click=\"selected = option; open = false; filterChats(option.toLowerCase().replace(' ', ''))\"\r\n-          class=\"px-3 py-2 rounded-lg hover:bg-[#4C956C]/10 cursor-pointer transition\">\r\n-          <span x-text=\"option\"></span>\r\n+        <div class=\"relative\">\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n         </div>\r\n-      </template>\r\n-    </div>\r\n-\r\n-  </div>\r\n-\r\n-</div>\r\n-\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n <div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n"
                },
                {
                    "date": 1764077925545,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,16 +44,34 @@\n           </svg>\r\n         </div>\r\n \r\n         <div class=\"relative\">\r\n-          <select \r\n-            id=\"chat-filter\" \r\n-            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n-            onchange=\"filterChats()\">\r\n-            <option value=\"all\">All</option>\r\n-            <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n-          </select>\r\n+<select \r\n+    id=\"chat-filter\" \r\n+    class=\"appearance-none w-full border border-gray-300 rounded-xl bg-white px-4 py-2 text-sm text-gray-700 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C] transition-all duration-200\"\r\n+    onchange=\"filterChats()\">\r\n+    <option value=\"all\">All</option>\r\n+    <option value=\"support\">Support Staff</option>\r\n+    <option value=\"user\">User</option>\r\n+</select>\r\n+\r\n+<!-- Optional: add a small arrow icon on the right -->\r\n+<div class=\"relative inline-block w-64\">\r\n+  <select \r\n+      id=\"chat-filter\" \r\n+      class=\"appearance-none w-full border border-gray-300 rounded-xl bg-white px-4 py-2 text-sm text-gray-700 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C] transition-all duration-200\"\r\n+      onchange=\"filterChats()\">\r\n+      <option value=\"all\">All</option>\r\n+      <option value=\"support\">Support Staff</option>\r\n+      <option value=\"user\">User</option>\r\n+  </select>\r\n+  <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400\">\r\n+      <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\">\r\n+          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19 9l-7 7-7-7\" />\r\n+      </svg>\r\n+  </div>\r\n+</div>\r\n+\r\n         </div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n"
                },
                {
                    "date": 1764077934374,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,34 +44,16 @@\n           </svg>\r\n         </div>\r\n \r\n         <div class=\"relative\">\r\n-<select \r\n-    id=\"chat-filter\" \r\n-    class=\"appearance-none w-full border border-gray-300 rounded-xl bg-white px-4 py-2 text-sm text-gray-700 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C] transition-all duration-200\"\r\n-    onchange=\"filterChats()\">\r\n-    <option value=\"all\">All</option>\r\n-    <option value=\"support\">Support Staff</option>\r\n-    <option value=\"user\">User</option>\r\n-</select>\r\n-\r\n-<!-- Optional: add a small arrow icon on the right -->\r\n-<div class=\"relative inline-block w-64\">\r\n-  <select \r\n-      id=\"chat-filter\" \r\n-      class=\"appearance-none w-full border border-gray-300 rounded-xl bg-white px-4 py-2 text-sm text-gray-700 shadow-sm hover:shadow-md focus:outline-none focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C] transition-all duration-200\"\r\n-      onchange=\"filterChats()\">\r\n-      <option value=\"all\">All</option>\r\n-      <option value=\"support\">Support Staff</option>\r\n-      <option value=\"user\">User</option>\r\n-  </select>\r\n-  <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400\">\r\n-      <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" viewBox=\"0 0 24 24\">\r\n-          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19 9l-7 7-7-7\" />\r\n-      </svg>\r\n-  </div>\r\n-</div>\r\n-\r\n+          <select \r\n+            id=\"chat-filter\" \r\n+            class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n+            onchange=\"filterChats()\">\r\n+            <option value=\"all\">All</option>\r\n+            <option value=\"support\">Support Staff</option>\r\n+            <option value=\"user\">User</option>\r\n+          </select>\r\n         </div>\r\n       </div>\r\n \r\n <!-- Chat User List -->\r\n"
                },
                {
                    "date": 1764078092936,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,9 @@\n             class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n             onchange=\"filterChats()\">\r\n             <option value=\"all\">All</option>\r\n             <option value=\"support\">Support Staff</option>\r\n-            <option value=\"user\">User</option>\r\n+            <option class=\"rounded-lg\" value=\"user\">User</option>\r\n           </select>\r\n         </div>\r\n       </div>\r\n \r\n"
                },
                {
                    "date": 1764078101855,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,9 @@\n             class=\"border border-gray-300 rounded-lg text-sm p-2 focus:ring-2 focus:ring-[#4C956C] focus:outline-none bg-white\"\r\n             onchange=\"filterChats()\">\r\n             <option value=\"all\">All</option>\r\n             <option value=\"support\">Support Staff</option>\r\n-            <option class=\"rounded-lg\" value=\"user\">User</option>\r\n+            <option value=\"user\">User</option>\r\n           </select>\r\n         </div>\r\n       </div>\r\n \r\n"
                }
            ],
            "date": 1764076690064,
            "name": "Commit-0",
            "content": "@extends('layouts.app')\r\n\r\n@section('content')\r\n\r\n<style>\r\n/* Scrollbar transparency and style */\r\n::-webkit-scrollbar {\r\n  height: 10px;\r\n  background: rgba(76, 149, 108, 0.5);\r\n}\r\nhtml, body, #chat-messages {\r\n  scroll-behavior: smooth;\r\n}\r\n.fade-in { animation: fadeIn 0.4s ease-in-out forwards; }\r\n@keyframes fadeIn { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: translateY(0);} }\r\n.chat-slide-in { animation: slideIn 0.35s ease-in-out forwards; }\r\n@keyframes slideIn { from { opacity: 0; transform: translateY(20px);} to { opacity: 1; transform: translateY(0);} }\r\n</style>\r\n\r\n<meta name=\"csrf-token\" content=\"{{ csrf_token() }}\">\r\n\r\n<div class=\"p-3\">\r\n  <div class=\"-mt-7 sd:h-screen h-full flex bg-white rounded-2xl border border-gray-200 relative\">\r\n\r\n    <!-- LEFT SIDEBAR -->\r\n    <div class=\"w-full md:w-1/4 border-r border-gray-200 flex flex-col rounded-2xl\">\r\n      <div class=\"h-[70px] p-5 border-b border-gray-300 flex flex-col justify-center\">\r\n        <h2 class=\"font-semibold text-lg text-gray-800 pl-2\">\r\n          {{ Auth::user()->role_id == 1 ? 'All Users' : 'Chats' }}\r\n        </h2>\r\n      </div>\r\n\r\n      <!-- Search + Filter -->\r\n      <div class=\"p-3 border-b border-gray-200 bg-gray-50 flex items-center gap-2\">\r\n        <div class=\"relative flex-1\">\r\n          <input \r\n            type=\"text\" \r\n            id=\"chat-search\" \r\n            placeholder=\"Search...\" \r\n            class=\"w-full p-2 pl-9 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#4C956C] focus:outline-none text-sm\" \r\n            onkeyup=\"filterChats()\">\r\n          <svg class=\"absolute left-2 top-2.5 w-4 h-4 text-gray-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-4.35-4.35m0 0A7.5 7.5 0 1010.5 18.5a7.5 7.5 0 006.15-3.85z\" />\r\n          </svg>\r\n        </div>\r\n\r\n        <div class=\"relative\">\r\n          <select\r\n            id=\"chat-filter\"\r\n            class=\"w-full bg-white border border-gray-200 rounded-xl px-4 py-2 text-sm shadow-sm\r\n                  focus:ring-2 focus:ring-[#4C956C] focus:border-[#4C956C] transition\"\r\n            onchange=\"filterChats()\"\r\n          >\r\n            <option value=\"all\">All</option>\r\n            <option value=\"support\">Support Staff</option>\r\n            <option value=\"user\">User</option>\r\n          </select>\r\n        </div>\r\n\r\n\r\n<!-- Chat User List -->\r\n<div id=\"chat-user-list\" class=\"w-full flex-1 overflow-y-auto p-4 max-h-[calc(100vh-120px)]\">\r\n    @php\r\n        use App\\Models\\Chat;\r\n        use App\\Models\\User;\r\n        use Illuminate\\Support\\Carbon;\r\n\r\n        $currentUser = auth()->user();\r\n\r\n        if ($currentUser->role_id == 3) {\r\n            //  Admin: show all users sorted by latest message\r\n            $users = User::where('id', '!=', $currentUser->id)->get();\r\n\r\n            $users = $users->map(function ($user) use ($currentUser) {\r\n                $chat = Chat::where(function ($q) use ($currentUser, $user) {\r\n                        $q->where('admin_id', $currentUser->id)\r\n                          ->where('support_staff_id', $user->id);\r\n                    })\r\n                    ->orWhere(function ($q) use ($currentUser, $user) {\r\n                        $q->where('admin_id', $user->id)\r\n                          ->where('support_staff_id', $currentUser->id);\r\n                    })\r\n                    ->first();\r\n\r\n                if ($chat) {\r\n                    $latestMessage = $chat->messages()->latest()->first();\r\n                    $user->latest_message_at = $latestMessage ? Carbon::parse($latestMessage->created_at) : null;\r\n                    $user->latest_message = $latestMessage?->message;\r\n                    $user->is_unread = $latestMessage && !$latestMessage->is_read && $latestMessage->user_id != auth()->id();\r\n                } else {\r\n                    $user->latest_message_at = null;\r\n                    $user->latest_message = null;\r\n                    $user->is_unread = false;\r\n                }\r\n\r\n                return $user;\r\n            });\r\n\r\n            $chats = $users->sortByDesc(function ($user) {\r\n                return $user->latest_message_at?->timestamp ?? -INF;\r\n            })->values();\r\n        } else {\r\n            //  Support staff or  Member\r\n            $chats = Chat::with([\r\n                'messages' => fn($q) => $q->latest()->limit(1),\r\n                'admin',\r\n                'supportStaff'\r\n            ])\r\n            ->when($currentUser->role_id == 2, fn($q) => $q->where('support_staff_id', $currentUser->id))\r\n            ->when($currentUser->role_id == 1, fn($q) => $q->where('member_id', $currentUser->id))\r\n            ->get()\r\n            ->sortByDesc(fn($chat) => optional($chat->messages->first())->created_at ?? now()->subYears(10))\r\n            ->values();\r\n        }\r\n    @endphp\r\n\r\n    @if(($chats ?? collect())->count())\r\n        @foreach($chats as $chat)\r\n            @php\r\n                if ($currentUser->role_id == 3) {\r\n                    // Admins view\r\n                    $otherUser = $chat;\r\n                    $messageText = $otherUser->latest_message ?: 'Click to chat';\r\n                    $isUnread = $otherUser->is_unread ?? false;\r\n                    $roleLabel = $otherUser->role_id == 2 ? 'support' : 'member';\r\n                } else {\r\n                    // Member or Support Staff view\r\n                    $otherUser = $currentUser->role_id == 2 ? $chat->admin : $chat->supportStaff;\r\n                    if (!$otherUser) continue;\r\n\r\n                    $latestMessage = $chat->messages->first();\r\n                    $messageText = $latestMessage?->message ?: 'Click to chat';\r\n                    $isUnread = $latestMessage && !$latestMessage->is_read && $latestMessage->user_id != auth()->id();\r\n                    $roleLabel = $otherUser->role_id == 2 ? 'support' : ($otherUser->role_id == 3 ? 'admin' : 'member');\r\n                }\r\n\r\n                $otherName = trim(($otherUser->first_name ?? '') . ' ' . ($otherUser->last_name ?? ''));\r\n                $displayId = $otherUser->id;\r\n            @endphp\r\n\r\n            <button \r\n                data-user-id=\"{{ $displayId }}\"\r\n                data-role=\"{{ $roleLabel }}\"\r\n                class=\"chat-user block w-full text-left px-8 py-6 flex items-center gap-5 hover:bg-gray-100 transition relative rounded-xl {{ $loop->first ? 'border-t' : '' }}\">\r\n                <div class=\"w-10 h-10 rounded-full bg-[#2C6E49] flex items-center justify-center text-white text-sm font-bold\">\r\n                    {{ strtoupper(substr($otherUser->first_name ?? 'U', 0, 1)) }}\r\n                </div>\r\n                <div class=\"flex-1 overflow-hidden\">\r\n                    <p class=\"text-sm font-medium truncate chat-user-name\">{{ $otherName ?: 'Unknown User' }}</p>\r\n                    <p id=\"message-status-{{ $displayId }}\" class=\"text-xs truncate {{ $isUnread ? 'text-red-500 font-semibold' : 'text-gray-500' }}\">\r\n                        {{ $isUnread ? 'New message' : $messageText }}\r\n                    </p>\r\n                </div>\r\n            </button>\r\n        @endforeach\r\n    @else\r\n        <div class=\"p-4 text-sm text-gray-500 text-center\">No chats available.</div>\r\n    @endif\r\n\r\n    {{--  Additional message for support staff --}}\r\n    @if($currentUser->role_id == 2)\r\n        <div class=\"text-center mt-6 text-gray-600 text-sm italic\">\r\n            You can only chat with the admin.\r\n        </div>\r\n    @endif\r\n</div>\r\n\r\n\r\n\r\n    </div>\r\n\r\n    <!-- RIGHT CHAT PANEL -->\r\n    <div id=\"chat-panel\" class=\"flex-1 flex flex-col h-[850px] w-[500px] bg-[#B2D6D3] bg-opacity-10 transition-all duration-300 ease-in-out\">\r\n      <div class=\"flex flex-col items-center justify-center h-full text-gray-400 text-center px-4 fade-in\">\r\n        <svg class=\"w-10 h-10 sm:w-14 sm:h-14 mb-3 text-[#4C956C]\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 10h8m-8 4h5m-9 4h14a2 2 0 002-2V6a2 2 0 00-2-2H4a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n        </svg>\r\n        <p class=\"text-sm sm:text-base md:text-lg font-medium\">\r\n          Select a chat to start the conversation.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<script>\r\nconst CURRENT_USER_ID = {!! json_encode(auth()->id()) !!};\r\nlet CHAT_ID = null;\r\nlet ACTIVE_USER_ID = null;\r\nlet lastMessageId = 0;\r\nlet pollingInterval = null;\r\n\r\n// --------------------\r\n// CHAT SELECTION\r\n// --------------------\r\ndocument.querySelectorAll('.chat-user').forEach(btn => {\r\n  btn.addEventListener('click', async () => {\r\n    const userId = parseInt(btn.getAttribute('data-user-id'));\r\n    ACTIVE_USER_ID = userId;\r\n\r\n    document.querySelectorAll('.chat-user').forEach(u => u.classList.remove('bg-[#E8F3EC]', 'font-semibold'));\r\n    btn.classList.add('bg-[#E8F3EC]', 'font-semibold');\r\n\r\n    try {\r\n      const res = await axios.get(`/chat/${userId}/load`);\r\n      const panel = document.getElementById('chat-panel');\r\n      panel.classList.remove('chat-slide-in');\r\n      panel.innerHTML = res.data.html;\r\n      void panel.offsetWidth;\r\n      panel.classList.add('chat-slide-in');\r\n\r\n      CHAT_ID = res.data.chat_id;\r\n      lastMessageId = res.data.last_message_id || 0;\r\n\r\n      await axios.post(`/chat/${CHAT_ID}/mark-as-read`);\r\n      updateChatStatus(userId, false);\r\n\r\n      setupChatEvents();\r\n      smoothScrollToBottom();\r\n\r\n      // reset polling\r\n      if (pollingInterval) clearInterval(pollingInterval);\r\n      pollingInterval = setInterval(pollMessages, 2000); // faster refresh\r\n    } catch (err) {\r\n      console.error('Chat load failed:', err);\r\n    }\r\n  });\r\n});\r\n\r\n// --------------------\r\n// POLLING\r\n// --------------------\r\nasync function pollMessages() {\r\n  if (!CHAT_ID) return;\r\n\r\n  try {\r\n    const res = await axios.get(`/chat/${CHAT_ID}/poll`, { params: { last_id: lastMessageId } });\r\n    const newMessages = res.data.messages || [];\r\n    if (newMessages.length > 0) {\r\n      newMessages.forEach(msg => appendMessage(msg));\r\n      lastMessageId = newMessages[newMessages.length - 1].id;\r\n      smoothScrollToBottom();\r\n      await axios.post(`/chat/${CHAT_ID}/mark-as-read`);\r\n    }\r\n  } catch (err) {\r\n    console.error('Polling failed:', err);\r\n  }\r\n}\r\n\r\n// --------------------\r\n// SCROLL\r\n// --------------------\r\nfunction smoothScrollToBottom() {\r\n  const container = document.getElementById('chat-messages');\r\n  if (container) container.scrollTo({ top: container.scrollHeight, behavior: 'smooth' });\r\n}\r\n\r\n// --------------------\r\n// APPEND MESSAGE\r\n// --------------------\r\nfunction appendMessage(message) {\r\n  const container = document.getElementById('chat-messages');\r\n  if (!container) return;\r\n\r\n  if (document.getElementById(`msg-${message.id}`)) return; // prevent duplicate\r\n\r\n  const wrapper = document.createElement('div');\r\n  wrapper.id = `msg-${message.id}`;\r\n  wrapper.classList.add(\"flex\", \"items-end\", \"gap-2\", \"mt-1\", \"fade-in\");\r\n  if (message.user_id === CURRENT_USER_ID) wrapper.classList.add(\"justify-end\");\r\n\r\n  let bubbleClass = 'bg-gray-200 text-gray-800 px-4 py-2 rounded-2xl';\r\n  if (message.is_auto_reply) {\r\n    bubbleClass = 'bg-transparent border border-[#4C956C] text-[#2C6E49] px-4 py-2 rounded-2xl italic';\r\n  } else if (message.user_id === CURRENT_USER_ID) {\r\n    bubbleClass = 'bg-[#4C956C] text-white px-4 py-2 rounded-2xl';\r\n  }\r\n\r\n  const senderInitial = message.user?.first_name \r\n    ? message.user.first_name.charAt(0).toUpperCase() \r\n    : 'U';\r\n\r\n  wrapper.innerHTML = `\r\n    ${message.user_id !== CURRENT_USER_ID ? `<div class=\"w-8 h-8 rounded-full bg-[#2C6E49] flex items-center justify-center text-white text-xs font-bold\">${senderInitial}</div>` : ''}\r\n    <div class=\"${bubbleClass} text-sm md:text-md max-w-[50%] break-words\">${message.message}</div>\r\n    ${message.user_id === CURRENT_USER_ID ? `<div class=\"w-8 h-8 rounded-full bg-[#2C6E49] flex items-center justify-center text-white text-xs font-bold\">${senderInitial}</div>` : ''}\r\n  `;\r\n  container.appendChild(wrapper);\r\n}\r\n\r\n// --------------------\r\n// SEND MESSAGE\r\n// --------------------\r\nasync function sendMessage() {\r\n  if (!CHAT_ID) return alert('Select a chat first.');\r\n  const input = document.getElementById('chat-input');\r\n  const msg = input.value.trim();\r\n  if (!msg) return;\r\n  const btn = document.getElementById('send-btn');\r\n  btn.disabled = true;\r\n\r\n  try {\r\n    const res = await axios.post(`/chat/${CHAT_ID}/message`, { message: msg });\r\n    const sentMsg = res.data;\r\n\r\n    appendMessage(sentMsg);\r\n    input.value = '';\r\n    lastMessageId = sentMsg.id;\r\n\r\n    moveChatToTop(ACTIVE_USER_ID);\r\n\r\n    //  Immediately check for new incoming replies\r\n    setTimeout(pollMessages, 500);\r\n\r\n  } catch (err) {\r\n    console.error('Send message failed:', err);\r\n  } finally {\r\n    btn.disabled = false;\r\n  }\r\n}\r\n\r\n// --------------------\r\n// QUICK REPLY\r\n// --------------------\r\nasync function sendQuickReply(button) {\r\n  if (!CHAT_ID) return alert('Select a chat first.');\r\n  const question = button.getAttribute('data-question');\r\n  const answer = button.getAttribute('data-answer');\r\n\r\n  try {\r\n    // Send user's quick message (normal chat bubble)\r\n    const resUser = await axios.post(`/chat/${CHAT_ID}/message`, { message: question });\r\n    appendMessage(resUser.data);\r\n\r\n    // Auto reply with styled design (distinct bubble)\r\n    const styledReply = `\r\n      <div style=\"\r\n        background: #e9f7ef;\r\n        border-left: 4px solid #2C6E49;\r\n        padding: 10px 10px;\r\n        border-radius: 10px;\r\n        margin-top: 6px;\r\n        box-shadow: 0 2px 6px rgba(0,0,0,0.1);\r\n        display: inline-block;\r\n        max-width: 100%;\r\n        color: #2C6E49;\r\n        font-style: italic;\r\n        font-size: 0.9rem;\r\n      \">\r\n        <strong style=\"color:#1e4620; font-style: normal;\">Auto Reply:</strong> ${answer}\r\n      </div>\r\n    `;\r\n\r\n    const resBot = await axios.post(`/chat/${CHAT_ID}/message`, {\r\n      message: styledReply,\r\n      is_auto_reply: true\r\n    });\r\n\r\n    appendMessage(resBot.data);\r\n\r\n    lastMessageId = resBot.data.id;\r\n    setTimeout(pollMessages, 500); // sync again after quick reply\r\n  } catch (err) {\r\n    console.error('Quick reply failed:', err);\r\n  }\r\n}\r\n\r\n\r\n// --------------------\r\n// EVENT SETUP\r\n// --------------------\r\nfunction setupChatEvents() {\r\n  const input = document.getElementById('chat-input');\r\n  const btn = document.getElementById('send-btn');\r\n  if (!input || !btn) return;\r\n  btn.onclick = sendMessage;\r\n  input.onkeydown = e => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n}\r\n\r\n// --------------------\r\n// UNREAD HANDLING\r\n// --------------------\r\nasync function updateUnreadIndicators() {\r\n  try {\r\n    const res = await axios.get('/chat/unread-check');\r\n    Object.entries(res.data).forEach(([id, hasUnread]) => updateChatStatus(id, hasUnread));\r\n  } catch (err) {\r\n    console.error('Unread update failed:', err);\r\n  }\r\n}\r\n\r\nfunction updateChatStatus(id, hasUnread) {\r\n  const statusText = document.getElementById(`message-status-${id}`);\r\n  if (!statusText) return;\r\n  if (parseInt(id) === ACTIVE_USER_ID) return;\r\n\r\n  if (hasUnread) {\r\n    statusText.textContent = \"New message\";\r\n    statusText.classList.add('text-red-500', 'font-semibold');\r\n    statusText.classList.remove('text-gray-500');\r\n    moveChatToTop(id);\r\n  } else {\r\n    statusText.textContent = \"Click to chat\";\r\n    statusText.classList.remove('text-red-500', 'font-semibold');\r\n    statusText.classList.add('text-gray-500');\r\n  }\r\n}\r\n\r\nfunction moveChatToTop(userId) {\r\n  const chatBtn = document.querySelector(`.chat-user[data-user-id=\"${userId}\"]`);\r\n  if (chatBtn && chatBtn.parentNode) chatBtn.parentNode.prepend(chatBtn);\r\n}\r\n\r\nfunction filterChats() {\r\n  const searchInput = document.getElementById('chat-search').value.toLowerCase();\r\n  const filterValue = document.getElementById('chat-filter').value;\r\n  const chatUsers = document.querySelectorAll('#chat-user-list .chat-user');\r\n\r\n  chatUsers.forEach(user => {\r\n    const name = user.querySelector('.chat-user-name').textContent.toLowerCase();\r\n    const userRole = user.getAttribute('data-role') || '';\r\n    const matchesSearch = name.includes(searchInput);\r\n    const matchesFilter =\r\n      filterValue === 'all' ||\r\n      (filterValue === 'support' && userRole === 'support') ||\r\n      (filterValue === 'user' && (userRole === 'member' || userRole === 'admin')); //  Fix here\r\n\r\n    user.style.display = matchesSearch && matchesFilter ? 'flex' : 'none';\r\n  });\r\n}\r\n\r\n\r\n// --------------------\r\n// INITIALIZE\r\n// --------------------\r\nupdateUnreadIndicators();\r\nsetInterval(updateUnreadIndicators, 3000);\r\n</script>\r\n\r\n\r\n@endsection\r\n"
        }
    ]
}