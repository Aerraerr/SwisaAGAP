{
    "sourceFile": "app/Http/Controllers/Web/FaqsController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1764961975938,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764962560220,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,12 +80,5 @@\n \n         return redirect()->back()->with('success', 'FAQ deleted successfully.');\n     }\n \n-    public function getFaqsJson()\n-{\n-    $faqs = Faq::all()->groupBy('target_audience'); \n-    return response()->json($faqs);\n }\n-\n-\n-}\n"
                },
                {
                    "date": 1764962568462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,96 @@\n+<?php\n+\n+namespace App\\Http\\Controllers\\Web;\n+\n+use App\\Http\\Controllers\\Controller;\n+use Illuminate\\Http\\Request;\n+use App\\Models\\Faq; // ✅ Import the Faq model\n+\n+class FaqsController extends Controller\n+{\n+    /**\n+     * Display all FAQs grouped by audience.\n+     */\n+    public function index()\n+    {\n+        $userFaqs = Faq::where('target_audience', 'user')->get();\n+        $adminFaqs = Faq::where('target_audience', 'admin')->get();\n+        $supportFaqs = Faq::where('target_audience', 'support-staff')->get();\n+\n+        return view('swisa-admin.faqs', compact('userFaqs', 'adminFaqs', 'supportFaqs'));\n+    }\n+\n+    /**\n+     * Show create FAQ form (Admin only).\n+     */\n+    public function create()\n+    {\n+        return view('faqs.create');\n+    }\n+\n+    /**\n+     * Store new FAQ in DB.\n+     */\n+    public function store(Request $request)\n+    {\n+        $request->validate([\n+            'question' => 'required|string|max:255',\n+            'answer' => 'required|string',\n+            'target_audience' => 'required|in:user,admin,support-staff', // fixed 'support-support'\n+            'type' => 'required|string',\n+        ]);\n+\n+        Faq::create($request->all());\n+\n+        return redirect()->route('faqs.index')->with('success', 'FAQ created successfully.');\n+\n+    }\n+\n+    /**\n+     * Show edit FAQ form.\n+     */\n+    public function edit(Faq $faq)\n+    {\n+        return view('faqs.edit', compact('faq'));\n+    }\n+\n+    /**\n+     * Update FAQ in DB.\n+     */\n+    public function update(Request $request, Faq $faq)\n+    {\n+        $request->validate([\n+            'question' => 'required|string|max:255',\n+            'answer'   => 'required|string',\n+            'target_audience' => 'required|in:user,admin,support-staff',\n+        ]);\n+\n+        $faq->update($request->all());\n+\n+        return redirect()->route('faqs.index')->with('success', 'FAQ updated successfully.');\n+    }\n+\n+    /**\n+     * Delete FAQ.\n+     */\n+    public function destroy($id)\n+    {\n+        $faq = Faq::findOrFail($id);\n+        $faq->delete();\n+\n+        return redirect()->back()->with('success', 'FAQ deleted successfully.');\n+    }\n+\n+\n+\n+    \n+public function downloadPageFaqs()\n+{\n+    // Only load FAQs meant for general users\n+    $userFaqs = Faq::where('target_audience', 'user')->get();\n+\n+    return view('app-download.download-page', compact('userFaqs'));\n+}\n+\n+\n+}\n"
                }
            ],
            "date": 1764961975938,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers\\Web;\n\nuse App\\Http\\Controllers\\Controller;\nuse Illuminate\\Http\\Request;\nuse App\\Models\\Faq; // ✅ Import the Faq model\n\nclass FaqsController extends Controller\n{\n    /**\n     * Display all FAQs grouped by audience.\n     */\n    public function index()\n    {\n        $userFaqs = Faq::where('target_audience', 'user')->get();\n        $adminFaqs = Faq::where('target_audience', 'admin')->get();\n        $supportFaqs = Faq::where('target_audience', 'support-staff')->get();\n\n        return view('swisa-admin.faqs', compact('userFaqs', 'adminFaqs', 'supportFaqs'));\n    }\n\n    /**\n     * Show create FAQ form (Admin only).\n     */\n    public function create()\n    {\n        return view('faqs.create');\n    }\n\n    /**\n     * Store new FAQ in DB.\n     */\n    public function store(Request $request)\n    {\n        $request->validate([\n            'question' => 'required|string|max:255',\n            'answer' => 'required|string',\n            'target_audience' => 'required|in:user,admin,support-staff', // fixed 'support-support'\n            'type' => 'required|string',\n        ]);\n\n        Faq::create($request->all());\n\n        return redirect()->route('faqs.index')->with('success', 'FAQ created successfully.');\n\n    }\n\n    /**\n     * Show edit FAQ form.\n     */\n    public function edit(Faq $faq)\n    {\n        return view('faqs.edit', compact('faq'));\n    }\n\n    /**\n     * Update FAQ in DB.\n     */\n    public function update(Request $request, Faq $faq)\n    {\n        $request->validate([\n            'question' => 'required|string|max:255',\n            'answer'   => 'required|string',\n            'target_audience' => 'required|in:user,admin,support-staff',\n        ]);\n\n        $faq->update($request->all());\n\n        return redirect()->route('faqs.index')->with('success', 'FAQ updated successfully.');\n    }\n\n    /**\n     * Delete FAQ.\n     */\n    public function destroy($id)\n    {\n        $faq = Faq::findOrFail($id);\n        $faq->delete();\n\n        return redirect()->back()->with('success', 'FAQ deleted successfully.');\n    }\n\n}\n"
        }
    ]
}