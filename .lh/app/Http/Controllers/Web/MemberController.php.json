{
    "sourceFile": "app/Http/Controllers/Web/MemberController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1764941298351,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764941312131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,10 +5,8 @@\n use App\\Http\\Controllers\\Controller;\n use App\\Models\\User;\n use Illuminate\\Http\\Request;\n \n-use App\\Models\\Sector;\n-\n class MemberController extends Controller\n {\n     //pass the 'members' variable to the members page for data display\n     public function displayMember(){\n"
                },
                {
                    "date": 1764944499272,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,7 +39,14 @@\n \n     public function viewProfile($id){\n         $member = User::with('documents', 'user_info.sector', 'applications.grant')->findOrFail($id);\n \n+         // Programs joined (count all participant rows)\n+    $programsJoined = $member->participants->count();\n+\n+    // Completion = participants where qr_scanned = 1 OR check_in_at is not null\n+    $completion = $member->participants->whereNotNull('check_in_at')->count();\n+\n+\n         return view('swisa-admin.view-profile', compact('member'));\n     }\n }\n"
                },
                {
                    "date": 1764944520254,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,52 @@\n+<?php\n+\n+namespace App\\Http\\Controllers\\Web;\n+\n+use App\\Http\\Controllers\\Controller;\n+use App\\Models\\User;\n+use Illuminate\\Http\\Request;\n+\n+class MemberController extends Controller\n+{\n+    //pass the 'members' variable to the members page for data display\n+    public function displayMember(){\n+        //get only the user who are members and approved membership\n+       $members = User::with(['documents', 'user_info',\n+            'applications' => function ($q) {\n+                $q->where('application_type', 'membership')\n+                ->where('status_id', 33);\n+            },\n+            'applications.grant'])->where('role_id', 1)->whereHas('applications', function ($q) {\n+                $q->where('application_type', 'membership')\n+                ->where('status_id', 4);\n+            })->get();\n+\n+        // Count all members\n+        $totalMembers = $members->count();\n+\n+        //this month member count\n+        $monthlyMembers = $members->filter(function ($member) {\n+            return $member->created_at->isSameMonth(now());\n+        })->count();\n+\n+        //new members today\n+        $todayMembers = $members->filter(function ($member) {\n+            return $member->created_at->isToday();\n+        })->count();\n+\n+        return view('swisa-admin.members', compact('members', 'totalMembers', 'monthlyMembers', 'todayMembers' ));\n+    }\n+\n+    public function viewProfile($id){\n+        $member = User::with('documents', 'user_info.sector', 'applications.grant')->findOrFail($id);\n+\n+         // Programs joined (count all participant rows)\n+    $programsJoined = $member->participants->count();\n+\n+    // Completion = participants where qr_scanned = 1 OR check_in_at is not null\n+    $completion = $member->participants->whereNotNull('check_in_at')->count();\n+\n+\n+        return view('swisa-admin.view-profile', compact('member','programsJoined', 'completion'));\n+    }\n+}\n"
                },
                {
                    "date": 1764959689959,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,49 @@\n+<?php\n+\n+namespace App\\Http\\Controllers\\Web;\n+\n+use App\\Http\\Controllers\\Controller;\n+use App\\Models\\User;\n+use Illuminate\\Http\\Request;\n+\n+class MemberController extends Controller\n+{\n+    //pass the 'members' variable to the members page for data display\n+    public function displayMember(){\n+        //get only the user who are members and approved membership\n+       $members = User::with(['documents', 'user_info',\n+            'applications' => function ($q) {\n+                $q->where('application_type', 'membership')\n+                ->where('status_id', 33);\n+            },\n+            'applications.grant'])->where('role_id', 1)->whereHas('applications', function ($q) {\n+                $q->where('application_type', 'membership')\n+                ->where('status_id', 4);\n+            })->get();\n+\n+        // Count all members\n+        $totalMembers = $members->count();\n+\n+        //this month member count\n+        $monthlyMembers = $members->filter(function ($member) {\n+            return $member->created_at->isSameMonth(now());\n+        })->count();\n+\n+        //new members today\n+        $todayMembers = $members->filter(function ($member) {\n+            return $member->created_at->isToday();\n+        })->count();\n+\n+        return view('swisa-admin.members', compact('members', 'totalMembers', 'monthlyMembers', 'todayMembers' ));\n+    }\n+\n+    public function viewProfile($id){\n+        $member = User::with('documents', 'user_info.sector', 'applications.grant')->findOrFail($id);\n+\n+        $programsJoined = $member->participants->count();\n+        $completion = $member->participants->whereNotNull('check_in_at')->count();\n+\n+\n+            return view('swisa-admin.view-profile', compact('member','programsJoined', 'completion'));\n+    }\n+}\n"
                },
                {
                    "date": 1764959742046,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,67 @@\n+<?php\n+\n+namespace App\\Http\\Controllers\\Web;\n+\n+use App\\Http\\Controllers\\Controller;\n+use App\\Models\\User;\n+use Illuminate\\Http\\Request;\n+\n+class MemberController extends Controller\n+{\n+    //pass the 'members' variable to the members page for data display\n+    public function displayMember(){\n+        //get only the user who are members and approved membership\n+       $members = User::with(['documents', 'user_info',\n+            'applications' => function ($q) {\n+                $q->where('application_type', 'membership')\n+                ->where('status_id', 33);\n+            },\n+            'applications.grant'])->where('role_id', 1)->whereHas('applications', function ($q) {\n+                $q->where('application_type', 'membership')\n+                ->where('status_id', 4);\n+            })->get();\n+\n+        // Count all members\n+        $totalMembers = $members->count();\n+\n+        //this month member count\n+        $monthlyMembers = $members->filter(function ($member) {\n+            return $member->created_at->isSameMonth(now());\n+        })->count();\n+\n+        //new members today\n+        $todayMembers = $members->filter(function ($member) {\n+            return $member->created_at->isToday();\n+        })->count();\n+\n+        return view('swisa-admin.members', compact('members', 'totalMembers', 'monthlyMembers', 'todayMembers' ));\n+    }\n+\n+public function viewProfile($id)\n+{\n+    $member = User::with([\n+        'documents',\n+        'user_info.sector',\n+        'applications.grant',\n+        'activityHistory' // <-- NEW\n+    ])->findOrFail($id);\n+\n+    // Group by date for the view\n+    $activityLogs = $member->activityHistory\n+        ->sortByDesc('created_at')\n+        ->groupBy(function ($log) {\n+            return $log->created_at->format('F d, Y');\n+        });\n+\n+    $programsJoined = $member->participants->count();\n+    $completion = $member->participants->whereNotNull('check_in_at')->count();\n+\n+    return view('swisa-admin.view-profile', compact(\n+        'member',\n+        'activityLogs',\n+        'programsJoined',\n+        'completion'\n+    ));\n+}\n+\n+}\n"
                },
                {
                    "date": 1764960402580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,185 +36,26 @@\n \n         return view('swisa-admin.members', compact('members', 'totalMembers', 'monthlyMembers', 'todayMembers' ));\n     }\n \n-public function viewProfile($id)\n-{\n-    $member = User::with([\n-        'documents',\n-        'user_info.sector',\n-        'applications.grant',\n-        'activityHistory' // <-- NEW\n-    ])->findOrFail($id);\n+    public function viewProfile($id)\n+    {\n+        $member = User::with([\n+            'documents',\n+            'user_info.sector',\n+            'applications.grant',\n+            'activityHistory'\n+        ])->findOrFail($id);\n \n-    // Group by date for the view\n-    $activityLogs = $member->activityHistory\n-        ->sortByDesc('created_at')\n-        ->groupBy(function ($log) {\n-            return $log->created_at->format('F d, Y');\n-        });\n+        $activityLogs = $member->activityHistory\n+            ->sortByDesc('created_at')\n+            ->groupBy(function ($log) {\n+                return $log->created_at->format('F d, Y');\n+            });\n \n-    $programsJoined = $member->participants->count();\n-    $completion = $member->participants->whereNotNull('check_in_at')->count();\n-\n-    return view('swisa-admin.view-profile', compact(\n-        'member',\n-        'activityLogs',\n-        'programsJoined',\n-        'completion'\n-    ));\n-}\n-\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers\\Web;\n-\n-use App\\Http\\Controllers\\Controller;\n-use App\\Models\\User;\n-use Illuminate\\Http\\Request;\n-\n-class MemberController extends Controller\n-{\n-    //pass the 'members' variable to the members page for data display\n-    public function displayMember(){\n-        //get only the user who are members and approved membership\n-       $members = User::with(['documents', 'user_info',\n-            'applications' => function ($q) {\n-                $q->where('application_type', 'membership')\n-                ->where('status_id', 33);\n-            },\n-            'applications.grant'])->where('role_id', 1)->whereHas('applications', function ($q) {\n-                $q->where('application_type', 'membership')\n-                ->where('status_id', 4);\n-            })->get();\n-\n-        // Count all members\n-        $totalMembers = $members->count();\n-\n-        //this month member count\n-        $monthlyMembers = $members->filter(function ($member) {\n-            return $member->created_at->isSameMonth(now());\n-        })->count();\n-\n-        //new members today\n-        $todayMembers = $members->filter(function ($member) {\n-            return $member->created_at->isToday();\n-        })->count();\n-\n-        return view('swisa-admin.members', compact('members', 'totalMembers', 'monthlyMembers', 'todayMembers' ));\n-    }\n-\n-    public function viewProfile($id){\n-        $member = User::with('documents', 'user_info.sector', 'applications.grant')->findOrFail($id);\n-\n         $programsJoined = $member->participants->count();\n         $completion = $member->participants->whereNotNull('check_in_at')->count();\n \n-\n-            return view('swisa-admin.view-profile', compact('member','programsJoined', 'completion'));\n+        return view('swisa-admin.view-profile', compact('member','activityLogs','programsJoined','completion'));\n     }\n-}\n-<?php\n \n-namespace App\\Http\\Controllers\\Web;\n-\n-use App\\Http\\Controllers\\Controller;\n-use App\\Models\\User;\n-use Illuminate\\Http\\Request;\n-\n-class MemberController extends Controller\n-{\n-    //pass the 'members' variable to the members page for data display\n-    public function displayMember(){\n-        //get only the user who are members and approved membership\n-       $members = User::with(['documents', 'user_info',\n-            'applications' => function ($q) {\n-                $q->where('application_type', 'membership')\n-                ->where('status_id', 33);\n-            },\n-            'applications.grant'])->where('role_id', 1)->whereHas('applications', function ($q) {\n-                $q->where('application_type', 'membership')\n-                ->where('status_id', 4);\n-            })->get();\n-\n-        // Count all members\n-        $totalMembers = $members->count();\n-\n-        //this month member count\n-        $monthlyMembers = $members->filter(function ($member) {\n-            return $member->created_at->isSameMonth(now());\n-        })->count();\n-\n-        //new members today\n-        $todayMembers = $members->filter(function ($member) {\n-            return $member->created_at->isToday();\n-        })->count();\n-\n-        return view('swisa-admin.members', compact('members', 'totalMembers', 'monthlyMembers', 'todayMembers' ));\n-    }\n-\n-    public function viewProfile($id){\n-        $member = User::with('documents', 'user_info.sector', 'applications.grant')->findOrFail($id);\n-\n-         // Programs joined (count all participant rows)\n-    $programsJoined = $member->participants->count();\n-\n-    // Completion = participants where qr_scanned = 1 OR check_in_at is not null\n-    $completion = $member->participants->whereNotNull('check_in_at')->count();\n-\n-\n-        return view('swisa-admin.view-profile', compact('member','programsJoined', 'completion'));\n-    }\n }\n-<?php\n-\n-namespace App\\Http\\Controllers\\Web;\n-\n-use App\\Http\\Controllers\\Controller;\n-use App\\Models\\User;\n-use Illuminate\\Http\\Request;\n-\n-class MemberController extends Controller\n-{\n-    //pass the 'members' variable to the members page for data display\n-    public function displayMember(){\n-        //get only the user who are members and approved membership\n-       $members = User::with(['documents', 'user_info',\n-            'applications' => function ($q) {\n-                $q->where('application_type', 'membership')\n-                ->where('status_id', 33);\n-            },\n-            'applications.grant'])->where('role_id', 1)->whereHas('applications', function ($q) {\n-                $q->where('application_type', 'membership')\n-                ->where('status_id', 4);\n-            })->get();\n-\n-        // Count all members\n-        $totalMembers = $members->count();\n-\n-        //this month member count\n-        $monthlyMembers = $members->filter(function ($member) {\n-            return $member->created_at->isSameMonth(now());\n-        })->count();\n-\n-        //new members today\n-        $todayMembers = $members->filter(function ($member) {\n-            return $member->created_at->isToday();\n-        })->count();\n-\n-        return view('swisa-admin.members', compact('members', 'totalMembers', 'monthlyMembers', 'todayMembers' ));\n-    }\n-\n-    public function viewProfile($id){\n-        $member = User::with('documents', 'user_info.sector', 'applications.grant')->findOrFail($id);\n-\n-         // Programs joined (count all participant rows)\n-    $programsJoined = $member->participants->count();\n-\n-    // Completion = participants where qr_scanned = 1 OR check_in_at is not null\n-    $completion = $member->participants->whereNotNull('check_in_at')->count();\n-\n-\n-        return view('swisa-admin.view-profile', compact('member'));\n-    }\n-}\n"
                }
            ],
            "date": 1764941298351,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers\\Web;\n\nuse App\\Http\\Controllers\\Controller;\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\n\nuse App\\Models\\Sector;\n\nclass MemberController extends Controller\n{\n    //pass the 'members' variable to the members page for data display\n    public function displayMember(){\n        //get only the user who are members and approved membership\n       $members = User::with(['documents', 'user_info',\n            'applications' => function ($q) {\n                $q->where('application_type', 'membership')\n                ->where('status_id', 33);\n            },\n            'applications.grant'])->where('role_id', 1)->whereHas('applications', function ($q) {\n                $q->where('application_type', 'membership')\n                ->where('status_id', 4);\n            })->get();\n\n        // Count all members\n        $totalMembers = $members->count();\n\n        //this month member count\n        $monthlyMembers = $members->filter(function ($member) {\n            return $member->created_at->isSameMonth(now());\n        })->count();\n\n        //new members today\n        $todayMembers = $members->filter(function ($member) {\n            return $member->created_at->isToday();\n        })->count();\n\n        return view('swisa-admin.members', compact('members', 'totalMembers', 'monthlyMembers', 'todayMembers' ));\n    }\n\n    public function viewProfile($id){\n        $member = User::with('documents', 'user_info.sector', 'applications.grant')->findOrFail($id);\n\n        return view('swisa-admin.view-profile', compact('member'));\n    }\n}\n"
        }
    ]
}