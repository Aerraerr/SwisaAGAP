{
    "sourceFile": "app/Http/Controllers/Web/TrainingController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 34,
            "patches": [
                {
                    "date": 1763809092837,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763815130934,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,19 +65,16 @@\n \n         return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-    //function to show specific data viewed in training\n-//function to show specific data viewed in training\n-    public function viewTrainingDetails($id){\n-        $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n-        $isFinished = now()->greaterThan($training->date);\n-        $sectors = Sector::all();      \n-        $participants = Participant::all();\n+public function viewTrainingDetails($id){\n+    $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n+    $isFinished = now()->greaterThan($training->date);\n \n-        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n-    }\n+    return view('swisa-admin.view-training', compact('training', 'isFinished'));\n+}\n \n+\n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n         // validate the form data/input\n"
                },
                {
                    "date": 1763815448976,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,16 +65,19 @@\n \n         return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-public function viewTrainingDetails($id){\n-    $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n-    $isFinished = now()->greaterThan($training->date);\n+    //function to show specific data viewed in training\n+//function to show specific data viewed in training\n+    public function viewTrainingDetails($id){\n+        $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n+        $isFinished = now()->greaterThan($training->date);\n+        $sectors = Sector::all();      \n+        $participants = Participant::all();\n \n-    return view('swisa-admin.view-training', compact('training', 'isFinished'));\n-}\n+        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n+    }\n \n-\n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n         // validate the form data/input\n"
                },
                {
                    "date": 1763815524963,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,9 +65,8 @@\n \n         return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-    //function to show specific data viewed in training\n //function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n         $isFinished = now()->greaterThan($training->date);\n"
                },
                {
                    "date": 1763815784486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,18 +65,22 @@\n \n         return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-//function to show specific data viewed in training\n-    public function viewTrainingDetails($id){\n-        $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n-        $isFinished = now()->greaterThan($training->date);\n-        $sectors = Sector::all();      \n-        $participants = Participant::all();\n+public function viewTrainingDetails($id){\n+    $training = Training::with([\n+        'sector', \n+        'documents', \n+        'participants.user_info.sector' // eager load nested relationships\n+    ])->findOrFail($id);\n \n-        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n-    }\n+    $isFinished = now()->greaterThan($training->date);\n+    $sectors = Sector::all();      \n \n+    return view('swisa-admin.view-training', compact('training', 'sectors', 'isFinished'));\n+}\n+\n+\n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n         // validate the form data/input\n"
                },
                {
                    "date": 1763815795024,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,22 +65,18 @@\n \n         return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-public function viewTrainingDetails($id){\n-    $training = Training::with([\n-        'sector', \n-        'documents', \n-        'participants.user_info.sector' // eager load nested relationships\n-    ])->findOrFail($id);\n+//function to show specific data viewed in training\n+    public function viewTrainingDetails($id){\n+        $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n+        $isFinished = now()->greaterThan($training->date);\n+        $sectors = Sector::all();      \n+        $participants = Participant::all();\n \n-    $isFinished = now()->greaterThan($training->date);\n-    $sectors = Sector::all();      \n+        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n+    }\n \n-    return view('swisa-admin.view-training', compact('training', 'sectors', 'isFinished'));\n-}\n-\n-\n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n         // validate the form data/input\n"
                },
                {
                    "date": 1763815968969,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,18 +65,22 @@\n \n         return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-//function to show specific data viewed in training\n-    public function viewTrainingDetails($id){\n-        $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n-        $isFinished = now()->greaterThan($training->date);\n-        $sectors = Sector::all();      \n-        $participants = Participant::all();\n+public function viewTrainingDetails($id){\n+    $training = Training::with([\n+        'sector', \n+        'documents', \n+        'participants.userInfo.sector' // eager load nested relationship\n+    ])->findOrFail($id);\n \n-        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n-    }\n+    $isFinished = now()->greaterThan($training->date);\n+    $sectors = Sector::all();\n \n+    return view('swisa-admin.view-training', compact('training', 'sectors', 'isFinished'));\n+}\n+\n+\n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n         // validate the form data/input\n"
                },
                {
                    "date": 1763816043807,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,22 +65,18 @@\n \n         return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-public function viewTrainingDetails($id){\n-    $training = Training::with([\n-        'sector', \n-        'documents', \n-        'participants.userInfo.sector' // eager load nested relationship\n-    ])->findOrFail($id);\n+    //function to show specific data viewed in training\n+    public function viewTrainingDetails($id){\n+        $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n \n-    $isFinished = now()->greaterThan($training->date);\n-    $sectors = Sector::all();\n+        $sectors = Sector::all();      \n+        $participants = Participant::all();\n \n-    return view('swisa-admin.view-training', compact('training', 'sectors', 'isFinished'));\n-}\n+        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants'));\n+    }\n \n-\n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n         // validate the form data/input\n"
                },
                {
                    "date": 1763816098212,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,16 +65,16 @@\n \n         return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-    //function to show specific data viewed in training\n+//function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n-\n+        $isFinished = now()->greaterThan($training->date);\n         $sectors = Sector::all();      \n         $participants = Participant::all();\n \n-        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants'));\n+        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n     }\n \n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n"
                },
                {
                    "date": 1763816387361,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,8 +7,11 @@\n use App\\Models\\Sector;\n use App\\Models\\Training;\n use App\\Models\\User;\n use Illuminate\\Http\\Request;\n+use Illuminate\\Support\\Facades\\Log;\n+use Illuminate\\Support\\Facades\\Auth;\n+use App\\Services\\SMSService;\n \n class TrainingController extends Controller\n {\n     //show member with documents (if any)\n@@ -31,43 +34,62 @@\n     }\n \n     //add event function\n     public function addTraining(Request $request){\n-        // validate the form data/input\n-        $request->validate([\n-            'event_name' => 'required|string|max:255',\n-            'sector' => 'required|exists:sectors,id',\n-            'description' => 'nullable|string',\n-            'venue' => 'required|string|max:255',\n-            'date' => 'required|date',\n-            'time' => 'required|date_format:H:i',\n-        ]);\n+        try{\n+            // validate the form data/input\n+            $request->validate([\n+                'event_name' => 'required|string|max:255',\n+                'sector' => 'required|exists:sectors,id',\n+                'description' => 'nullable|string',\n+                'venue' => 'required|string|max:255',\n+                'date' => 'required|date',\n+                'time' => 'required|date_format:H:i',\n+                'event_image' => 'nullable|image|mimes:jpeg,png,jpg|max:5760',\n+            ]);\n \n-        //store to table 'training'\n-        $event = Training::create([\n-            'title' => $request->event_name,\n-            'sector_id' => $request->sector,\n-            'description'   => $request->description,\n-            'venue' => $request->venue,\n-            'date' => $request->date,\n-            'time' => $request->time,\n-        ]);\n+            //store to table 'training'\n+            $event = Training::create([\n+                'title' => $request->event_name,\n+                'sector_id' => $request->sector,\n+                'description'   => $request->description,\n+                'venue' => $request->venue,\n+                'date' => $request->date,\n+                'time' => $request->time,\n+            ]);\n \n-        //handle the file upload\n-        if ($request->hasFile('event_image')) {\n-            $file = $request->file('event_image');\n-            $path = $file->store('events', 'public'); // saves in storage/app/public/events\n+            //handle the file upload\n+            if ($request->hasFile('event_image')) {\n+                $file = $request->file('event_image');\n+                $path = $file->store('events', 'public'); // saves in storage/app/public/events\n \n-            $event->documents()->create([\n-                'file_path'  => $path,\n-                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-            ]);\n+                $event->documents()->create([\n+                    'file_path'  => $path,\n+                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+                ]);\n+            }\n+\n+            //send sms test\n+            $user = Auth::user();\n+\n+            if ($user && $user->phone_number) {\n+\n+                //dd('SMS code reached', $user->phone_number);\n+                \n+                $number = $user->phone_number;\n+                $message = 'Test SMS: A new event was published!';\n+\n+                SMSService::send($number, $message);\n+            }\n+\n+            return redirect()->back()->with('success', 'Initiative/Event Added!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Creation Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n         }\n-\n-        return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-//function to show specific data viewed in training\n+    //function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n         $isFinished = now()->greaterThan($training->date);\n         $sectors = Sector::all();      \n@@ -78,57 +100,67 @@\n \n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n-        // validate the form data/input\n-        $request->validate([\n-            'event_name' => 'required|string|max:255',\n-            'sector' => 'required|exists:sectors,id',\n-            'description' => 'nullable|string',\n-            'venue' => 'required|string|max:255',\n-            'date' => 'required|date',\n-            'time' => 'required|date_format:H:i',\n-        ]);\n+        try{\n+            // validate the form data/input\n+            $request->validate([\n+                'event_name' => 'required|string|max:255',\n+                'sector' => 'required|exists:sectors,id',\n+                'description' => 'nullable|string',\n+                'venue' => 'required|string|max:255',\n+                'date' => 'required|date',\n+                'time' => 'required|date_format:H:i',\n+            ]);\n \n-        $training = Training::findOrFail($id);\n+            $training = Training::findOrFail($id);\n \n-        //store to table 'grants'\n-        $training->update([\n-            'title' => $request->event_name,\n-            'sector_id' => $request->sector,\n-            'description'   => $request->description,\n-            'venue' => $request->venue,\n-            'date' => $request->date,\n-            'time' => $request->time,\n-        ]);\n+            //store to table 'grants'\n+            $training->update([\n+                'title' => $request->event_name,\n+                'sector_id' => $request->sector,\n+                'description'   => $request->description,\n+                'venue' => $request->venue,\n+                'date' => $request->date,\n+                'time' => $request->time,\n+            ]);\n \n-        //handle the file upload\n-        if ($request->hasFile('event_image')) {\n-            $file = $request->file('event_image');\n-            $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n+            //handle the file upload\n+            if ($request->hasFile('event_image')) {\n+                $file = $request->file('event_image');\n+                $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n \n-            // replace old file if new file is inputed\n-            $training->documents()->delete();\n+                // replace old file if new file is inputed\n+                $training->documents()->delete();\n \n-            $training->documents()->create([\n-                'file_path'  => $path,\n-                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-            ]);\n-        }\n+                $training->documents()->create([\n+                    'file_path'  => $path,\n+                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+                ]);\n+            }\n \n-        // Attach requirements (if any selected)\n-        if ($request->has('requirements')) {\n-            $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+            // Attach requirements (if any selected)\n+            if ($request->has('requirements')) {\n+                $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+            }\n+\n+            return redirect()->back()->with('success', 'Training Updated!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Update Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while updating initiative/event.');\n         }\n-\n-        return redirect()->back()->with('success', 'Training Updated!');\n     }\n \n      //delete Training\n     public function deleteTraining($id){\n-        $training = Training::findOrFail($id);\n+        try{\n+            $training = Training::findOrFail($id);\n \n-        $training->delete();\n+            $training->delete();\n \n-        return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n+            return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Deletion Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while deleting initiative/event.');\n+        }\n     }\n }\n"
                },
                {
                    "date": 1763817985651,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,21 @@\n use App\\Services\\SMSService;\n \n class TrainingController extends Controller\n {\n+    public function view($id)\n+{\n+    $training = Training::with([\n+        'participants.user_info.sector',\n+        'documents',\n+        'sector'\n+    ])->findOrFail($id);\n+\n+    $isFinished = $training->date < now();\n+\n+    return view('view-training', compact('training', 'isFinished'));\n+}\n+\n     //show member with documents (if any)\n     public function showTrainings(){\n         return Training::with('documents', 'sector')->get();\n     }\n"
                },
                {
                    "date": 1763818042966,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,9 @@\n {\n     public function view($id)\n {\n     $training = Training::with([\n-        'participants.user_info.sector',\n+        'participants',\n         'documents',\n         'sector'\n     ])->findOrFail($id);\n \n"
                },
                {
                    "date": 1763818052313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,21 +13,9 @@\n use App\\Services\\SMSService;\n \n class TrainingController extends Controller\n {\n-    public function view($id)\n-{\n-    $training = Training::with([\n-        'participants',\n-        'documents',\n-        'sector'\n-    ])->findOrFail($id);\n-\n-    $isFinished = $training->date < now();\n-\n-    return view('view-training', compact('training', 'isFinished'));\n-}\n-\n+    \n     //show member with documents (if any)\n     public function showTrainings(){\n         return Training::with('documents', 'sector')->get();\n     }\n"
                },
                {
                    "date": 1763818064444,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,15 +7,11 @@\n use App\\Models\\Sector;\n use App\\Models\\Training;\n use App\\Models\\User;\n use Illuminate\\Http\\Request;\n-use Illuminate\\Support\\Facades\\Log;\n-use Illuminate\\Support\\Facades\\Auth;\n-use App\\Services\\SMSService;\n \n class TrainingController extends Controller\n {\n-    \n     //show member with documents (if any)\n     public function showTrainings(){\n         return Training::with('documents', 'sector')->get();\n     }\n@@ -35,62 +31,43 @@\n     }\n \n     //add event function\n     public function addTraining(Request $request){\n-        try{\n-            // validate the form data/input\n-            $request->validate([\n-                'event_name' => 'required|string|max:255',\n-                'sector' => 'required|exists:sectors,id',\n-                'description' => 'nullable|string',\n-                'venue' => 'required|string|max:255',\n-                'date' => 'required|date',\n-                'time' => 'required|date_format:H:i',\n-                'event_image' => 'nullable|image|mimes:jpeg,png,jpg|max:5760',\n-            ]);\n+        // validate the form data/input\n+        $request->validate([\n+            'event_name' => 'required|string|max:255',\n+            'sector' => 'required|exists:sectors,id',\n+            'description' => 'nullable|string',\n+            'venue' => 'required|string|max:255',\n+            'date' => 'required|date',\n+            'time' => 'required|date_format:H:i',\n+        ]);\n \n-            //store to table 'training'\n-            $event = Training::create([\n-                'title' => $request->event_name,\n-                'sector_id' => $request->sector,\n-                'description'   => $request->description,\n-                'venue' => $request->venue,\n-                'date' => $request->date,\n-                'time' => $request->time,\n-            ]);\n+        //store to table 'training'\n+        $event = Training::create([\n+            'title' => $request->event_name,\n+            'sector_id' => $request->sector,\n+            'description'   => $request->description,\n+            'venue' => $request->venue,\n+            'date' => $request->date,\n+            'time' => $request->time,\n+        ]);\n \n-            //handle the file upload\n-            if ($request->hasFile('event_image')) {\n-                $file = $request->file('event_image');\n-                $path = $file->store('events', 'public'); // saves in storage/app/public/events\n+        //handle the file upload\n+        if ($request->hasFile('event_image')) {\n+            $file = $request->file('event_image');\n+            $path = $file->store('events', 'public'); // saves in storage/app/public/events\n \n-                $event->documents()->create([\n-                    'file_path'  => $path,\n-                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-                ]);\n-            }\n+            $event->documents()->create([\n+                'file_path'  => $path,\n+                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+            ]);\n+        }\n \n-            //send sms test\n-            $user = Auth::user();\n-\n-            if ($user && $user->phone_number) {\n-\n-                //dd('SMS code reached', $user->phone_number);\n-                \n-                $number = $user->phone_number;\n-                $message = 'Test SMS: A new event was published!';\n-\n-                SMSService::send($number, $message);\n-            }\n-\n-            return redirect()->back()->with('success', 'Initiative/Event Added!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Creation Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n-        }\n+        return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-    //function to show specific data viewed in training\n+//function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n         $isFinished = now()->greaterThan($training->date);\n         $sectors = Sector::all();      \n@@ -101,67 +78,57 @@\n \n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n-        try{\n-            // validate the form data/input\n-            $request->validate([\n-                'event_name' => 'required|string|max:255',\n-                'sector' => 'required|exists:sectors,id',\n-                'description' => 'nullable|string',\n-                'venue' => 'required|string|max:255',\n-                'date' => 'required|date',\n-                'time' => 'required|date_format:H:i',\n-            ]);\n+        // validate the form data/input\n+        $request->validate([\n+            'event_name' => 'required|string|max:255',\n+            'sector' => 'required|exists:sectors,id',\n+            'description' => 'nullable|string',\n+            'venue' => 'required|string|max:255',\n+            'date' => 'required|date',\n+            'time' => 'required|date_format:H:i',\n+        ]);\n \n-            $training = Training::findOrFail($id);\n+        $training = Training::findOrFail($id);\n \n-            //store to table 'grants'\n-            $training->update([\n-                'title' => $request->event_name,\n-                'sector_id' => $request->sector,\n-                'description'   => $request->description,\n-                'venue' => $request->venue,\n-                'date' => $request->date,\n-                'time' => $request->time,\n-            ]);\n+        //store to table 'grants'\n+        $training->update([\n+            'title' => $request->event_name,\n+            'sector_id' => $request->sector,\n+            'description'   => $request->description,\n+            'venue' => $request->venue,\n+            'date' => $request->date,\n+            'time' => $request->time,\n+        ]);\n \n-            //handle the file upload\n-            if ($request->hasFile('event_image')) {\n-                $file = $request->file('event_image');\n-                $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n+        //handle the file upload\n+        if ($request->hasFile('event_image')) {\n+            $file = $request->file('event_image');\n+            $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n \n-                // replace old file if new file is inputed\n-                $training->documents()->delete();\n+            // replace old file if new file is inputed\n+            $training->documents()->delete();\n \n-                $training->documents()->create([\n-                    'file_path'  => $path,\n-                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-                ]);\n-            }\n+            $training->documents()->create([\n+                'file_path'  => $path,\n+                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+            ]);\n+        }\n \n-            // Attach requirements (if any selected)\n-            if ($request->has('requirements')) {\n-                $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n-            }\n+        // Attach requirements (if any selected)\n+        if ($request->has('requirements')) {\n+            $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+        }\n \n-            return redirect()->back()->with('success', 'Training Updated!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Update Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while updating initiative/event.');\n-        }\n+        return redirect()->back()->with('success', 'Training Updated!');\n     }\n \n      //delete Training\n     public function deleteTraining($id){\n-        try{\n-            $training = Training::findOrFail($id);\n+        $training = Training::findOrFail($id);\n \n-            $training->delete();\n+        $training->delete();\n \n-            return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Deletion Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while deleting initiative/event.');\n-        }\n+        return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n     }\n }\n"
                },
                {
                    "date": 1763818089156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,11 +7,15 @@\n use App\\Models\\Sector;\n use App\\Models\\Training;\n use App\\Models\\User;\n use Illuminate\\Http\\Request;\n+use Illuminate\\Support\\Facades\\Log;\n+use Illuminate\\Support\\Facades\\Auth;\n+use App\\Services\\SMSService;\n \n class TrainingController extends Controller\n {\n+    \n     //show member with documents (if any)\n     public function showTrainings(){\n         return Training::with('documents', 'sector')->get();\n     }\n@@ -31,43 +35,62 @@\n     }\n \n     //add event function\n     public function addTraining(Request $request){\n-        // validate the form data/input\n-        $request->validate([\n-            'event_name' => 'required|string|max:255',\n-            'sector' => 'required|exists:sectors,id',\n-            'description' => 'nullable|string',\n-            'venue' => 'required|string|max:255',\n-            'date' => 'required|date',\n-            'time' => 'required|date_format:H:i',\n-        ]);\n+        try{\n+            // validate the form data/input\n+            $request->validate([\n+                'event_name' => 'required|string|max:255',\n+                'sector' => 'required|exists:sectors,id',\n+                'description' => 'nullable|string',\n+                'venue' => 'required|string|max:255',\n+                'date' => 'required|date',\n+                'time' => 'required|date_format:H:i',\n+                'event_image' => 'nullable|image|mimes:jpeg,png,jpg|max:5760',\n+            ]);\n \n-        //store to table 'training'\n-        $event = Training::create([\n-            'title' => $request->event_name,\n-            'sector_id' => $request->sector,\n-            'description'   => $request->description,\n-            'venue' => $request->venue,\n-            'date' => $request->date,\n-            'time' => $request->time,\n-        ]);\n+            //store to table 'training'\n+            $event = Training::create([\n+                'title' => $request->event_name,\n+                'sector_id' => $request->sector,\n+                'description'   => $request->description,\n+                'venue' => $request->venue,\n+                'date' => $request->date,\n+                'time' => $request->time,\n+            ]);\n \n-        //handle the file upload\n-        if ($request->hasFile('event_image')) {\n-            $file = $request->file('event_image');\n-            $path = $file->store('events', 'public'); // saves in storage/app/public/events\n+            //handle the file upload\n+            if ($request->hasFile('event_image')) {\n+                $file = $request->file('event_image');\n+                $path = $file->store('events', 'public'); // saves in storage/app/public/events\n \n-            $event->documents()->create([\n-                'file_path'  => $path,\n-                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-            ]);\n+                $event->documents()->create([\n+                    'file_path'  => $path,\n+                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+                ]);\n+            }\n+\n+            //send sms test\n+            $user = Auth::user();\n+\n+            if ($user && $user->phone_number) {\n+\n+                //dd('SMS code reached', $user->phone_number);\n+                \n+                $number = $user->phone_number;\n+                $message = 'Test SMS: A new event was published!';\n+\n+                SMSService::send($number, $message);\n+            }\n+\n+            return redirect()->back()->with('success', 'Initiative/Event Added!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Creation Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n         }\n-\n-        return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-//function to show specific data viewed in training\n+    //function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n         $isFinished = now()->greaterThan($training->date);\n         $sectors = Sector::all();      \n@@ -78,57 +101,67 @@\n \n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n-        // validate the form data/input\n-        $request->validate([\n-            'event_name' => 'required|string|max:255',\n-            'sector' => 'required|exists:sectors,id',\n-            'description' => 'nullable|string',\n-            'venue' => 'required|string|max:255',\n-            'date' => 'required|date',\n-            'time' => 'required|date_format:H:i',\n-        ]);\n+        try{\n+            // validate the form data/input\n+            $request->validate([\n+                'event_name' => 'required|string|max:255',\n+                'sector' => 'required|exists:sectors,id',\n+                'description' => 'nullable|string',\n+                'venue' => 'required|string|max:255',\n+                'date' => 'required|date',\n+                'time' => 'required|date_format:H:i',\n+            ]);\n \n-        $training = Training::findOrFail($id);\n+            $training = Training::findOrFail($id);\n \n-        //store to table 'grants'\n-        $training->update([\n-            'title' => $request->event_name,\n-            'sector_id' => $request->sector,\n-            'description'   => $request->description,\n-            'venue' => $request->venue,\n-            'date' => $request->date,\n-            'time' => $request->time,\n-        ]);\n+            //store to table 'grants'\n+            $training->update([\n+                'title' => $request->event_name,\n+                'sector_id' => $request->sector,\n+                'description'   => $request->description,\n+                'venue' => $request->venue,\n+                'date' => $request->date,\n+                'time' => $request->time,\n+            ]);\n \n-        //handle the file upload\n-        if ($request->hasFile('event_image')) {\n-            $file = $request->file('event_image');\n-            $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n+            //handle the file upload\n+            if ($request->hasFile('event_image')) {\n+                $file = $request->file('event_image');\n+                $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n \n-            // replace old file if new file is inputed\n-            $training->documents()->delete();\n+                // replace old file if new file is inputed\n+                $training->documents()->delete();\n \n-            $training->documents()->create([\n-                'file_path'  => $path,\n-                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-            ]);\n-        }\n+                $training->documents()->create([\n+                    'file_path'  => $path,\n+                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+                ]);\n+            }\n \n-        // Attach requirements (if any selected)\n-        if ($request->has('requirements')) {\n-            $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+            // Attach requirements (if any selected)\n+            if ($request->has('requirements')) {\n+                $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+            }\n+\n+            return redirect()->back()->with('success', 'Training Updated!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Update Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while updating initiative/event.');\n         }\n-\n-        return redirect()->back()->with('success', 'Training Updated!');\n     }\n \n      //delete Training\n     public function deleteTraining($id){\n-        $training = Training::findOrFail($id);\n+        try{\n+            $training = Training::findOrFail($id);\n \n-        $training->delete();\n+            $training->delete();\n \n-        return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n+            return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Deletion Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while deleting initiative/event.');\n+        }\n     }\n }\n"
                },
                {
                    "date": 1763818108437,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,15 +7,11 @@\n use App\\Models\\Sector;\n use App\\Models\\Training;\n use App\\Models\\User;\n use Illuminate\\Http\\Request;\n-use Illuminate\\Support\\Facades\\Log;\n-use Illuminate\\Support\\Facades\\Auth;\n-use App\\Services\\SMSService;\n \n class TrainingController extends Controller\n {\n-    \n     //show member with documents (if any)\n     public function showTrainings(){\n         return Training::with('documents', 'sector')->get();\n     }\n@@ -35,62 +31,43 @@\n     }\n \n     //add event function\n     public function addTraining(Request $request){\n-        try{\n-            // validate the form data/input\n-            $request->validate([\n-                'event_name' => 'required|string|max:255',\n-                'sector' => 'required|exists:sectors,id',\n-                'description' => 'nullable|string',\n-                'venue' => 'required|string|max:255',\n-                'date' => 'required|date',\n-                'time' => 'required|date_format:H:i',\n-                'event_image' => 'nullable|image|mimes:jpeg,png,jpg|max:5760',\n-            ]);\n+        // validate the form data/input\n+        $request->validate([\n+            'event_name' => 'required|string|max:255',\n+            'sector' => 'required|exists:sectors,id',\n+            'description' => 'nullable|string',\n+            'venue' => 'required|string|max:255',\n+            'date' => 'required|date',\n+            'time' => 'required|date_format:H:i',\n+        ]);\n \n-            //store to table 'training'\n-            $event = Training::create([\n-                'title' => $request->event_name,\n-                'sector_id' => $request->sector,\n-                'description'   => $request->description,\n-                'venue' => $request->venue,\n-                'date' => $request->date,\n-                'time' => $request->time,\n-            ]);\n+        //store to table 'training'\n+        $event = Training::create([\n+            'title' => $request->event_name,\n+            'sector_id' => $request->sector,\n+            'description'   => $request->description,\n+            'venue' => $request->venue,\n+            'date' => $request->date,\n+            'time' => $request->time,\n+        ]);\n \n-            //handle the file upload\n-            if ($request->hasFile('event_image')) {\n-                $file = $request->file('event_image');\n-                $path = $file->store('events', 'public'); // saves in storage/app/public/events\n+        //handle the file upload\n+        if ($request->hasFile('event_image')) {\n+            $file = $request->file('event_image');\n+            $path = $file->store('events', 'public'); // saves in storage/app/public/events\n \n-                $event->documents()->create([\n-                    'file_path'  => $path,\n-                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-                ]);\n-            }\n+            $event->documents()->create([\n+                'file_path'  => $path,\n+                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+            ]);\n+        }\n \n-            //send sms test\n-            $user = Auth::user();\n-\n-            if ($user && $user->phone_number) {\n-\n-                //dd('SMS code reached', $user->phone_number);\n-                \n-                $number = $user->phone_number;\n-                $message = 'Test SMS: A new event was published!';\n-\n-                SMSService::send($number, $message);\n-            }\n-\n-            return redirect()->back()->with('success', 'Initiative/Event Added!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Creation Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n-        }\n+        return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n-    //function to show specific data viewed in training\n+//function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n         $isFinished = now()->greaterThan($training->date);\n         $sectors = Sector::all();      \n@@ -101,67 +78,57 @@\n \n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n-        try{\n-            // validate the form data/input\n-            $request->validate([\n-                'event_name' => 'required|string|max:255',\n-                'sector' => 'required|exists:sectors,id',\n-                'description' => 'nullable|string',\n-                'venue' => 'required|string|max:255',\n-                'date' => 'required|date',\n-                'time' => 'required|date_format:H:i',\n-            ]);\n+        // validate the form data/input\n+        $request->validate([\n+            'event_name' => 'required|string|max:255',\n+            'sector' => 'required|exists:sectors,id',\n+            'description' => 'nullable|string',\n+            'venue' => 'required|string|max:255',\n+            'date' => 'required|date',\n+            'time' => 'required|date_format:H:i',\n+        ]);\n \n-            $training = Training::findOrFail($id);\n+        $training = Training::findOrFail($id);\n \n-            //store to table 'grants'\n-            $training->update([\n-                'title' => $request->event_name,\n-                'sector_id' => $request->sector,\n-                'description'   => $request->description,\n-                'venue' => $request->venue,\n-                'date' => $request->date,\n-                'time' => $request->time,\n-            ]);\n+        //store to table 'grants'\n+        $training->update([\n+            'title' => $request->event_name,\n+            'sector_id' => $request->sector,\n+            'description'   => $request->description,\n+            'venue' => $request->venue,\n+            'date' => $request->date,\n+            'time' => $request->time,\n+        ]);\n \n-            //handle the file upload\n-            if ($request->hasFile('event_image')) {\n-                $file = $request->file('event_image');\n-                $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n+        //handle the file upload\n+        if ($request->hasFile('event_image')) {\n+            $file = $request->file('event_image');\n+            $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n \n-                // replace old file if new file is inputed\n-                $training->documents()->delete();\n+            // replace old file if new file is inputed\n+            $training->documents()->delete();\n \n-                $training->documents()->create([\n-                    'file_path'  => $path,\n-                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-                ]);\n-            }\n+            $training->documents()->create([\n+                'file_path'  => $path,\n+                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+            ]);\n+        }\n \n-            // Attach requirements (if any selected)\n-            if ($request->has('requirements')) {\n-                $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n-            }\n+        // Attach requirements (if any selected)\n+        if ($request->has('requirements')) {\n+            $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+        }\n \n-            return redirect()->back()->with('success', 'Training Updated!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Update Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while updating initiative/event.');\n-        }\n+        return redirect()->back()->with('success', 'Training Updated!');\n     }\n \n      //delete Training\n     public function deleteTraining($id){\n-        try{\n-            $training = Training::findOrFail($id);\n+        $training = Training::findOrFail($id);\n \n-            $training->delete();\n+        $training->delete();\n \n-            return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Deletion Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while deleting initiative/event.');\n-        }\n+        return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n     }\n }\n"
                },
                {
                    "date": 1763818113712,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,8 +65,9 @@\n \n         return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n+    //function to show specific data viewed in training\n //function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n         $isFinished = now()->greaterThan($training->date);\n"
                },
                {
                    "date": 1763818154308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,11 +7,27 @@\n use App\\Models\\Sector;\n use App\\Models\\Training;\n use App\\Models\\User;\n use Illuminate\\Http\\Request;\n+use Illuminate\\Support\\Facades\\Log;\n+use Illuminate\\Support\\Facades\\Auth;\n+use App\\Services\\SMSService;\n \n class TrainingController extends Controller\n {\n+    public function view($id)\n+{\n+    $training = Training::with([\n+        'participants',\n+        'documents',\n+        'sector'\n+    ])->findOrFail($id);\n+\n+    $isFinished = $training->date < now();\n+\n+    return view('view-training', compact('training', 'isFinished'));\n+}\n+\n     //show member with documents (if any)\n     public function showTrainings(){\n         return Training::with('documents', 'sector')->get();\n     }\n@@ -31,44 +47,62 @@\n     }\n \n     //add event function\n     public function addTraining(Request $request){\n-        // validate the form data/input\n-        $request->validate([\n-            'event_name' => 'required|string|max:255',\n-            'sector' => 'required|exists:sectors,id',\n-            'description' => 'nullable|string',\n-            'venue' => 'required|string|max:255',\n-            'date' => 'required|date',\n-            'time' => 'required|date_format:H:i',\n-        ]);\n+        try{\n+            // validate the form data/input\n+            $request->validate([\n+                'event_name' => 'required|string|max:255',\n+                'sector' => 'required|exists:sectors,id',\n+                'description' => 'nullable|string',\n+                'venue' => 'required|string|max:255',\n+                'date' => 'required|date',\n+                'time' => 'required|date_format:H:i',\n+                'event_image' => 'nullable|image|mimes:jpeg,png,jpg|max:5760',\n+            ]);\n \n-        //store to table 'training'\n-        $event = Training::create([\n-            'title' => $request->event_name,\n-            'sector_id' => $request->sector,\n-            'description'   => $request->description,\n-            'venue' => $request->venue,\n-            'date' => $request->date,\n-            'time' => $request->time,\n-        ]);\n+            //store to table 'training'\n+            $event = Training::create([\n+                'title' => $request->event_name,\n+                'sector_id' => $request->sector,\n+                'description'   => $request->description,\n+                'venue' => $request->venue,\n+                'date' => $request->date,\n+                'time' => $request->time,\n+            ]);\n \n-        //handle the file upload\n-        if ($request->hasFile('event_image')) {\n-            $file = $request->file('event_image');\n-            $path = $file->store('events', 'public'); // saves in storage/app/public/events\n+            //handle the file upload\n+            if ($request->hasFile('event_image')) {\n+                $file = $request->file('event_image');\n+                $path = $file->store('events', 'public'); // saves in storage/app/public/events\n \n-            $event->documents()->create([\n-                'file_path'  => $path,\n-                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-            ]);\n+                $event->documents()->create([\n+                    'file_path'  => $path,\n+                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+                ]);\n+            }\n+\n+            //send sms test\n+            $user = Auth::user();\n+\n+            if ($user && $user->phone_number) {\n+\n+                //dd('SMS code reached', $user->phone_number);\n+                \n+                $number = $user->phone_number;\n+                $message = 'Test SMS: A new event was published!';\n+\n+                SMSService::send($number, $message);\n+            }\n+\n+            return redirect()->back()->with('success', 'Initiative/Event Added!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Creation Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n         }\n-\n-        return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n     //function to show specific data viewed in training\n-//function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n         $isFinished = now()->greaterThan($training->date);\n         $sectors = Sector::all();      \n@@ -79,57 +113,67 @@\n \n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n-        // validate the form data/input\n-        $request->validate([\n-            'event_name' => 'required|string|max:255',\n-            'sector' => 'required|exists:sectors,id',\n-            'description' => 'nullable|string',\n-            'venue' => 'required|string|max:255',\n-            'date' => 'required|date',\n-            'time' => 'required|date_format:H:i',\n-        ]);\n+        try{\n+            // validate the form data/input\n+            $request->validate([\n+                'event_name' => 'required|string|max:255',\n+                'sector' => 'required|exists:sectors,id',\n+                'description' => 'nullable|string',\n+                'venue' => 'required|string|max:255',\n+                'date' => 'required|date',\n+                'time' => 'required|date_format:H:i',\n+            ]);\n \n-        $training = Training::findOrFail($id);\n+            $training = Training::findOrFail($id);\n \n-        //store to table 'grants'\n-        $training->update([\n-            'title' => $request->event_name,\n-            'sector_id' => $request->sector,\n-            'description'   => $request->description,\n-            'venue' => $request->venue,\n-            'date' => $request->date,\n-            'time' => $request->time,\n-        ]);\n+            //store to table 'grants'\n+            $training->update([\n+                'title' => $request->event_name,\n+                'sector_id' => $request->sector,\n+                'description'   => $request->description,\n+                'venue' => $request->venue,\n+                'date' => $request->date,\n+                'time' => $request->time,\n+            ]);\n \n-        //handle the file upload\n-        if ($request->hasFile('event_image')) {\n-            $file = $request->file('event_image');\n-            $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n+            //handle the file upload\n+            if ($request->hasFile('event_image')) {\n+                $file = $request->file('event_image');\n+                $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n \n-            // replace old file if new file is inputed\n-            $training->documents()->delete();\n+                // replace old file if new file is inputed\n+                $training->documents()->delete();\n \n-            $training->documents()->create([\n-                'file_path'  => $path,\n-                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-            ]);\n-        }\n+                $training->documents()->create([\n+                    'file_path'  => $path,\n+                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+                ]);\n+            }\n \n-        // Attach requirements (if any selected)\n-        if ($request->has('requirements')) {\n-            $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+            // Attach requirements (if any selected)\n+            if ($request->has('requirements')) {\n+                $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+            }\n+\n+            return redirect()->back()->with('success', 'Training Updated!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Update Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while updating initiative/event.');\n         }\n-\n-        return redirect()->back()->with('success', 'Training Updated!');\n     }\n \n      //delete Training\n     public function deleteTraining($id){\n-        $training = Training::findOrFail($id);\n+        try{\n+            $training = Training::findOrFail($id);\n \n-        $training->delete();\n+            $training->delete();\n \n-        return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n+            return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Deletion Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while deleting initiative/event.');\n+        }\n     }\n }\n"
                },
                {
                    "date": 1763818445357,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,21 +13,9 @@\n use App\\Services\\SMSService;\n \n class TrainingController extends Controller\n {\n-    public function view($id)\n-{\n-    $training = Training::with([\n-        'participants',\n-        'documents',\n-        'sector'\n-    ])->findOrFail($id);\n-\n-    $isFinished = $training->date < now();\n-\n-    return view('view-training', compact('training', 'isFinished'));\n-}\n-\n+    \n     //show member with documents (if any)\n     public function showTrainings(){\n         return Training::with('documents', 'sector')->get();\n     }\n"
                },
                {
                    "date": 1763818505639,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,8 @@\n use App\\Services\\SMSService;\n \n class TrainingController extends Controller\n {\n-    \n     //show member with documents (if any)\n     public function showTrainings(){\n         return Training::with('documents', 'sector')->get();\n     }\n"
                },
                {
                    "date": 1763818859149,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,11 +7,8 @@\n use App\\Models\\Sector;\n use App\\Models\\Training;\n use App\\Models\\User;\n use Illuminate\\Http\\Request;\n-use Illuminate\\Support\\Facades\\Log;\n-use Illuminate\\Support\\Facades\\Auth;\n-use App\\Services\\SMSService;\n \n class TrainingController extends Controller\n {\n     //show member with documents (if any)\n@@ -34,133 +31,104 @@\n     }\n \n     //add event function\n     public function addTraining(Request $request){\n-        try{\n-            // validate the form data/input\n-            $request->validate([\n-                'event_name' => 'required|string|max:255',\n-                'sector' => 'required|exists:sectors,id',\n-                'description' => 'nullable|string',\n-                'venue' => 'required|string|max:255',\n-                'date' => 'required|date',\n-                'time' => 'required|date_format:H:i',\n-                'event_image' => 'nullable|image|mimes:jpeg,png,jpg|max:5760',\n-            ]);\n+        // validate the form data/input\n+        $request->validate([\n+            'event_name' => 'required|string|max:255',\n+            'sector' => 'required|exists:sectors,id',\n+            'description' => 'nullable|string',\n+            'venue' => 'required|string|max:255',\n+            'date' => 'required|date',\n+            'time' => 'required|date_format:H:i',\n+        ]);\n \n-            //store to table 'training'\n-            $event = Training::create([\n-                'title' => $request->event_name,\n-                'sector_id' => $request->sector,\n-                'description'   => $request->description,\n-                'venue' => $request->venue,\n-                'date' => $request->date,\n-                'time' => $request->time,\n-            ]);\n+        //store to table 'training'\n+        $event = Training::create([\n+            'title' => $request->event_name,\n+            'sector_id' => $request->sector,\n+            'description'   => $request->description,\n+            'venue' => $request->venue,\n+            'date' => $request->date,\n+            'time' => $request->time,\n+        ]);\n \n-            //handle the file upload\n-            if ($request->hasFile('event_image')) {\n-                $file = $request->file('event_image');\n-                $path = $file->store('events', 'public'); // saves in storage/app/public/events\n+        //handle the file upload\n+        if ($request->hasFile('event_image')) {\n+            $file = $request->file('event_image');\n+            $path = $file->store('events', 'public'); // saves in storage/app/public/events\n \n-                $event->documents()->create([\n-                    'file_path'  => $path,\n-                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-                ]);\n-            }\n+            $event->documents()->create([\n+                'file_path'  => $path,\n+                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+            ]);\n+        }\n \n-            //send sms test\n-            $user = Auth::user();\n-\n-            if ($user && $user->phone_number) {\n-\n-                //dd('SMS code reached', $user->phone_number);\n-                \n-                $number = $user->phone_number;\n-                $message = 'Test SMS: A new event was published!';\n-\n-                SMSService::send($number, $message);\n-            }\n-\n-            return redirect()->back()->with('success', 'Initiative/Event Added!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Creation Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n-        }\n+        return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n     //function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n-        $isFinished = now()->greaterThan($training->date);\n+\n         $sectors = Sector::all();      \n         $participants = Participant::all();\n \n-        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n+        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants'));\n     }\n \n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n-        try{\n-            // validate the form data/input\n-            $request->validate([\n-                'event_name' => 'required|string|max:255',\n-                'sector' => 'required|exists:sectors,id',\n-                'description' => 'nullable|string',\n-                'venue' => 'required|string|max:255',\n-                'date' => 'required|date',\n-                'time' => 'required|date_format:H:i',\n-            ]);\n+        // validate the form data/input\n+        $request->validate([\n+            'event_name' => 'required|string|max:255',\n+            'sector' => 'required|exists:sectors,id',\n+            'description' => 'nullable|string',\n+            'venue' => 'required|string|max:255',\n+            'date' => 'required|date',\n+            'time' => 'required|date_format:H:i',\n+        ]);\n \n-            $training = Training::findOrFail($id);\n+        $training = Training::findOrFail($id);\n \n-            //store to table 'grants'\n-            $training->update([\n-                'title' => $request->event_name,\n-                'sector_id' => $request->sector,\n-                'description'   => $request->description,\n-                'venue' => $request->venue,\n-                'date' => $request->date,\n-                'time' => $request->time,\n-            ]);\n+        //store to table 'grants'\n+        $training->update([\n+            'title' => $request->event_name,\n+            'sector_id' => $request->sector,\n+            'description'   => $request->description,\n+            'venue' => $request->venue,\n+            'date' => $request->date,\n+            'time' => $request->time,\n+        ]);\n \n-            //handle the file upload\n-            if ($request->hasFile('event_image')) {\n-                $file = $request->file('event_image');\n-                $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n+        //handle the file upload\n+        if ($request->hasFile('event_image')) {\n+            $file = $request->file('event_image');\n+            $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n \n-                // replace old file if new file is inputed\n-                $training->documents()->delete();\n+            // replace old file if new file is inputed\n+            $training->documents()->delete();\n \n-                $training->documents()->create([\n-                    'file_path'  => $path,\n-                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-                ]);\n-            }\n+            $training->documents()->create([\n+                'file_path'  => $path,\n+                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+            ]);\n+        }\n \n-            // Attach requirements (if any selected)\n-            if ($request->has('requirements')) {\n-                $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n-            }\n+        // Attach requirements (if any selected)\n+        if ($request->has('requirements')) {\n+            $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+        }\n \n-            return redirect()->back()->with('success', 'Training Updated!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Update Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while updating initiative/event.');\n-        }\n+        return redirect()->back()->with('success', 'Training Updated!');\n     }\n \n      //delete Training\n     public function deleteTraining($id){\n-        try{\n-            $training = Training::findOrFail($id);\n+        $training = Training::findOrFail($id);\n \n-            $training->delete();\n+        $training->delete();\n \n-            return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Deletion Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while deleting initiative/event.');\n-        }\n+        return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n     }\n }\n"
                },
                {
                    "date": 1763818889413,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,8 +7,11 @@\n use App\\Models\\Sector;\n use App\\Models\\Training;\n use App\\Models\\User;\n use Illuminate\\Http\\Request;\n+use Illuminate\\Support\\Facades\\Log;\n+use Illuminate\\Support\\Facades\\Auth;\n+use App\\Services\\SMSService;\n \n class TrainingController extends Controller\n {\n     //show member with documents (if any)\n@@ -31,104 +34,133 @@\n     }\n \n     //add event function\n     public function addTraining(Request $request){\n-        // validate the form data/input\n-        $request->validate([\n-            'event_name' => 'required|string|max:255',\n-            'sector' => 'required|exists:sectors,id',\n-            'description' => 'nullable|string',\n-            'venue' => 'required|string|max:255',\n-            'date' => 'required|date',\n-            'time' => 'required|date_format:H:i',\n-        ]);\n+        try{\n+            // validate the form data/input\n+            $request->validate([\n+                'event_name' => 'required|string|max:255',\n+                'sector' => 'required|exists:sectors,id',\n+                'description' => 'nullable|string',\n+                'venue' => 'required|string|max:255',\n+                'date' => 'required|date',\n+                'time' => 'required|date_format:H:i',\n+                'event_image' => 'nullable|image|mimes:jpeg,png,jpg|max:5760',\n+            ]);\n \n-        //store to table 'training'\n-        $event = Training::create([\n-            'title' => $request->event_name,\n-            'sector_id' => $request->sector,\n-            'description'   => $request->description,\n-            'venue' => $request->venue,\n-            'date' => $request->date,\n-            'time' => $request->time,\n-        ]);\n+            //store to table 'training'\n+            $event = Training::create([\n+                'title' => $request->event_name,\n+                'sector_id' => $request->sector,\n+                'description'   => $request->description,\n+                'venue' => $request->venue,\n+                'date' => $request->date,\n+                'time' => $request->time,\n+            ]);\n \n-        //handle the file upload\n-        if ($request->hasFile('event_image')) {\n-            $file = $request->file('event_image');\n-            $path = $file->store('events', 'public'); // saves in storage/app/public/events\n+            //handle the file upload\n+            if ($request->hasFile('event_image')) {\n+                $file = $request->file('event_image');\n+                $path = $file->store('events', 'public'); // saves in storage/app/public/events\n \n-            $event->documents()->create([\n-                'file_path'  => $path,\n-                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-            ]);\n+                $event->documents()->create([\n+                    'file_path'  => $path,\n+                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+                ]);\n+            }\n+\n+            //send sms test\n+            $user = Auth::user();\n+\n+            if ($user && $user->phone_number) {\n+\n+                //dd('SMS code reached', $user->phone_number);\n+                \n+                $number = $user->phone_number;\n+                $message = 'Test SMS: A new event was published!';\n+\n+                SMSService::send($number, $message);\n+            }\n+\n+            return redirect()->back()->with('success', 'Initiative/Event Added!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Creation Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n         }\n-\n-        return redirect()->back()->with('success', 'Grant Added!');\n     }\n \n     //function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n-\n+        $isFinished = now()->greaterThan($training->date);\n         $sectors = Sector::all();      \n         $participants = Participant::all();\n \n-        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants'));\n+        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n     }\n \n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n-        // validate the form data/input\n-        $request->validate([\n-            'event_name' => 'required|string|max:255',\n-            'sector' => 'required|exists:sectors,id',\n-            'description' => 'nullable|string',\n-            'venue' => 'required|string|max:255',\n-            'date' => 'required|date',\n-            'time' => 'required|date_format:H:i',\n-        ]);\n+        try{\n+            // validate the form data/input\n+            $request->validate([\n+                'event_name' => 'required|string|max:255',\n+                'sector' => 'required|exists:sectors,id',\n+                'description' => 'nullable|string',\n+                'venue' => 'required|string|max:255',\n+                'date' => 'required|date',\n+                'time' => 'required|date_format:H:i',\n+            ]);\n \n-        $training = Training::findOrFail($id);\n+            $training = Training::findOrFail($id);\n \n-        //store to table 'grants'\n-        $training->update([\n-            'title' => $request->event_name,\n-            'sector_id' => $request->sector,\n-            'description'   => $request->description,\n-            'venue' => $request->venue,\n-            'date' => $request->date,\n-            'time' => $request->time,\n-        ]);\n+            //store to table 'grants'\n+            $training->update([\n+                'title' => $request->event_name,\n+                'sector_id' => $request->sector,\n+                'description'   => $request->description,\n+                'venue' => $request->venue,\n+                'date' => $request->date,\n+                'time' => $request->time,\n+            ]);\n \n-        //handle the file upload\n-        if ($request->hasFile('event_image')) {\n-            $file = $request->file('event_image');\n-            $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n+            //handle the file upload\n+            if ($request->hasFile('event_image')) {\n+                $file = $request->file('event_image');\n+                $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n \n-            // replace old file if new file is inputed\n-            $training->documents()->delete();\n+                // replace old file if new file is inputed\n+                $training->documents()->delete();\n \n-            $training->documents()->create([\n-                'file_path'  => $path,\n-                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-            ]);\n-        }\n+                $training->documents()->create([\n+                    'file_path'  => $path,\n+                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+                ]);\n+            }\n \n-        // Attach requirements (if any selected)\n-        if ($request->has('requirements')) {\n-            $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+            // Attach requirements (if any selected)\n+            if ($request->has('requirements')) {\n+                $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+            }\n+\n+            return redirect()->back()->with('success', 'Training Updated!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Update Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while updating initiative/event.');\n         }\n-\n-        return redirect()->back()->with('success', 'Training Updated!');\n     }\n \n      //delete Training\n     public function deleteTraining($id){\n-        $training = Training::findOrFail($id);\n+        try{\n+            $training = Training::findOrFail($id);\n \n-        $training->delete();\n+            $training->delete();\n \n-        return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n+            return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Deletion Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while deleting initiative/event.');\n+        }\n     }\n }\n"
                },
                {
                    "date": 1763820438802,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,9 +87,9 @@\n             return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n         }\n     }\n \n-    //function to show specific data viewed in training\n+//function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n         $isFinished = now()->greaterThan($training->date);\n         $sectors = Sector::all();      \n"
                },
                {
                    "date": 1763820726833,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,9 +87,9 @@\n             return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n         }\n     }\n \n-//function to show specific data viewed in training\n+    //function to show specific data viewed in training\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n         $isFinished = now()->greaterThan($training->date);\n         $sectors = Sector::all();      \n"
                },
                {
                    "date": 1763821580057,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,10 +92,13 @@\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n         $isFinished = now()->greaterThan($training->date);\n         $sectors = Sector::all();      \n-        $participants = Participant::all();\n+$training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n \n+$participants = $training->participants;\n+\n+\n         return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n     }\n \n     //function to edit info of the grant\n"
                },
                {
                    "date": 1763821600399,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,13 +92,10 @@\n     public function viewTrainingDetails($id){\n         $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n         $isFinished = now()->greaterThan($training->date);\n         $sectors = Sector::all();      \n-$training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n+        $participants = Participant::all();\n \n-$participants = $training->participants;\n-\n-\n         return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n     }\n \n     //function to edit info of the grant\n"
                },
                {
                    "date": 1763821656638,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,19 +86,20 @@\n             Log::error('Event Creation Error: ' . $error->getMessage());\n             return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n         }\n     }\n+public function viewTrainingDetails($id)\n+{\n+    $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n+    $isFinished = now()->greaterThan($training->date);\n \n-    //function to show specific data viewed in training\n-    public function viewTrainingDetails($id){\n-        $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n-        $isFinished = now()->greaterThan($training->date);\n-        $sectors = Sector::all();      \n-        $participants = Participant::all();\n+    // Correct participants\n+    $participants = $training->participants;\n \n-        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n-    }\n+    return view('swisa-admin.view-training', compact('training', 'participants', 'isFinished'));\n+}\n \n+\n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n         try{\n"
                },
                {
                    "date": 1763821704382,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,12 +91,15 @@\n {\n     $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n     $isFinished = now()->greaterThan($training->date);\n \n-    // Correct participants\n     $participants = $training->participants;\n+    $sectors = Sector::all(); //  add this back\n \n-    return view('swisa-admin.view-training', compact('training', 'participants', 'isFinished'));\n+    return view(\n+        'swisa-admin.view-training',\n+        compact('training', 'participants', 'sectors', 'isFinished')\n+    );\n }\n \n \n     //function to edit info of the grant\n"
                },
                {
                    "date": 1763821875295,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,23 +86,19 @@\n             Log::error('Event Creation Error: ' . $error->getMessage());\n             return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n         }\n     }\n-public function viewTrainingDetails($id)\n-{\n-    $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n-    $isFinished = now()->greaterThan($training->date);\n \n-    $participants = $training->participants;\n-    $sectors = Sector::all(); //  add this back\n+    //function to show specific data viewed in training\n+    public function viewTrainingDetails($id){\n+        $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n+        $isFinished = now()->greaterThan($training->date);\n+        $sectors = Sector::all();      \n+        $participants = Participant::all();\n \n-    return view(\n-        'swisa-admin.view-training',\n-        compact('training', 'participants', 'sectors', 'isFinished')\n-    );\n-}\n+        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n+    }\n \n-\n     //function to edit info of the grant\n     public function editTrainingInfo(Request $request, $id){\n         \n         try{\n"
                },
                {
                    "date": 1763836309063,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,187 @@\n+<?php\n+\n+namespace App\\Http\\Controllers\\Web;\n+\n+use App\\Http\\Controllers\\Controller;\n+use App\\Models\\Participant;\n+use App\\Models\\Sector;\n+use App\\Models\\Training;\n+use App\\Models\\User;\n+use Illuminate\\Http\\Request;\n+use Illuminate\\Support\\Facades\\Log;\n+use Illuminate\\Support\\Facades\\Auth;\n+use App\\Services\\SMSService;\n+\n+class TrainingController extends Controller\n+{\n+    //show member with documents (if any)\n+    public function showTrainings(){\n+        return Training::with('documents', 'sector')->get();\n+    }\n+\n+    public function showSectors(){\n+        return Sector::all();\n+    }\n+\n+    //pass the 'members' variable to the members page for data display\n+    public function displayTraining(){\n+        $trainings = $this->showTrainings();\n+        $sectors = $this->showSectors();\n+        $upcomingEvents = Training::whereDate('date', '>=', now())->count();\n+        $completedEvents = Training::whereDate('date', '<', now())->count();\n+\n+        return view('swisa-admin.training-workshop', compact('trainings', 'sectors', 'upcomingEvents', 'completedEvents'));\n+    }\n+\n+    //add event function\n+    public function addTraining(Request $request){\n+        try{\n+            // validate the form data/input\n+            $request->validate([\n+                'event_name' => 'required|string|max:255',\n+                'sector' => 'required|exists:sectors,id',\n+                'description' => 'nullable|string',\n+                'venue' => 'required|string|max:255',\n+                'date' => 'required|date',\n+                'time' => 'required|date_format:H:i',\n+                'event_image' => 'nullable|image|mimes:jpeg,png,jpg|max:5760',\n+            ]);\n+\n+            //store to table 'training'\n+            $event = Training::create([\n+                'title' => $request->event_name,\n+                'sector_id' => $request->sector,\n+                'description'   => $request->description,\n+                'venue' => $request->venue,\n+                'date' => $request->date,\n+                'time' => $request->time,\n+            ]);\n+\n+            //handle the file upload\n+            if ($request->hasFile('event_image')) {\n+                $file = $request->file('event_image');\n+                $path = $file->store('events', 'public'); // saves in storage/app/public/events\n+\n+                $event->documents()->create([\n+                    'file_path'  => $path,\n+                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+                ]);\n+            }\n+\n+            //send sms test\n+            $user = Auth::user();\n+\n+            if ($user && $user->phone_number) {\n+\n+                //dd('SMS code reached', $user->phone_number);\n+                \n+                $number = $user->phone_number;\n+                $message = 'Test SMS: A new event was published!';\n+\n+                SMSService::send($number, $message);\n+            }\n+\n+            return redirect()->back()->with('success', 'Initiative/Event Added!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Creation Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n+        }\n+    }\n+\n+    //function to show specific data viewed in training\n+    public function viewTrainingDetails($id){\n+        $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n+        $isFinished = now()->greaterThan($training->date);\n+        $sectors = Sector::all();      \n+        $participants = Participant::all();\n+\n+        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n+    }\n+\n+    //function to edit info of the grant\n+    public function editTrainingInfo(Request $request, $id){\n+        \n+        try{\n+            // validate the form data/input\n+            $request->validate([\n+                'event_name' => 'required|string|max:255',\n+                'sector' => 'required|exists:sectors,id',\n+                'description' => 'nullable|string',\n+                'venue' => 'required|string|max:255',\n+                'date' => 'required|date',\n+                'time' => 'required|date_format:H:i',\n+            ]);\n+\n+            $training = Training::findOrFail($id);\n+\n+            //store to table 'grants'\n+            $training->update([\n+                'title' => $request->event_name,\n+                'sector_id' => $request->sector,\n+                'description'   => $request->description,\n+                'venue' => $request->venue,\n+                'date' => $request->date,\n+                'time' => $request->time,\n+            ]);\n+\n+            //handle the file upload\n+            if ($request->hasFile('event_image')) {\n+                $file = $request->file('event_image');\n+                $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n+\n+                // replace old file if new file is inputed\n+                $training->documents()->delete();\n+\n+                $training->documents()->create([\n+                    'file_path'  => $path,\n+                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n+                ]);\n+            }\n+\n+            // Attach requirements (if any selected)\n+            if ($request->has('requirements')) {\n+                $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n+            }\n+\n+            return redirect()->back()->with('success', 'Training Updated!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Update Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while updating initiative/event.');\n+        }\n+    }\n+\n+     //delete Training\n+    public function deleteTraining($id){\n+        try{\n+            $training = Training::findOrFail($id);\n+\n+            $training->delete();\n+\n+            return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n+        }catch(\\Exception $error){\n+            Log::error('Event Deletion Error: ' . $error->getMessage());\n+            return redirect()->back()->with('error', 'Something went wrong while deleting initiative/event.');\n+        }\n+    }\n+\n+    //=============================\n+    // FOR SCAN ATTENDANCE\n+    //=============================\n+    public function scanQr($qr)\n+{\n+    $user = UserInfo::where('qr_code', $qr)->first();\n+\n+    if ($user) {\n+        return response()->json([\n+            'success' => true,\n+            'name' => $user->name, // fullname from user_info\n+        ]);\n+    }\n+\n+    return response()->json([\n+        'success' => false,\n+        'message' => 'User not found.'\n+    ]);\n+}\n+\n+}\n"
                },
                {
                    "date": 1763836522400,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,188 +166,23 @@\n \n     //=============================\n     // FOR SCAN ATTENDANCE\n     //=============================\n-    public function scanQr($qr)\n+    public function scanQrUser($qr)\n {\n     $user = UserInfo::where('qr_code', $qr)->first();\n \n-    if ($user) {\n+    if (!$user) {\n         return response()->json([\n-            'success' => true,\n-            'name' => $user->name, // fullname from user_info\n+            'success' => false,\n+            'message' => 'User not found'\n         ]);\n     }\n \n     return response()->json([\n-        'success' => false,\n-        'message' => 'User not found.'\n+        'success' => true,\n+        'id' => $user->user_id,\n+        'name' => $user->name\n     ]);\n }\n \n }\n-<?php\n-\n-namespace App\\Http\\Controllers\\Web;\n-\n-use App\\Http\\Controllers\\Controller;\n-use App\\Models\\Participant;\n-use App\\Models\\Sector;\n-use App\\Models\\Training;\n-use App\\Models\\User;\n-use Illuminate\\Http\\Request;\n-use Illuminate\\Support\\Facades\\Log;\n-use Illuminate\\Support\\Facades\\Auth;\n-use App\\Services\\SMSService;\n-\n-class TrainingController extends Controller\n-{\n-    //show member with documents (if any)\n-    public function showTrainings(){\n-        return Training::with('documents', 'sector')->get();\n-    }\n-\n-    public function showSectors(){\n-        return Sector::all();\n-    }\n-\n-    //pass the 'members' variable to the members page for data display\n-    public function displayTraining(){\n-        $trainings = $this->showTrainings();\n-        $sectors = $this->showSectors();\n-        $upcomingEvents = Training::whereDate('date', '>=', now())->count();\n-        $completedEvents = Training::whereDate('date', '<', now())->count();\n-\n-        return view('swisa-admin.training-workshop', compact('trainings', 'sectors', 'upcomingEvents', 'completedEvents'));\n-    }\n-\n-    //add event function\n-    public function addTraining(Request $request){\n-        try{\n-            // validate the form data/input\n-            $request->validate([\n-                'event_name' => 'required|string|max:255',\n-                'sector' => 'required|exists:sectors,id',\n-                'description' => 'nullable|string',\n-                'venue' => 'required|string|max:255',\n-                'date' => 'required|date',\n-                'time' => 'required|date_format:H:i',\n-                'event_image' => 'nullable|image|mimes:jpeg,png,jpg|max:5760',\n-            ]);\n-\n-            //store to table 'training'\n-            $event = Training::create([\n-                'title' => $request->event_name,\n-                'sector_id' => $request->sector,\n-                'description'   => $request->description,\n-                'venue' => $request->venue,\n-                'date' => $request->date,\n-                'time' => $request->time,\n-            ]);\n-\n-            //handle the file upload\n-            if ($request->hasFile('event_image')) {\n-                $file = $request->file('event_image');\n-                $path = $file->store('events', 'public'); // saves in storage/app/public/events\n-\n-                $event->documents()->create([\n-                    'file_path'  => $path,\n-                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-                ]);\n-            }\n-\n-            //send sms test\n-            $user = Auth::user();\n-\n-            if ($user && $user->phone_number) {\n-\n-                //dd('SMS code reached', $user->phone_number);\n-                \n-                $number = $user->phone_number;\n-                $message = 'Test SMS: A new event was published!';\n-\n-                SMSService::send($number, $message);\n-            }\n-\n-            return redirect()->back()->with('success', 'Initiative/Event Added!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Creation Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while creating initiative/event.');\n-        }\n-    }\n-\n-    //function to show specific data viewed in training\n-    public function viewTrainingDetails($id){\n-        $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n-        $isFinished = now()->greaterThan($training->date);\n-        $sectors = Sector::all();      \n-        $participants = Participant::all();\n-\n-        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n-    }\n-\n-    //function to edit info of the grant\n-    public function editTrainingInfo(Request $request, $id){\n-        \n-        try{\n-            // validate the form data/input\n-            $request->validate([\n-                'event_name' => 'required|string|max:255',\n-                'sector' => 'required|exists:sectors,id',\n-                'description' => 'nullable|string',\n-                'venue' => 'required|string|max:255',\n-                'date' => 'required|date',\n-                'time' => 'required|date_format:H:i',\n-            ]);\n-\n-            $training = Training::findOrFail($id);\n-\n-            //store to table 'grants'\n-            $training->update([\n-                'title' => $request->event_name,\n-                'sector_id' => $request->sector,\n-                'description'   => $request->description,\n-                'venue' => $request->venue,\n-                'date' => $request->date,\n-                'time' => $request->time,\n-            ]);\n-\n-            //handle the file upload\n-            if ($request->hasFile('event_image')) {\n-                $file = $request->file('event_image');\n-                $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n-\n-                // replace old file if new file is inputed\n-                $training->documents()->delete();\n-\n-                $training->documents()->create([\n-                    'file_path'  => $path,\n-                    'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n-                ]);\n-            }\n-\n-            // Attach requirements (if any selected)\n-            if ($request->has('requirements')) {\n-                $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n-            }\n-\n-            return redirect()->back()->with('success', 'Training Updated!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Update Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while updating initiative/event.');\n-        }\n-    }\n-\n-     //delete Training\n-    public function deleteTraining($id){\n-        try{\n-            $training = Training::findOrFail($id);\n-\n-            $training->delete();\n-\n-            return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n-        }catch(\\Exception $error){\n-            Log::error('Event Deletion Error: ' . $error->getMessage());\n-            return redirect()->back()->with('error', 'Something went wrong while deleting initiative/event.');\n-        }\n-    }\n-}\n"
                },
                {
                    "date": 1763839617431,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,23 +166,6 @@\n \n     //=============================\n     // FOR SCAN ATTENDANCE\n     //=============================\n-    public function scanQrUser($qr)\n-{\n-    $user = UserInfo::where('qr_code', $qr)->first();\n-\n-    if (!$user) {\n-        return response()->json([\n-            'success' => false,\n-            'message' => 'User not found'\n-        ]);\n-    }\n-\n-    return response()->json([\n-        'success' => true,\n-        'id' => $user->user_id,\n-        'name' => $user->name\n-    ]);\n+    \n }\n-\n-}\n"
                },
                {
                    "date": 1763839693715,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,6 +166,31 @@\n \n     //=============================\n     // FOR SCAN ATTENDANCE\n     //=============================\n-    \n+    public function scanQrUser($qr)\n+{\n+    // QR contains user_id\n+    $userId = $qr;\n+\n+    // Find participant with this user\n+    $participant = \\DB::table(\"participants\")\n+        ->join(\"users\", \"participants.user_id\", \"=\", \"users.id\")\n+        ->where(\"participants.user_id\", $userId)\n+        ->select(\"users.id as member_id\", \"users.first_name\", \"users.last_name\")\n+        ->first();\n+\n+    if (!$participant) {\n+        return response()->json([\n+            \"success\" => false,\n+            \"message\" => \"User is not a participant\"\n+        ]);\n+    }\n+\n+    return response()->json([\n+        \"success\" => true,\n+        \"member_id\" => $participant->member_id,\n+        \"name\" => $participant->first_name . \" \" . $participant->last_name\n+    ]);\n }\n+\n+}\n"
                },
                {
                    "date": 1763840049564,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,31 +166,36 @@\n \n     //=============================\n     // FOR SCAN ATTENDANCE\n     //=============================\n-    public function scanQrUser($qr)\n-{\n-    // QR contains user_id\n-    $userId = $qr;\n+    \n+    public function scanUser($qr)\n+    {\n+        // Find user by QR code\n+        $userInfo = UserInfo::where('qr_code', $qr)->first();\n \n-    // Find participant with this user\n-    $participant = \\DB::table(\"participants\")\n-        ->join(\"users\", \"participants.user_id\", \"=\", \"users.id\")\n-        ->where(\"participants.user_id\", $userId)\n-        ->select(\"users.id as member_id\", \"users.first_name\", \"users.last_name\")\n-        ->first();\n+        if (!$userInfo) {\n+            return response()->json([\n+                'success' => false,\n+                'message' => 'QR not registered'\n+            ], 404);\n+        }\n \n-    if (!$participant) {\n+        // Check if the user is enrolled in a training\n+        $participant = Participant::where('user_id', $userInfo->user_id)\n+                        ->where('training_id', request()->training_id) // pass training_id from frontend\n+                        ->first();\n+\n+        if (!$participant) {\n+            return response()->json([\n+                'success' => false,\n+                'message' => 'User is not in participant list'\n+            ], 404);\n+        }\n+\n         return response()->json([\n-            \"success\" => false,\n-            \"message\" => \"User is not a participant\"\n+            'success' => true,\n+            'member_id' => $userInfo->user_id,\n+            'name' => $userInfo->fname . ' ' . $userInfo->lname,\n         ]);\n     }\n-\n-    return response()->json([\n-        \"success\" => true,\n-        \"member_id\" => $participant->member_id,\n-        \"name\" => $participant->first_name . \" \" . $participant->last_name\n-    ]);\n }\n-\n-}\n"
                },
                {
                    "date": 1763840391155,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -167,35 +167,6 @@\n     //=============================\n     // FOR SCAN ATTENDANCE\n     //=============================\n     \n-    public function scanUser($qr)\n-    {\n-        // Find user by QR code\n-        $userInfo = UserInfo::where('qr_code', $qr)->first();\n-\n-        if (!$userInfo) {\n-            return response()->json([\n-                'success' => false,\n-                'message' => 'QR not registered'\n-            ], 404);\n-        }\n-\n-        // Check if the user is enrolled in a training\n-        $participant = Participant::where('user_id', $userInfo->user_id)\n-                        ->where('training_id', request()->training_id) // pass training_id from frontend\n-                        ->first();\n-\n-        if (!$participant) {\n-            return response()->json([\n-                'success' => false,\n-                'message' => 'User is not in participant list'\n-            ], 404);\n-        }\n-\n-        return response()->json([\n-            'success' => true,\n-            'member_id' => $userInfo->user_id,\n-            'name' => $userInfo->fname . ' ' . $userInfo->lname,\n-        ]);\n-    }\n+    \n }\n"
                }
            ],
            "date": 1763809092837,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers\\Web;\n\nuse App\\Http\\Controllers\\Controller;\nuse App\\Models\\Participant;\nuse App\\Models\\Sector;\nuse App\\Models\\Training;\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\n\nclass TrainingController extends Controller\n{\n    //show member with documents (if any)\n    public function showTrainings(){\n        return Training::with('documents', 'sector')->get();\n    }\n\n    public function showSectors(){\n        return Sector::all();\n    }\n\n    //pass the 'members' variable to the members page for data display\n    public function displayTraining(){\n        $trainings = $this->showTrainings();\n        $sectors = $this->showSectors();\n        $upcomingEvents = Training::whereDate('date', '>=', now())->count();\n        $completedEvents = Training::whereDate('date', '<', now())->count();\n\n        return view('swisa-admin.training-workshop', compact('trainings', 'sectors', 'upcomingEvents', 'completedEvents'));\n    }\n\n    //add event function\n    public function addTraining(Request $request){\n        // validate the form data/input\n        $request->validate([\n            'event_name' => 'required|string|max:255',\n            'sector' => 'required|exists:sectors,id',\n            'description' => 'nullable|string',\n            'venue' => 'required|string|max:255',\n            'date' => 'required|date',\n            'time' => 'required|date_format:H:i',\n        ]);\n\n        //store to table 'training'\n        $event = Training::create([\n            'title' => $request->event_name,\n            'sector_id' => $request->sector,\n            'description'   => $request->description,\n            'venue' => $request->venue,\n            'date' => $request->date,\n            'time' => $request->time,\n        ]);\n\n        //handle the file upload\n        if ($request->hasFile('event_image')) {\n            $file = $request->file('event_image');\n            $path = $file->store('events', 'public'); // saves in storage/app/public/events\n\n            $event->documents()->create([\n                'file_path'  => $path,\n                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n            ]);\n        }\n\n        return redirect()->back()->with('success', 'Grant Added!');\n    }\n\n    //function to show specific data viewed in training\n//function to show specific data viewed in training\n    public function viewTrainingDetails($id){\n        $training = Training::with(['sector', 'documents', 'participants'])->findOrFail($id);\n        $isFinished = now()->greaterThan($training->date);\n        $sectors = Sector::all();      \n        $participants = Participant::all();\n\n        return view('swisa-admin.view-training', compact('training', 'sectors', 'participants', 'isFinished'));\n    }\n\n    //function to edit info of the grant\n    public function editTrainingInfo(Request $request, $id){\n        \n        // validate the form data/input\n        $request->validate([\n            'event_name' => 'required|string|max:255',\n            'sector' => 'required|exists:sectors,id',\n            'description' => 'nullable|string',\n            'venue' => 'required|string|max:255',\n            'date' => 'required|date',\n            'time' => 'required|date_format:H:i',\n        ]);\n\n        $training = Training::findOrFail($id);\n\n        //store to table 'grants'\n        $training->update([\n            'title' => $request->event_name,\n            'sector_id' => $request->sector,\n            'description'   => $request->description,\n            'venue' => $request->venue,\n            'date' => $request->date,\n            'time' => $request->time,\n        ]);\n\n        //handle the file upload\n        if ($request->hasFile('event_image')) {\n            $file = $request->file('event_image');\n            $path = $file->store('events', 'public'); // saves in storage/app/public/grants\n\n            // replace old file if new file is inputed\n            $training->documents()->delete();\n\n            $training->documents()->create([\n                'file_path'  => $path,\n                'file_name'  => $file->getClientOriginalName(), //gets the file name (e.g. docs.jpg)\n            ]);\n        }\n\n        // Attach requirements (if any selected)\n        if ($request->has('requirements')) {\n            $training->requirements()->sync($request->requirements); //syncs to the pivot table 'grant_requirements'\n        }\n\n        return redirect()->back()->with('success', 'Training Updated!');\n    }\n\n     //delete Training\n    public function deleteTraining($id){\n        $training = Training::findOrFail($id);\n\n        $training->delete();\n\n        return redirect()->route('training-workshop')->with('success', 'Training Deleted!');\n    }\n}\n"
        }
    ]
}