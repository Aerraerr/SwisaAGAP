{
    "sourceFile": "app/Http/Controllers/ReportsController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 26,
            "patches": [
                {
                    "date": 1764011733167,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764011945386,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,38 +6,29 @@\n use App\\Models\\Training;\n \n class ReportsController extends Controller\n {\n-    public function engagementReports()\n-    {\n-        // Total registered participants across all trainings\n-        $totalParticipants = Participant::count();\n+public function engagementReports(Request $request)\n+{\n+    // Example queries - replace with your real logic\n \n-        // Total participants who actually attended (qr_scanned = 1)\n-        $totalCheckedIn = Participant::where('qr_scanned', 1)->count();\n+    $totalParticipants = Participant::count();\n \n-        // Average attendance (avoid division by zero)\n-        $averageAttendance = $totalParticipants > 0\n-            ? round(($totalCheckedIn / $totalParticipants) * 100, 2)\n-            : 0;\n+    $totalCheckedIn = Participant::where('is_present', 1)->count();\n \n-        // Determine the most attended training\n-        $topTraining = Training::withCount([\n-            'participants as attendees_count' => function ($q) {\n-                $q->where('qr_scanned', 1);\n-            }\n-        ])\n-        ->orderBy('attendees_count', 'desc')\n-        ->first();\n+    $averageAttendance = $totalParticipants > 0\n+        ? round(($totalCheckedIn / $totalParticipants) * 100, 2)\n+        : 0;\n \n-        return response()->json([\n-            'average_attendance' => $averageAttendance,\n-            'total_participants' => $totalParticipants,\n-            'total_checked_in' => $totalCheckedIn,\n-            'top_training' => $topTraining ? [\n-                'title' => $topTraining->title,\n-                'attendees' => $topTraining->attendees_count,\n-                'date' => $topTraining->date,\n-            ] : null,\n-        ]);\n-    }\n+    $mostAttendedTraining = Training::withCount('participants')\n+        ->orderBy('participants_count', 'desc')\n+        ->value('title'); // or ->first()->title\n+\n+    return view('swisa-admin.reports.engagement', [\n+        'averageAttendance' => $averageAttendance,\n+        'totalRegistered' => $totalParticipants,\n+        'totalCheckedIn' => $totalCheckedIn,\n+        'mostAttendedTraining' => $mostAttendedTraining ?? '--'\n+    ]);\n }\n+\n+}\n"
                },
                {
                    "date": 1764012119092,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,29 +6,32 @@\n use App\\Models\\Training;\n \n class ReportsController extends Controller\n {\n-public function engagementReports(Request $request)\n+public function engagementReports()\n {\n-    // Example queries - replace with your real logic\n+    // Total registered participants (all participants in all trainings)\n+    $totalRegistered = Participant::count();\n \n-    $totalParticipants = Participant::count();\n+    // Total checked-in attendees\n+    $totalCheckedIn = Participant::whereNotNull('check_in_at')->count();\n \n-    $totalCheckedIn = Participant::where('is_present', 1)->count();\n-\n-    $averageAttendance = $totalParticipants > 0\n-        ? round(($totalCheckedIn / $totalParticipants) * 100, 2)\n+    // Average event attendance (%) = checked-in / registered\n+    $averageAttendance = $totalRegistered > 0\n+        ? round(($totalCheckedIn / $totalRegistered) * 100, 2)\n         : 0;\n \n+    // Most attended training\n     $mostAttendedTraining = Training::withCount('participants')\n-        ->orderBy('participants_count', 'desc')\n-        ->value('title'); // or ->first()->title\n+        ->orderByDesc('participants_count')\n+        ->first();\n \n     return view('swisa-admin.reports.engagement', [\n+        'totalRegistered' => $totalRegistered,\n+        'totalCheckedIn' => $totalCheckedIn,\n         'averageAttendance' => $averageAttendance,\n-        'totalRegistered' => $totalParticipants,\n-        'totalCheckedIn' => $totalCheckedIn,\n-        'mostAttendedTraining' => $mostAttendedTraining ?? '--'\n+        'mostAttendedTraining' => $mostAttendedTraining?->title ?? '--',\n     ]);\n }\n \n+\n }\n"
                },
                {
                    "date": 1764012163137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,32 +6,29 @@\n use App\\Models\\Training;\n \n class ReportsController extends Controller\n {\n-public function engagementReports()\n+public function engagementReports(Request $request)\n {\n-    // Total registered participants (all participants in all trainings)\n-    $totalRegistered = Participant::count();\n+    // Example queries - replace with your real logic\n \n-    // Total checked-in attendees\n-    $totalCheckedIn = Participant::whereNotNull('check_in_at')->count();\n+    $totalParticipants = Participant::count();\n \n-    // Average event attendance (%) = checked-in / registered\n-    $averageAttendance = $totalRegistered > 0\n-        ? round(($totalCheckedIn / $totalRegistered) * 100, 2)\n+    $totalCheckedIn = Participant::where('is_present', 1)->count();\n+\n+    $averageAttendance = $totalParticipants > 0\n+        ? round(($totalCheckedIn / $totalParticipants) * 100, 2)\n         : 0;\n \n-    // Most attended training\n     $mostAttendedTraining = Training::withCount('participants')\n-        ->orderByDesc('participants_count')\n-        ->first();\n+        ->orderBy('participants_count', 'desc')\n+        ->value('title'); // or ->first()->title\n \n     return view('swisa-admin.reports.engagement', [\n-        'totalRegistered' => $totalRegistered,\n+        'averageAttendance' => $averageAttendance,\n+        'totalRegistered' => $totalParticipants,\n         'totalCheckedIn' => $totalCheckedIn,\n-        'averageAttendance' => $averageAttendance,\n-        'mostAttendedTraining' => $mostAttendedTraining?->title ?? '--',\n+        'mostAttendedTraining' => $mostAttendedTraining ?? '--'\n     ]);\n }\n \n-\n }\n"
                },
                {
                    "date": 1764012375069,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,34 +1,19 @@\n <?php\n \n namespace App\\Http\\Controllers;\n \n-use App\\Models\\Participant;\n-use App\\Models\\Training;\n+use Illuminate\\Http\\Request;\n+use App\\Models\\Report;\n \n class ReportsController extends Controller\n {\n-public function engagementReports(Request $request)\n-{\n-    // Example queries - replace with your real logic\n-\n-    $totalParticipants = Participant::count();\n-\n-    $totalCheckedIn = Participant::where('is_present', 1)->count();\n-\n-    $averageAttendance = $totalParticipants > 0\n-        ? round(($totalCheckedIn / $totalParticipants) * 100, 2)\n-        : 0;\n-\n-    $mostAttendedTraining = Training::withCount('participants')\n-        ->orderBy('participants_count', 'desc')\n-        ->value('title'); // or ->first()->title\n-\n-    return view('swisa-admin.reports.engagement', [\n-        'averageAttendance' => $averageAttendance,\n-        'totalRegistered' => $totalParticipants,\n-        'totalCheckedIn' => $totalCheckedIn,\n-        'mostAttendedTraining' => $mostAttendedTraining ?? '--'\n-    ]);\n+    public function engagement(Request $request)\n+    {\n+        return view('swisa-admin.reports.engagement', [\n+            'averageAttendance' => Report::averageEventAttendance(),\n+            'totalRegistered'   => Report::totalRegisteredParticipants(),\n+            'totalCheckedIn'    => Report::totalCheckedIn(),\n+            'mostAttended'      => Report::mostAttendedTraining() ?? '--',\n+        ]);\n+    }\n }\n-\n-}\n"
                },
                {
                    "date": 1764012454724,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,12 +8,18 @@\n class ReportsController extends Controller\n {\n     public function engagement(Request $request)\n     {\n-        return view('swisa-admin.reports.engagement', [\n-            'averageAttendance' => Report::averageEventAttendance(),\n-            'totalRegistered'   => Report::totalRegisteredParticipants(),\n-            'totalCheckedIn'    => Report::totalCheckedIn(),\n-            'mostAttended'      => Report::mostAttendedTraining() ?? '--',\n+        return response()->json([\n+            'average_attendance' => Report::averageEventAttendance(),\n+            'total_participants' => Report::totalRegisteredParticipants(),\n+            'total_checked_in' => Report::totalCheckedIn(),\n+            'top_training' => [\n+                'title' => Report::mostAttendedTraining(),\n+                'attendees' => \\App\\Models\\Training::withCount('participants')\n+                                ->orderByDesc('participants_count')\n+                                ->first()?->participants_count ?? 0,\n+            ],\n         ]);\n     }\n }\n+\n"
                },
                {
                    "date": 1764012607379,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,14 +12,10 @@\n         return response()->json([\n             'average_attendance' => Report::averageEventAttendance(),\n             'total_participants' => Report::totalRegisteredParticipants(),\n             'total_checked_in' => Report::totalCheckedIn(),\n-            'top_training' => [\n-                'title' => Report::mostAttendedTraining(),\n-                'attendees' => \\App\\Models\\Training::withCount('participants')\n-                                ->orderByDesc('participants_count')\n-                                ->first()?->participants_count ?? 0,\n-            ],\n+            'total_qr_scanned' => Report::totalQRScanned(),\n+            'top_training' => Report::mostAttendedTraining(),\n+            'training_breakdown' => Report::trainingBreakdown()\n         ]);\n     }\n }\n-\n"
                },
                {
                    "date": 1764155274694,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,34 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use App\\Models\\Report;\n+\n+class ReportsController extends Controller\n+{\n+    public function engagement(Request $request)\n+    {\n+        return response()->json([\n+            'average_attendance' => Report::averageEventAttendance(),\n+            'total_participants' => Report::totalRegisteredParticipants(),\n+            'total_checked_in' => Report::totalCheckedIn(),\n+            'total_qr_scanned' => Report::totalQRScanned(),\n+            'top_training' => Report::mostAttendedTraining(),\n+            'training_breakdown' => Report::trainingBreakdown()\n+        ]);\n+    }\n+\n+        // New method to fetch all feedback\n+    public function feedback(Request $request)\n+    {\n+        // Get all feedback with their related users, latest first\n+        $feedbacks = Feedback::with('user')->latest()->get();\n+\n+        // Return as JSON\n+        return response()->json([\n+            'success' => true,\n+            'data' => $feedbacks\n+        ]);\n+    }\n+}\n"
                },
                {
                    "date": 1764155287641,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,35 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use App\\Models\\Report;\n+use App\\Models\\Feedback;\n+\n+class ReportsController extends Controller\n+{\n+    public function engagement(Request $request)\n+    {\n+        return response()->json([\n+            'average_attendance' => Report::averageEventAttendance(),\n+            'total_participants' => Report::totalRegisteredParticipants(),\n+            'total_checked_in' => Report::totalCheckedIn(),\n+            'total_qr_scanned' => Report::totalQRScanned(),\n+            'top_training' => Report::mostAttendedTraining(),\n+            'training_breakdown' => Report::trainingBreakdown()\n+        ]);\n+    }\n+\n+    // New method to fetch all feedback\n+    public function feedback(Request $request)\n+    {\n+        // Get all feedback with their related users, latest first\n+        $feedbacks = Feedback::with('user')->latest()->get();\n+\n+        // Return as JSON\n+        return response()->json([\n+            'success' => true,\n+            'data' => $feedbacks\n+        ]);\n+    }\n+}\n"
                },
                {
                    "date": 1764155409327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,23 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use App\\Models\\Report;\n+\n+class ReportsController extends Controller\n+{\n+    public function engagement(Request $request)\n+    {\n+        return response()->json([\n+            'average_attendance' => Report::averageEventAttendance(),\n+            'total_participants' => Report::totalRegisteredParticipants(),\n+            'total_checked_in' => Report::totalCheckedIn(),\n+            'total_qr_scanned' => Report::totalQRScanned(),\n+            'top_training' => Report::mostAttendedTraining(),\n+            'training_breakdown' => Report::trainingBreakdown()\n+        ]);\n+    }\n+\n+    \n+}\n"
                },
                {
                    "date": 1764155595392,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,31 +3,8 @@\n namespace App\\Http\\Controllers;\n \n use Illuminate\\Http\\Request;\n use App\\Models\\Report;\n-\n-class ReportsController extends Controller\n-{\n-    public function engagement(Request $request)\n-    {\n-        return response()->json([\n-            'average_attendance' => Report::averageEventAttendance(),\n-            'total_participants' => Report::totalRegisteredParticipants(),\n-            'total_checked_in' => Report::totalCheckedIn(),\n-            'total_qr_scanned' => Report::totalQRScanned(),\n-            'top_training' => Report::mostAttendedTraining(),\n-            'training_breakdown' => Report::trainingBreakdown()\n-        ]);\n-    }\n-\n-    \n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use App\\Models\\Report;\n use App\\Models\\Feedback;\n \n class ReportsController extends Controller\n {\n@@ -42,72 +19,18 @@\n             'training_breakdown' => Report::trainingBreakdown()\n         ]);\n     }\n \n-    // New method to fetch all feedback\n-    public function feedback(Request $request)\n-    {\n-        // Get all feedback with their related users, latest first\n-        $feedbacks = Feedback::with('user')->latest()->get();\n \n-        // Return as JSON\n-        return response()->json([\n-            'success' => true,\n-            'data' => $feedbacks\n-        ]);\n-    }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use App\\Models\\Report;\n-\n-class ReportsController extends Controller\n+public function feedback()\n {\n-    public function engagement(Request $request)\n-    {\n-        return response()->json([\n-            'average_attendance' => Report::averageEventAttendance(),\n-            'total_participants' => Report::totalRegisteredParticipants(),\n-            'total_checked_in' => Report::totalCheckedIn(),\n-            'total_qr_scanned' => Report::totalQRScanned(),\n-            'top_training' => Report::mostAttendedTraining(),\n-            'training_breakdown' => Report::trainingBreakdown()\n-        ]);\n-    }\n+    $feedbacks = Feedback::with('user')->latest()->get();\n \n-        // New method to fetch all feedback\n-    public function feedback(Request $request)\n-    {\n-        // Get all feedback with their related users, latest first\n-        $feedbacks = Feedback::with('user')->latest()->get();\n-\n-        // Return as JSON\n-        return response()->json([\n-            'success' => true,\n-            'data' => $feedbacks\n-        ]);\n-    }\n+    return response()->json([\n+        'success' => true,\n+        'data' => $feedbacks\n+    ]);\n }\n-<?php\n \n-namespace App\\Http\\Controllers;\n \n-use Illuminate\\Http\\Request;\n-use App\\Models\\Report;\n-\n-class ReportsController extends Controller\n-{\n-    public function engagement(Request $request)\n-    {\n-        return response()->json([\n-            'average_attendance' => Report::averageEventAttendance(),\n-            'total_participants' => Report::totalRegisteredParticipants(),\n-            'total_checked_in' => Report::totalCheckedIn(),\n-            'total_qr_scanned' => Report::totalQRScanned(),\n-            'top_training' => Report::mostAttendedTraining(),\n-            'training_breakdown' => Report::trainingBreakdown()\n-        ]);\n-    }\n+    \n }\n"
                },
                {
                    "date": 1764155720038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,17 +20,14 @@\n         ]);\n     }\n \n \n-public function feedback()\n+public function showReports()\n {\n     $feedbacks = Feedback::with('user')->latest()->get();\n-\n-    return response()->json([\n-        'success' => true,\n-        'data' => $feedbacks\n-    ]);\n+    return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n }\n \n \n+\n     \n }\n"
                },
                {
                    "date": 1764155810474,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,8 +7,19 @@\n use App\\Models\\Feedback;\n \n class ReportsController extends Controller\n {\n+    use App\\Models\\Feedback;\n+\n+public function index()\n+{\n+    // Fetch all feedback with user info\n+    $feedbacks = Feedback::with('user')->latest()->get();\n+\n+    // Return the report blade with feedbacks\n+    return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n+}\n+\n     public function engagement(Request $request)\n     {\n         return response()->json([\n             'average_attendance' => Report::averageEventAttendance(),\n"
                },
                {
                    "date": 1764155931166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,24 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use App\\Models\\Report;\n+\n+class ReportsController extends Controller\n+{\n+    public function engagement(Request $request)\n+    {\n+        return response()->json([\n+            'average_attendance' => Report::averageEventAttendance(),\n+            'total_participants' => Report::totalRegisteredParticipants(),\n+            'total_checked_in' => Report::totalCheckedIn(),\n+            'total_qr_scanned' => Report::totalQRScanned(),\n+            'top_training' => Report::mostAttendedTraining(),\n+            'training_breakdown' => Report::trainingBreakdown()\n+        ]);\n+    }\n+    \n+\n+    \n+}\n"
                },
                {
                    "date": 1764162012116,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,47 +3,19 @@\n namespace App\\Http\\Controllers;\n \n use Illuminate\\Http\\Request;\n use App\\Models\\Report;\n+use App\\Models\\Feedback;\n \n class ReportsController extends Controller\n {\n-    public function engagement(Request $request)\n+    public function index()\n     {\n-        return response()->json([\n-            'average_attendance' => Report::averageEventAttendance(),\n-            'total_participants' => Report::totalRegisteredParticipants(),\n-            'total_checked_in' => Report::totalCheckedIn(),\n-            'total_qr_scanned' => Report::totalQRScanned(),\n-            'top_training' => Report::mostAttendedTraining(),\n-            'training_breakdown' => Report::trainingBreakdown()\n-        ]);\n+        $feedbacks = Feedback::with('user')->latest()->get();\n+\n+        return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n     }\n-    \n \n-    \n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use App\\Models\\Report;\n-use App\\Models\\Feedback;\n-\n-class ReportsController extends Controller\n-{\n-    use App\\Models\\Feedback;\n-\n-public function index()\n-{\n-    // Fetch all feedback with user info\n-    $feedbacks = Feedback::with('user')->latest()->get();\n-\n-    // Return the report blade with feedbacks\n-    return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n-}\n-\n     public function engagement(Request $request)\n     {\n         return response()->json([\n             'average_attendance' => Report::averageEventAttendance(),\n@@ -53,16 +25,5 @@\n             'top_training' => Report::mostAttendedTraining(),\n             'training_breakdown' => Report::trainingBreakdown()\n         ]);\n     }\n-\n-\n-public function showReports()\n-{\n-    $feedbacks = Feedback::with('user')->latest()->get();\n-    return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n }\n-\n-\n-\n-    \n-}\n"
                },
                {
                    "date": 1764162273003,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,15 +7,17 @@\n use App\\Models\\Feedback;\n \n class ReportsController extends Controller\n {\n-    public function index()\n-    {\n-        $feedbacks = Feedback::with('user')->latest()->get();\n+use App\\Models\\Feedback;\n \n-        return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n-    }\n+public function index() {\n+    $feedbacks = Feedback::with('user')->latest()->get();\n \n+    return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n+}\n+\n+\n     public function engagement(Request $request)\n     {\n         return response()->json([\n             'average_attendance' => Report::averageEventAttendance(),\n"
                },
                {
                    "date": 1764162282591,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,17 +7,15 @@\n use App\\Models\\Feedback;\n \n class ReportsController extends Controller\n {\n-use App\\Models\\Feedback;\n+    public function index()\n+    {\n+        $feedbacks = Feedback::with('user')->latest()->get();\n \n-public function index() {\n-    $feedbacks = Feedback::with('user')->latest()->get();\n+        return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n+    }\n \n-    return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n-}\n-\n-\n     public function engagement(Request $request)\n     {\n         return response()->json([\n             'average_attendance' => Report::averageEventAttendance(),\n"
                },
                {
                    "date": 1764162362513,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,19 +3,13 @@\n namespace App\\Http\\Controllers;\n \n use Illuminate\\Http\\Request;\n use App\\Models\\Report;\n-use App\\Models\\Feedback;\n+use App\\Models\\Feedback; // add this\n \n class ReportsController extends Controller\n {\n-    public function index()\n-    {\n-        $feedbacks = Feedback::with('user')->latest()->get();\n-\n-        return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n-    }\n-\n+    // Existing engagement method\n     public function engagement(Request $request)\n     {\n         return response()->json([\n             'average_attendance' => Report::averageEventAttendance(),\n@@ -25,5 +19,15 @@\n             'top_training' => Report::mostAttendedTraining(),\n             'training_breakdown' => Report::trainingBreakdown()\n         ]);\n     }\n+\n+    // Add index method for the reports page\n+    public function index()\n+    {\n+        // Fetch all feedbacks to pass to the reports view\n+        $feedbacks = Feedback::with('user')->latest()->get();\n+\n+        return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n+    }\n }\n+\n"
                },
                {
                    "date": 1764162513318,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n     // Add index method for the reports page\n     public function index()\n     {\n         // Fetch all feedbacks to pass to the reports view\n-        $feedbacks = Feedback::with('user')->latest()->get();\n+        $feedbacks = Feedback::with('users')->latest()->get();\n \n         return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n     }\n }\n"
                },
                {
                    "date": 1764162532411,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,13 +3,11 @@\n namespace App\\Http\\Controllers;\n \n use Illuminate\\Http\\Request;\n use App\\Models\\Report;\n-use App\\Models\\Feedback; // add this\n \n class ReportsController extends Controller\n {\n-    // Existing engagement method\n     public function engagement(Request $request)\n     {\n         return response()->json([\n             'average_attendance' => Report::averageEventAttendance(),\n@@ -19,15 +17,8 @@\n             'top_training' => Report::mostAttendedTraining(),\n             'training_breakdown' => Report::trainingBreakdown()\n         ]);\n     }\n+    \n \n-    // Add index method for the reports page\n-    public function index()\n-    {\n-        // Fetch all feedbacks to pass to the reports view\n-        $feedbacks = Feedback::with('users')->latest()->get();\n-\n-        return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n-    }\n+    \n }\n-\n"
                },
                {
                    "date": 1764163157744,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,8 +17,20 @@\n             'top_training' => Report::mostAttendedTraining(),\n             'training_breakdown' => Report::trainingBreakdown()\n         ]);\n     }\n+    use App\\Models\\ReportFeedback;\n+\n+public function index()\n+{\n+    // Fetch feedbacks\n+    $feedbacks = ReportFeedback::with('user')\n+        ->orderBy('created_at', 'desc')\n+        ->get();\n+\n+    return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n+}\n+\n     \n \n     \n }\n"
                },
                {
                    "date": 1764163388312,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,36 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use App\\Models\\Report;\n+\n+class ReportsController extends Controller\n+{\n+    public function index()\n+{\n+    $feedbacks = ReportFeedback::with('user')\n+        ->orderBy('created_at', 'desc')\n+        ->get();\n+\n+    // pass to main report view\n+    return view('swisa-admin.admin-reports.report', [\n+        'feedbacks' => $feedbacks\n+    ]);\n+}\n+\n+    public function engagement(Request $request)\n+    {\n+        return response()->json([\n+            'average_attendance' => Report::averageEventAttendance(),\n+            'total_participants' => Report::totalRegisteredParticipants(),\n+            'total_checked_in' => Report::totalCheckedIn(),\n+            'total_qr_scanned' => Report::totalQRScanned(),\n+            'top_training' => Report::mostAttendedTraining(),\n+            'training_breakdown' => Report::trainingBreakdown()\n+        ]);\n+    }\n+    \n+\n+    \n+}\n"
                },
                {
                    "date": 1764163523210,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,25 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use App\\Models\\Report;\n+\n+class ReportsController extends Controller\n+{\n+    \n+    public function engagement(Request $request)\n+    {\n+        return response()->json([\n+            'average_attendance' => Report::averageEventAttendance(),\n+            'total_participants' => Report::totalRegisteredParticipants(),\n+            'total_checked_in' => Report::totalCheckedIn(),\n+            'total_qr_scanned' => Report::totalQRScanned(),\n+            'top_training' => Report::mostAttendedTraining(),\n+            'training_breakdown' => Report::trainingBreakdown()\n+        ]);\n+    }\n+    \n+\n+    \n+}\n"
                },
                {
                    "date": 1764163530496,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,36 @@\n+<?php\n+\n+namespace App\\Http\\Controllers;\n+\n+use Illuminate\\Http\\Request;\n+use App\\Models\\Report;\n+\n+class ReportsController extends Controller\n+{\n+    public function index()\n+{\n+    $feedbacks = ReportFeedback::with('user')\n+        ->orderBy('created_at', 'desc')\n+        ->get();\n+\n+    // pass to main report view\n+    return view('swisa-admin.admin-reports.report', [\n+        'feedbacks' => $feedbacks\n+    ]);\n+}\n+\n+    public function engagement(Request $request)\n+    {\n+        return response()->json([\n+            'average_attendance' => Report::averageEventAttendance(),\n+            'total_participants' => Report::totalRegisteredParticipants(),\n+            'total_checked_in' => Report::totalCheckedIn(),\n+            'total_qr_scanned' => Report::totalQRScanned(),\n+            'top_training' => Report::mostAttendedTraining(),\n+            'training_breakdown' => Report::trainingBreakdown()\n+        ]);\n+    }\n+    \n+\n+    \n+}\n"
                },
                {
                    "date": 1764163541597,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,101 +33,4 @@\n     \n \n     \n }\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use App\\Models\\Report;\n-\n-class ReportsController extends Controller\n-{\n-    \n-    public function engagement(Request $request)\n-    {\n-        return response()->json([\n-            'average_attendance' => Report::averageEventAttendance(),\n-            'total_participants' => Report::totalRegisteredParticipants(),\n-            'total_checked_in' => Report::totalCheckedIn(),\n-            'total_qr_scanned' => Report::totalQRScanned(),\n-            'top_training' => Report::mostAttendedTraining(),\n-            'training_breakdown' => Report::trainingBreakdown()\n-        ]);\n-    }\n-    \n-\n-    \n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use App\\Models\\Report;\n-\n-class ReportsController extends Controller\n-{\n-    public function index()\n-{\n-    $feedbacks = ReportFeedback::with('user')\n-        ->orderBy('created_at', 'desc')\n-        ->get();\n-\n-    // pass to main report view\n-    return view('swisa-admin.admin-reports.report', [\n-        'feedbacks' => $feedbacks\n-    ]);\n-}\n-\n-    public function engagement(Request $request)\n-    {\n-        return response()->json([\n-            'average_attendance' => Report::averageEventAttendance(),\n-            'total_participants' => Report::totalRegisteredParticipants(),\n-            'total_checked_in' => Report::totalCheckedIn(),\n-            'total_qr_scanned' => Report::totalQRScanned(),\n-            'top_training' => Report::mostAttendedTraining(),\n-            'training_breakdown' => Report::trainingBreakdown()\n-        ]);\n-    }\n-    \n-\n-    \n-}\n-<?php\n-\n-namespace App\\Http\\Controllers;\n-\n-use Illuminate\\Http\\Request;\n-use App\\Models\\Report;\n-\n-class ReportsController extends Controller\n-{\n-    public function engagement(Request $request)\n-    {\n-        return response()->json([\n-            'average_attendance' => Report::averageEventAttendance(),\n-            'total_participants' => Report::totalRegisteredParticipants(),\n-            'total_checked_in' => Report::totalCheckedIn(),\n-            'total_qr_scanned' => Report::totalQRScanned(),\n-            'top_training' => Report::mostAttendedTraining(),\n-            'training_breakdown' => Report::trainingBreakdown()\n-        ]);\n-    }\n-    use App\\Models\\ReportFeedback;\n-\n-public function index()\n-{\n-    // Fetch feedbacks\n-    $feedbacks = ReportFeedback::with('user')\n-        ->orderBy('created_at', 'desc')\n-        ->get();\n-\n-    return view('swisa-admin.admin-reports.report', compact('feedbacks'));\n-}\n-\n-    \n-\n-    \n-}\n"
                },
                {
                    "date": 1764163558189,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n namespace App\\Http\\Controllers;\n \n use Illuminate\\Http\\Request;\n use App\\Models\\Report;\n+use App\\Models\\Feedback;\n \n class ReportsController extends Controller\n {\n     public function index()\n"
                },
                {
                    "date": 1764163732265,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,24 +3,12 @@\n namespace App\\Http\\Controllers;\n \n use Illuminate\\Http\\Request;\n use App\\Models\\Report;\n-use App\\Models\\Feedback;\n \n class ReportsController extends Controller\n {\n-    public function index()\n-{\n-    $feedbacks = ReportFeedback::with('user')\n-        ->orderBy('created_at', 'desc')\n-        ->get();\n-\n-    // pass to main report view\n-    return view('swisa-admin.admin-reports.report', [\n-        'feedbacks' => $feedbacks\n-    ]);\n-}\n-\n+    \n     public function engagement(Request $request)\n     {\n         return response()->json([\n             'average_attendance' => Report::averageEventAttendance(),\n"
                }
            ],
            "date": 1764011733167,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\Participant;\nuse App\\Models\\Training;\n\nclass ReportsController extends Controller\n{\n    public function engagementReports()\n    {\n        // Total registered participants across all trainings\n        $totalParticipants = Participant::count();\n\n        // Total participants who actually attended (qr_scanned = 1)\n        $totalCheckedIn = Participant::where('qr_scanned', 1)->count();\n\n        // Average attendance (avoid division by zero)\n        $averageAttendance = $totalParticipants > 0\n            ? round(($totalCheckedIn / $totalParticipants) * 100, 2)\n            : 0;\n\n        // Determine the most attended training\n        $topTraining = Training::withCount([\n            'participants as attendees_count' => function ($q) {\n                $q->where('qr_scanned', 1);\n            }\n        ])\n        ->orderBy('attendees_count', 'desc')\n        ->first();\n\n        return response()->json([\n            'average_attendance' => $averageAttendance,\n            'total_participants' => $totalParticipants,\n            'total_checked_in' => $totalCheckedIn,\n            'top_training' => $topTraining ? [\n                'title' => $topTraining->title,\n                'attendees' => $topTraining->attendees_count,\n                'date' => $topTraining->date,\n            ] : null,\n        ]);\n    }\n}\n"
        }
    ]
}