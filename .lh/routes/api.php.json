{
    "sourceFile": "routes/api.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 27,
            "patches": [
                {
                    "date": 1763537151350,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763537677118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,4 +117,5 @@\n \r\n \r\n \r\n \r\n+\r\n"
                },
                {
                    "date": 1763539293602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,9 +104,12 @@\n //============================================\r\n use App\\Http\\Controllers\\mobile\\MobileChatController;\r\n \r\n Route::middleware('auth:sanctum')->prefix('mobile/chat')->group(function () {\r\n-    Route::post('/get-or-create', [MobileChatController::class, 'getOrCreateChat']);\r\n+    // Changed from post /get-or-create to get /get (no creation, just fetch)\r\n+    Route::get('/get', [MobileChatController::class, 'getChat']);\r\n+\r\n+    // Keep existing message endpoints\r\n     Route::post('/send', [MobileChatController::class, 'sendMessage']);\r\n     Route::get('/history/{chat_id}', [MobileChatController::class, 'getChatHistory']);\r\n     Route::get('/quick-replies/{role_id}', [MobileChatController::class, 'getQuickReplies']);\r\n     Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n"
                },
                {
                    "date": 1763565495476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,76 +10,96 @@\n use App\\Http\\Controllers\\mobile\\TrainingsController;\r\n use App\\Http\\Controllers\\mobile\\MemberFaqsController;\r\n use App\\Http\\Controllers\\mobile\\NotificationController;\r\n use App\\Http\\Controllers\\mobile\\CreditScoreController; \r\n-use App\\Http\\Controllers\\Api\\DocumentController;\r\n-use App\\Http\\Controllers\\Api\\ProfileController;\r\n-use App\\Http\\Controllers\\Api\\MembershipController;\r\n-use App\\Http\\Controllers\\Api\\GrantController;\r\n-use App\\Http\\Controllers\\Api\\GrantApplicationController;\r\n+use App\\Http\\Controllers\\mobile\\DocumentController;\r\n+use App\\Http\\Controllers\\mobile\\ProfileController;\r\n+use App\\Http\\Controllers\\mobile\\MembershipController;\r\n+use App\\Http\\Controllers\\mobile\\SectorController;\r\n+use App\\Http\\Controllers\\mobile\\GrantController;\r\n+use App\\Http\\Controllers\\mobile\\GrantApplicationController;\r\n+use App\\Http\\Controllers\\mobile\\OtpController;\r\n \r\n // Public routes\r\n Route::prefix('mobile')->group(function (Router $router) {\r\n     // PUBLIC AUTH ROUTES\r\n     $router->post('/register', [AuthController::class, 'register']);\r\n     $router->post('/login', [AuthController::class, 'login']);\r\n \r\n+    Route::post('/otp/send', [OtpController::class, 'sendOtp']);\r\n+    Route::post('/otp/verify', [OtpController::class, 'verifyOtp']);\r\n+    Route::post('/reset-password', [AuthController::class, 'resetPassword']);\r\n+\r\n     // PROTECTED ROUTES (Requires Sanctum token)\r\n     $router->middleware('auth:sanctum')->group(function () use ($router) {\r\n         // Test route to get the authenticated user\r\n         $router->get('/user', function (Request $request) {\r\n             return $request->user();\r\n-        });\r\n-        \r\n+        });        \r\n         $router->post('/logout', [AuthController::class, 'logout']);\r\n         $router->post('/change-password', [AuthController::class, 'changePassword']);\r\n+\r\n+        Route::get('/grants', [GrantController::class, 'index']);\r\n+\r\n+        Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n+        Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n+        Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n+\r\n     });\r\n });\r\n \r\n // Member FAQs (public)\r\n Route::get('/member/faqs', [MemberFaqsController::class, 'index']);\r\n \r\n // Protected routes requiring authentication\r\n-Route::middleware('auth:sanctum')->group(function() {\r\n-    // Announcements\r\n+Route::middleware(['auth:sanctum'])->group(function() {\r\n+\r\n+     // Announcements\r\n     Route::get('/announcements', [AnnouncementController::class, 'index']);\r\n+    Route::post('/announcements', [AnnouncementController::class, 'store']);\r\n+\r\n     // Credit Score\r\n       Route::get('/credit-score', [CreditScoreController::class, 'show']);\r\n-    /*\r\n+ \r\n     // Profile\r\n     Route::get('/profile', [ProfileController::class, 'show']);\r\n-    Route::post('/profile/picture', [ProfileController::class, 'updatePicture']);\r\n-\r\n-    // Membership\r\n-    Route::post('/membership-application', [MembershipController::class, 'store']);\r\n    \r\n-    // Grants\r\n-    Route::get('/grants', [GrantController::class, 'index']);\r\n+    Route::get('/sectors', [SectorController::class, 'index']);\r\n \r\n-    // Grant Applications\r\n-    Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n-    Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n-    Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n-\r\n     // Document Management\r\n-    Route::post('/documents/upload', [DocumentController::class, 'upload']);\r\n     Route::get('/applications/{applicationId}/documents', [DocumentController::class, 'index']);\r\n     Route::get('/documents/{id}', [DocumentController::class, 'show']);\r\n     Route::get('/documents/{id}/download', [DocumentController::class, 'download']);\r\n     Route::delete('/documents/{id}', [DocumentController::class, 'destroy']);\r\n-    */\r\n+    \r\n+    // Grant Applications\r\n+    Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n+    Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n \r\n-    // Notifications\r\n-    Route::prefix('notifications')->group(function () {\r\n+     // Notifications\r\n+        Route::prefix('notifications')->group(function () {\r\n         Route::get('/', [NotificationController::class, 'index']);\r\n         Route::patch('/{id}/read', [NotificationController::class, 'markAsRead']);\r\n         Route::get('/unread', [NotificationController::class, 'hasUnread']);\r\n         Route::patch('/{id}/unread', [NotificationController::class, 'markAsUnread']);\r\n         Route::delete('/{id}', [NotificationController::class, 'destroy']);\r\n     });\r\n+\r\n });\r\n \r\n-// Trainings routes (protected)\r\n+    // With rate limit\r\n+  $router->middleware('auth:sanctum', 'throttle:10,1')->group(function () use ($router) { \r\n+    // Profile \r\n+     Route::post('/profile/picture', [ProfileController::class, 'updatePicture']);\r\n+     // Membership \r\n+    Route::post('/membership-application', [MembershipController::class, 'store']);\r\n+     // Grant Applications\r\n+    Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n+       // Document Management\r\n+    Route::post('/documents/upload', [DocumentController::class, 'upload']);\r\n+  });\r\n+\r\n+// Trainings routes (protected sanctum auth)\r\n Route::prefix('mobile')->middleware('auth:sanctum')->group(function () {\r\n     Route::get('/trainings', [TrainingsController::class, 'index']);\r\n     Route::get('/myevents', [TrainingsController::class, 'myEvents']);\r\n     Route::post('/trainings/{trainingId}/attend', [TrainingsController::class, 'attend']);\r\n@@ -98,8 +118,11 @@\n         'message' => 'These are the current settings your server is using.'\r\n     ]);\r\n });\r\n \r\n+\r\n+\r\n+\r\n //============================================\r\n // FOR CHAT \r\n //============================================\r\n use App\\Http\\Controllers\\mobile\\MobileChatController;\r\n@@ -113,12 +136,4 @@\n     Route::get('/history/{chat_id}', [MobileChatController::class, 'getChatHistory']);\r\n     Route::get('/quick-replies/{role_id}', [MobileChatController::class, 'getQuickReplies']);\r\n     Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n });\r\n-\r\n-\r\n-\r\n-\r\n-\r\n-\r\n-\r\n-\r\n"
                },
                {
                    "date": 1763720583945,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,10 +119,8 @@\n     ]);\r\n });\r\n \r\n \r\n-\r\n-\r\n //============================================\r\n // FOR CHAT \r\n //============================================\r\n use App\\Http\\Controllers\\mobile\\MobileChatController;\r\n"
                },
                {
                    "date": 1763720599467,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -119,8 +119,10 @@\n     ]);\r\n });\r\n \r\n \r\n+\r\n+\r\n //============================================\r\n // FOR CHAT \r\n //============================================\r\n use App\\Http\\Controllers\\mobile\\MobileChatController;\r\n"
                },
                {
                    "date": 1764085804907,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,148 @@\n+<?php\r\n+\r\n+use Illuminate\\Support\\Facades\\Route;\r\n+use Illuminate\\Http\\Request;\r\n+use Illuminate\\Routing\\Router;\r\n+\r\n+// Controllers\r\n+use App\\Http\\Controllers\\mobile\\AuthController; \r\n+use App\\Http\\Controllers\\mobile\\AnnouncementController;\r\n+use App\\Http\\Controllers\\mobile\\TrainingsController;\r\n+use App\\Http\\Controllers\\mobile\\MemberFaqsController;\r\n+use App\\Http\\Controllers\\mobile\\NotificationController;\r\n+use App\\Http\\Controllers\\mobile\\CreditScoreController; \r\n+use App\\Http\\Controllers\\mobile\\DocumentController;\r\n+use App\\Http\\Controllers\\mobile\\ProfileController;\r\n+use App\\Http\\Controllers\\mobile\\MembershipController;\r\n+use App\\Http\\Controllers\\mobile\\SectorController;\r\n+use App\\Http\\Controllers\\mobile\\GrantController;\r\n+use App\\Http\\Controllers\\mobile\\GrantApplicationController;\r\n+use App\\Http\\Controllers\\mobile\\OtpController;\r\n+\r\n+// Public routes\r\n+Route::prefix('mobile')->group(function (Router $router) {\r\n+    // PUBLIC AUTH ROUTES\r\n+    $router->post('/register', [AuthController::class, 'register']);\r\n+    $router->post('/login', [AuthController::class, 'login']);\r\n+\r\n+    Route::post('/otp/send', [OtpController::class, 'sendOtp']);\r\n+    Route::post('/otp/verify', [OtpController::class, 'verifyOtp']);\r\n+    Route::post('/reset-password', [AuthController::class, 'resetPassword']);\r\n+\r\n+    // PROTECTED ROUTES (Requires Sanctum token)\r\n+    $router->middleware('auth:sanctum')->group(function () use ($router) {\r\n+        // Test route to get the authenticated user\r\n+        $router->get('/user', function (Request $request) {\r\n+            return $request->user();\r\n+        });        \r\n+        $router->post('/logout', [AuthController::class, 'logout']);\r\n+        $router->post('/change-password', [AuthController::class, 'changePassword']);\r\n+\r\n+        Route::get('/grants', [GrantController::class, 'index']);\r\n+\r\n+        Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n+        Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n+        Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n+\r\n+    });\r\n+});\r\n+\r\n+// Member FAQs (public)\r\n+Route::get('/member/faqs', [MemberFaqsController::class, 'index']);\r\n+\r\n+// Protected routes requiring authentication\r\n+Route::middleware(['auth:sanctum'])->group(function() {\r\n+\r\n+     // Announcements\r\n+    Route::get('/announcements', [AnnouncementController::class, 'index']);\r\n+    Route::post('/announcements', [AnnouncementController::class, 'store']);\r\n+\r\n+    // Credit Score\r\n+      Route::get('/credit-score', [CreditScoreController::class, 'show']);\r\n+ \r\n+    // Profile\r\n+    Route::get('/profile', [ProfileController::class, 'show']);\r\n+   \r\n+    Route::get('/sectors', [SectorController::class, 'index']);\r\n+\r\n+    // Document Management\r\n+    Route::get('/applications/{applicationId}/documents', [DocumentController::class, 'index']);\r\n+    Route::get('/documents/{id}', [DocumentController::class, 'show']);\r\n+    Route::get('/documents/{id}/download', [DocumentController::class, 'download']);\r\n+    Route::delete('/documents/{id}', [DocumentController::class, 'destroy']);\r\n+    \r\n+    // Grant Applications\r\n+    Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n+    Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n+\r\n+     // Notifications\r\n+        Route::prefix('notifications')->group(function () {\r\n+        Route::get('/', [NotificationController::class, 'index']);\r\n+        Route::patch('/{id}/read', [NotificationController::class, 'markAsRead']);\r\n+        Route::get('/unread', [NotificationController::class, 'hasUnread']);\r\n+        Route::patch('/{id}/unread', [NotificationController::class, 'markAsUnread']);\r\n+        Route::delete('/{id}', [NotificationController::class, 'destroy']);\r\n+    });\r\n+\r\n+});\r\n+\r\n+    // With rate limit\r\n+  $router->middleware('auth:sanctum', 'throttle:10,1')->group(function () use ($router) { \r\n+    // Profile \r\n+     Route::post('/profile/picture', [ProfileController::class, 'updatePicture']);\r\n+     // Membership \r\n+    Route::post('/membership-application', [MembershipController::class, 'store']);\r\n+     // Grant Applications\r\n+    Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n+       // Document Management\r\n+    Route::post('/documents/upload', [DocumentController::class, 'upload']);\r\n+  });\r\n+\r\n+// Trainings routes (protected sanctum auth)\r\n+Route::prefix('mobile')->middleware('auth:sanctum')->group(function () {\r\n+    Route::get('/trainings', [TrainingsController::class, 'index']);\r\n+    Route::get('/myevents', [TrainingsController::class, 'myEvents']);\r\n+    Route::post('/trainings/{trainingId}/attend', [TrainingsController::class, 'attend']);\r\n+    Route::get('/trainings/{trainingId}', [TrainingsController::class, 'show']);\r\n+    Route::delete('/trainings/{trainingId}/cancel', [TrainingsController::class, 'cancelAttendance']);\r\n+});\r\n+\r\n+// Debug route\r\n+Route::get('/check-php-config', function () {\r\n+    $uploadMax = ini_get('upload_max_filesize');\r\n+    $postMax = ini_get('post_max_size');\r\n+    \r\n+    return response()->json([\r\n+        'upload_max_filesize' => $uploadMax,\r\n+        'post_max_size' => $postMax,\r\n+        'message' => 'These are the current settings your server is using.'\r\n+    ]);\r\n+});\r\n+\r\n+\r\n+\r\n+\r\n+//============================================\r\n+// FOR CHAT \r\n+//============================================\r\n+use App\\Http\\Controllers\\mobile\\MobileChatController;\r\n+\r\n+Route::middleware('auth:sanctum')->prefix('mobile/chat')->group(function () {\r\n+    // Changed from post /get-or-create to get /get (no creation, just fetch)\r\n+    Route::get('/get', [MobileChatController::class, 'getChat']);\r\n+\r\n+    // Keep existing message endpoints\r\n+    Route::post('/send', [MobileChatController::class, 'sendMessage']);\r\n+    Route::get('/history/{chat_id}', [MobileChatController::class, 'getChatHistory']);\r\n+    Route::get('/quick-replies/{role_id}', [MobileChatController::class, 'getQuickReplies']);\r\n+    Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n+});\r\n+\r\n+\r\n+// FOR LOGS\r\n+use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n+\r\n+Route::middleware('auth:sanctum')->prefix('mobile/logs')->group(function () {\r\n+    Route::get('/', [MobileLogController::class, 'index']);       // paginated logs\r\n+    Route::get('/recent', [MobileLogController::class, 'recent']); // 5 most recent logs\r\n+});\r\n"
                },
                {
                    "date": 1764086294770,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,149 +139,11 @@\n });\r\n \r\n \r\n // FOR LOGS\r\n-use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n+use App\\Http\\Controllers\\mobile\\LogController;\r\n \r\n-Route::middleware('auth:sanctum')->prefix('mobile/logs')->group(function () {\r\n-    Route::get('/', [MobileLogController::class, 'index']);       // paginated logs\r\n-    Route::get('/recent', [MobileLogController::class, 'recent']); // 5 most recent logs\r\n+Route::middleware('auth:sanctum')->prefix('mobile')->group(function () {\r\n+    Route::get('/logs', [LogController::class, 'index']);\r\n+    Route::get('/logs/recent', [LogController::class, 'recent']);\r\n+    Route::get('/logs/filter', [LogController::class, 'filter']);\r\n });\r\n-<?php\r\n-\r\n-use Illuminate\\Support\\Facades\\Route;\r\n-use Illuminate\\Http\\Request;\r\n-use Illuminate\\Routing\\Router;\r\n-\r\n-// Controllers\r\n-use App\\Http\\Controllers\\mobile\\AuthController; \r\n-use App\\Http\\Controllers\\mobile\\AnnouncementController;\r\n-use App\\Http\\Controllers\\mobile\\TrainingsController;\r\n-use App\\Http\\Controllers\\mobile\\MemberFaqsController;\r\n-use App\\Http\\Controllers\\mobile\\NotificationController;\r\n-use App\\Http\\Controllers\\mobile\\CreditScoreController; \r\n-use App\\Http\\Controllers\\mobile\\DocumentController;\r\n-use App\\Http\\Controllers\\mobile\\ProfileController;\r\n-use App\\Http\\Controllers\\mobile\\MembershipController;\r\n-use App\\Http\\Controllers\\mobile\\SectorController;\r\n-use App\\Http\\Controllers\\mobile\\GrantController;\r\n-use App\\Http\\Controllers\\mobile\\GrantApplicationController;\r\n-use App\\Http\\Controllers\\mobile\\OtpController;\r\n-\r\n-// Public routes\r\n-Route::prefix('mobile')->group(function (Router $router) {\r\n-    // PUBLIC AUTH ROUTES\r\n-    $router->post('/register', [AuthController::class, 'register']);\r\n-    $router->post('/login', [AuthController::class, 'login']);\r\n-\r\n-    Route::post('/otp/send', [OtpController::class, 'sendOtp']);\r\n-    Route::post('/otp/verify', [OtpController::class, 'verifyOtp']);\r\n-    Route::post('/reset-password', [AuthController::class, 'resetPassword']);\r\n-\r\n-    // PROTECTED ROUTES (Requires Sanctum token)\r\n-    $router->middleware('auth:sanctum')->group(function () use ($router) {\r\n-        // Test route to get the authenticated user\r\n-        $router->get('/user', function (Request $request) {\r\n-            return $request->user();\r\n-        });        \r\n-        $router->post('/logout', [AuthController::class, 'logout']);\r\n-        $router->post('/change-password', [AuthController::class, 'changePassword']);\r\n-\r\n-        Route::get('/grants', [GrantController::class, 'index']);\r\n-\r\n-        Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n-        Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n-        Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n-\r\n-    });\r\n-});\r\n-\r\n-// Member FAQs (public)\r\n-Route::get('/member/faqs', [MemberFaqsController::class, 'index']);\r\n-\r\n-// Protected routes requiring authentication\r\n-Route::middleware(['auth:sanctum'])->group(function() {\r\n-\r\n-     // Announcements\r\n-    Route::get('/announcements', [AnnouncementController::class, 'index']);\r\n-    Route::post('/announcements', [AnnouncementController::class, 'store']);\r\n-\r\n-    // Credit Score\r\n-      Route::get('/credit-score', [CreditScoreController::class, 'show']);\r\n- \r\n-    // Profile\r\n-    Route::get('/profile', [ProfileController::class, 'show']);\r\n-   \r\n-    Route::get('/sectors', [SectorController::class, 'index']);\r\n-\r\n-    // Document Management\r\n-    Route::get('/applications/{applicationId}/documents', [DocumentController::class, 'index']);\r\n-    Route::get('/documents/{id}', [DocumentController::class, 'show']);\r\n-    Route::get('/documents/{id}/download', [DocumentController::class, 'download']);\r\n-    Route::delete('/documents/{id}', [DocumentController::class, 'destroy']);\r\n-    \r\n-    // Grant Applications\r\n-    Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n-    Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n-\r\n-     // Notifications\r\n-        Route::prefix('notifications')->group(function () {\r\n-        Route::get('/', [NotificationController::class, 'index']);\r\n-        Route::patch('/{id}/read', [NotificationController::class, 'markAsRead']);\r\n-        Route::get('/unread', [NotificationController::class, 'hasUnread']);\r\n-        Route::patch('/{id}/unread', [NotificationController::class, 'markAsUnread']);\r\n-        Route::delete('/{id}', [NotificationController::class, 'destroy']);\r\n-    });\r\n-\r\n-});\r\n-\r\n-    // With rate limit\r\n-  $router->middleware('auth:sanctum', 'throttle:10,1')->group(function () use ($router) { \r\n-    // Profile \r\n-     Route::post('/profile/picture', [ProfileController::class, 'updatePicture']);\r\n-     // Membership \r\n-    Route::post('/membership-application', [MembershipController::class, 'store']);\r\n-     // Grant Applications\r\n-    Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n-       // Document Management\r\n-    Route::post('/documents/upload', [DocumentController::class, 'upload']);\r\n-  });\r\n-\r\n-// Trainings routes (protected sanctum auth)\r\n-Route::prefix('mobile')->middleware('auth:sanctum')->group(function () {\r\n-    Route::get('/trainings', [TrainingsController::class, 'index']);\r\n-    Route::get('/myevents', [TrainingsController::class, 'myEvents']);\r\n-    Route::post('/trainings/{trainingId}/attend', [TrainingsController::class, 'attend']);\r\n-    Route::get('/trainings/{trainingId}', [TrainingsController::class, 'show']);\r\n-    Route::delete('/trainings/{trainingId}/cancel', [TrainingsController::class, 'cancelAttendance']);\r\n-});\r\n-\r\n-// Debug route\r\n-Route::get('/check-php-config', function () {\r\n-    $uploadMax = ini_get('upload_max_filesize');\r\n-    $postMax = ini_get('post_max_size');\r\n-    \r\n-    return response()->json([\r\n-        'upload_max_filesize' => $uploadMax,\r\n-        'post_max_size' => $postMax,\r\n-        'message' => 'These are the current settings your server is using.'\r\n-    ]);\r\n-});\r\n-\r\n-\r\n-\r\n-\r\n-//============================================\r\n-// FOR CHAT \r\n-//============================================\r\n-use App\\Http\\Controllers\\mobile\\MobileChatController;\r\n-\r\n-Route::middleware('auth:sanctum')->prefix('mobile/chat')->group(function () {\r\n-    // Changed from post /get-or-create to get /get (no creation, just fetch)\r\n-    Route::get('/get', [MobileChatController::class, 'getChat']);\r\n-\r\n-    // Keep existing message endpoints\r\n-    Route::post('/send', [MobileChatController::class, 'sendMessage']);\r\n-    Route::get('/history/{chat_id}', [MobileChatController::class, 'getChatHistory']);\r\n-    Route::get('/quick-replies/{role_id}', [MobileChatController::class, 'getQuickReplies']);\r\n-    Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n-});\r\n"
                },
                {
                    "date": 1764087076254,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -141,9 +141,5 @@\n \r\n // FOR LOGS\r\n use App\\Http\\Controllers\\mobile\\LogController;\r\n \r\n-Route::middleware('auth:sanctum')->prefix('mobile')->group(function () {\r\n-    Route::get('/logs', [LogController::class, 'index']);\r\n-    Route::get('/logs/recent', [LogController::class, 'recent']);\r\n-    Route::get('/logs/filter', [LogController::class, 'filter']);\r\n-});\r\n+Route::post('/mobile/log-login', [LogController::class, 'storeLoginLog']);\r\n"
                },
                {
                    "date": 1764087273476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,7 +139,48 @@\n });\r\n \r\n \r\n // FOR LOGS\r\n-use App\\Http\\Controllers\\mobile\\LogController;\r\n+<?php\r\n \r\n-Route::post('/mobile/log-login', [LogController::class, 'storeLoginLog']);\r\n+namespace App\\Http\\Controllers\\mobile;\r\n+\r\n+use App\\Http\\Controllers\\Controller;\r\n+use Illuminate\\Http\\Request;\r\n+use App\\Models\\Log;\r\n+use Illuminate\\Support\\Facades\\Auth;\r\n+\r\n+class MobileLogController extends Controller\r\n+{\r\n+    /**\r\n+     * Store a login log.\r\n+     */\r\n+    public function storeLoginLog(Request $request)\r\n+    {\r\n+        $user = Auth::user();\r\n+\r\n+        // Optional: fallback if user not authenticated (like token only)\r\n+        $userId = $user->id ?? $request->user_id;\r\n+        $userName = $user->name ?? $request->user_name ?? 'Unknown User';\r\n+        $role = $user->role ?? $request->role ?? 'Member';\r\n+        $ip = $request->ip();\r\n+\r\n+        $log = Log::create([\r\n+            'user_id' => $userId,\r\n+            'user_name' => $userName,\r\n+            'role' => $role,\r\n+            'activity' => 'Logged in',\r\n+            'ip_address' => $ip,\r\n+            'status' => 'success',\r\n+            'activity_timestamp' => now(),\r\n+            'details' => [\r\n+                'device' => $request->header('User-Agent') ?? 'Flutter App',\r\n+            ],\r\n+        ]);\r\n+\r\n+        return response()->json([\r\n+            'success' => true,\r\n+            'message' => 'Login logged successfully',\r\n+            'log' => $log,\r\n+        ]);\r\n+    }\r\n+}\r\n"
                },
                {
                    "date": 1764087279921,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,48 +139,9 @@\n });\r\n \r\n \r\n // FOR LOGS\r\n-<?php\r\n+use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n \r\n-namespace App\\Http\\Controllers\\mobile;\r\n-\r\n-use App\\Http\\Controllers\\Controller;\r\n-use Illuminate\\Http\\Request;\r\n-use App\\Models\\Log;\r\n-use Illuminate\\Support\\Facades\\Auth;\r\n-\r\n-class MobileLogController extends Controller\r\n-{\r\n-    /**\r\n-     * Store a login log.\r\n-     */\r\n-    public function storeLoginLog(Request $request)\r\n-    {\r\n-        $user = Auth::user();\r\n-\r\n-        // Optional: fallback if user not authenticated (like token only)\r\n-        $userId = $user->id ?? $request->user_id;\r\n-        $userName = $user->name ?? $request->user_name ?? 'Unknown User';\r\n-        $role = $user->role ?? $request->role ?? 'Member';\r\n-        $ip = $request->ip();\r\n-\r\n-        $log = Log::create([\r\n-            'user_id' => $userId,\r\n-            'user_name' => $userName,\r\n-            'role' => $role,\r\n-            'activity' => 'Logged in',\r\n-            'ip_address' => $ip,\r\n-            'status' => 'success',\r\n-            'activity_timestamp' => now(),\r\n-            'details' => [\r\n-                'device' => $request->header('User-Agent') ?? 'Flutter App',\r\n-            ],\r\n-        ]);\r\n-\r\n-        return response()->json([\r\n-            'success' => true,\r\n-            'message' => 'Login logged successfully',\r\n-            'log' => $log,\r\n-        ]);\r\n-    }\r\n-}\r\n+Route::middleware('auth:sanctum')->group(function() {\r\n+    Route::post('/mobile/log-login', [MobileLogController::class, 'storeLoginLog']);\r\n+});\r\n"
                },
                {
                    "date": 1764087821467,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,9 +139,4 @@\n });\r\n \r\n \r\n // FOR LOGS\r\n-use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n-\r\n-Route::middleware('auth:sanctum')->group(function() {\r\n-    Route::post('/mobile/log-login', [MobileLogController::class, 'storeLoginLog']);\r\n-});\r\n"
                },
                {
                    "date": 1764087850332,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -138,5 +138,5 @@\n     Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n });\r\n \r\n \r\n-// FOR LOGS\r\n+// FOR\n\\ No newline at end of file\n"
                },
                {
                    "date": 1764088357695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -138,5 +138,11 @@\n     Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n });\r\n \r\n \r\n-// FOR\n\\ No newline at end of file\n+// FOR\r\n+use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n+\r\n+Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n+    Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n+    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']); // optional\r\n+});\r\n"
                },
                {
                    "date": 1764090747210,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -138,11 +138,17 @@\n     Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n });\r\n \r\n \r\n-// FOR\r\n use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n \r\n Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n+    // Login log\r\n     Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n-    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']); // optional\r\n+    \r\n+    // Logout log\r\n+    Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']); // new route\r\n+\r\n+    // Optional: recent logs\r\n+    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']); \r\n });\r\n+\r\n"
                },
                {
                    "date": 1764090821261,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -141,14 +141,9 @@\n \r\n use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n \r\n Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n-    // Login log\r\n     Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n-    \r\n-    // Logout log\r\n-    Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']); // new route\r\n-\r\n-    // Optional: recent logs\r\n-    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']); \r\n+    Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']); // MUST exist\r\n+    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']);\r\n });\r\n \r\n"
                },
                {
                    "date": 1764090875690,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -141,9 +141,9 @@\n \r\n use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n \r\n Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n-    Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n-    Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']); // MUST exist\r\n-    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']);\r\n+    Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);   // login\r\n+    Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']); // logout\r\n+    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']);     // optional\r\n });\r\n \r\n"
                },
                {
                    "date": 1764090973506,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -138,12 +138,11 @@\n     Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n });\r\n \r\n \r\n+// FOR\r\n use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n \r\n Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n-    Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);   // login\r\n-    Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']); // logout\r\n-    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']);     // optional\r\n+    Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n+    Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']);\r\n });\r\n-\r\n"
                },
                {
                    "date": 1764090994298,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,6 +143,6 @@\n use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n \r\n Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n     Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n-    Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']);\r\n+    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']); // optional\r\n });\r\n"
                },
                {
                    "date": 1764091004490,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,6 +143,6 @@\n use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n \r\n Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n     Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n-    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']); // optional\r\n+    Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']);\r\n });\r\n"
                },
                {
                    "date": 1764091092841,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -144,5 +144,6 @@\n \r\n Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n     Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n     Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']);\r\n+    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']);\r\n });\r\n"
                },
                {
                    "date": 1764091202829,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -144,6 +144,5 @@\n \r\n Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n     Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n     Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']);\r\n-    Route::get('/recent-logs', [MobileLogController::class, 'recentLogs']);\r\n });\r\n"
                },
                {
                    "date": 1764144483633,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,148 @@\n+<?php\r\n+\r\n+use Illuminate\\Support\\Facades\\Route;\r\n+use Illuminate\\Http\\Request;\r\n+use Illuminate\\Routing\\Router;\r\n+\r\n+// Controllers\r\n+use App\\Http\\Controllers\\mobile\\AuthController; \r\n+use App\\Http\\Controllers\\mobile\\AnnouncementController;\r\n+use App\\Http\\Controllers\\mobile\\TrainingsController;\r\n+use App\\Http\\Controllers\\mobile\\MemberFaqsController;\r\n+use App\\Http\\Controllers\\mobile\\NotificationController;\r\n+use App\\Http\\Controllers\\mobile\\CreditScoreController; \r\n+use App\\Http\\Controllers\\mobile\\DocumentController;\r\n+use App\\Http\\Controllers\\mobile\\ProfileController;\r\n+use App\\Http\\Controllers\\mobile\\MembershipController;\r\n+use App\\Http\\Controllers\\mobile\\SectorController;\r\n+use App\\Http\\Controllers\\mobile\\GrantController;\r\n+use App\\Http\\Controllers\\mobile\\GrantApplicationController;\r\n+use App\\Http\\Controllers\\mobile\\OtpController;\r\n+\r\n+// Public routes\r\n+Route::prefix('mobile')->group(function (Router $router) {\r\n+    // PUBLIC AUTH ROUTES\r\n+    $router->post('/register', [AuthController::class, 'register']);\r\n+    $router->post('/login', [AuthController::class, 'login']);\r\n+\r\n+    Route::post('/otp/send', [OtpController::class, 'sendOtp']);\r\n+    Route::post('/otp/verify', [OtpController::class, 'verifyOtp']);\r\n+    Route::post('/reset-password', [AuthController::class, 'resetPassword']);\r\n+\r\n+    // PROTECTED ROUTES (Requires Sanctum token)\r\n+    $router->middleware('auth:sanctum')->group(function () use ($router) {\r\n+        // Test route to get the authenticated user\r\n+        $router->get('/user', function (Request $request) {\r\n+            return $request->user();\r\n+        });        \r\n+        $router->post('/logout', [AuthController::class, 'logout']);\r\n+        $router->post('/change-password', [AuthController::class, 'changePassword']);\r\n+\r\n+        Route::get('/grants', [GrantController::class, 'index']);\r\n+\r\n+        Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n+        Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n+        Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n+\r\n+    });\r\n+});\r\n+\r\n+// Member FAQs (public)\r\n+Route::get('/member/faqs', [MemberFaqsController::class, 'index']);\r\n+\r\n+// Protected routes requiring authentication\r\n+Route::middleware(['auth:sanctum'])->group(function() {\r\n+\r\n+     // Announcements\r\n+    Route::get('/announcements', [AnnouncementController::class, 'index']);\r\n+    Route::post('/announcements', [AnnouncementController::class, 'store']);\r\n+\r\n+    // Credit Score\r\n+      Route::get('/credit-score', [CreditScoreController::class, 'show']);\r\n+ \r\n+    // Profile\r\n+    Route::get('/profile', [ProfileController::class, 'show']);\r\n+   \r\n+    Route::get('/sectors', [SectorController::class, 'index']);\r\n+\r\n+    // Document Management\r\n+    Route::get('/applications/{applicationId}/documents', [DocumentController::class, 'index']);\r\n+    Route::get('/documents/{id}', [DocumentController::class, 'show']);\r\n+    Route::get('/documents/{id}/download', [DocumentController::class, 'download']);\r\n+    Route::delete('/documents/{id}', [DocumentController::class, 'destroy']);\r\n+    \r\n+    // Grant Applications\r\n+    Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n+    Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n+\r\n+     // Notifications\r\n+        Route::prefix('notifications')->group(function () {\r\n+        Route::get('/', [NotificationController::class, 'index']);\r\n+        Route::patch('/{id}/read', [NotificationController::class, 'markAsRead']);\r\n+        Route::get('/unread', [NotificationController::class, 'hasUnread']);\r\n+        Route::patch('/{id}/unread', [NotificationController::class, 'markAsUnread']);\r\n+        Route::delete('/{id}', [NotificationController::class, 'destroy']);\r\n+    });\r\n+\r\n+});\r\n+\r\n+    // With rate limit\r\n+  $router->middleware('auth:sanctum', 'throttle:10,1')->group(function () use ($router) { \r\n+    // Profile \r\n+     Route::post('/profile/picture', [ProfileController::class, 'updatePicture']);\r\n+     // Membership \r\n+    Route::post('/membership-application', [MembershipController::class, 'store']);\r\n+     // Grant Applications\r\n+    Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n+       // Document Management\r\n+    Route::post('/documents/upload', [DocumentController::class, 'upload']);\r\n+  });\r\n+\r\n+// Trainings routes (protected sanctum auth)\r\n+Route::prefix('mobile')->middleware('auth:sanctum')->group(function () {\r\n+    Route::get('/trainings', [TrainingsController::class, 'index']);\r\n+    Route::get('/myevents', [TrainingsController::class, 'myEvents']);\r\n+    Route::post('/trainings/{trainingId}/attend', [TrainingsController::class, 'attend']);\r\n+    Route::get('/trainings/{trainingId}', [TrainingsController::class, 'show']);\r\n+    Route::delete('/trainings/{trainingId}/cancel', [TrainingsController::class, 'cancelAttendance']);\r\n+});\r\n+\r\n+// Debug route\r\n+Route::get('/check-php-config', function () {\r\n+    $uploadMax = ini_get('upload_max_filesize');\r\n+    $postMax = ini_get('post_max_size');\r\n+    \r\n+    return response()->json([\r\n+        'upload_max_filesize' => $uploadMax,\r\n+        'post_max_size' => $postMax,\r\n+        'message' => 'These are the current settings your server is using.'\r\n+    ]);\r\n+});\r\n+\r\n+\r\n+\r\n+\r\n+//============================================\r\n+// FOR CHAT \r\n+//============================================\r\n+use App\\Http\\Controllers\\mobile\\MobileChatController;\r\n+\r\n+Route::middleware('auth:sanctum')->prefix('mobile/chat')->group(function () {\r\n+    // Changed from post /get-or-create to get /get (no creation, just fetch)\r\n+    Route::get('/get', [MobileChatController::class, 'getChat']);\r\n+\r\n+    // Keep existing message endpoints\r\n+    Route::post('/send', [MobileChatController::class, 'sendMessage']);\r\n+    Route::get('/history/{chat_id}', [MobileChatController::class, 'getChatHistory']);\r\n+    Route::get('/quick-replies/{role_id}', [MobileChatController::class, 'getQuickReplies']);\r\n+    Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n+});\r\n+\r\n+\r\n+// FOR LOGS\r\n+use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n+\r\n+Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n+    Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n+    Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']);\r\n+});\r\n"
                },
                {
                    "date": 1764145061398,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -145,152 +145,12 @@\n Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n     Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n     Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']);\r\n });\r\n-<?php\r\n \r\n-use Illuminate\\Support\\Facades\\Route;\r\n-use Illuminate\\Http\\Request;\r\n-use Illuminate\\Routing\\Router;\r\n+// FEEDBACK\r\n+use App\\Http\\Controllers\\mobile\\FeedbackController;\r\n \r\n-// Controllers\r\n-use App\\Http\\Controllers\\mobile\\AuthController; \r\n-use App\\Http\\Controllers\\mobile\\AnnouncementController;\r\n-use App\\Http\\Controllers\\mobile\\TrainingsController;\r\n-use App\\Http\\Controllers\\mobile\\MemberFaqsController;\r\n-use App\\Http\\Controllers\\mobile\\NotificationController;\r\n-use App\\Http\\Controllers\\mobile\\CreditScoreController; \r\n-use App\\Http\\Controllers\\mobile\\DocumentController;\r\n-use App\\Http\\Controllers\\mobile\\ProfileController;\r\n-use App\\Http\\Controllers\\mobile\\MembershipController;\r\n-use App\\Http\\Controllers\\mobile\\SectorController;\r\n-use App\\Http\\Controllers\\mobile\\GrantController;\r\n-use App\\Http\\Controllers\\mobile\\GrantApplicationController;\r\n-use App\\Http\\Controllers\\mobile\\OtpController;\r\n \r\n-// Public routes\r\n-Route::prefix('mobile')->group(function (Router $router) {\r\n-    // PUBLIC AUTH ROUTES\r\n-    $router->post('/register', [AuthController::class, 'register']);\r\n-    $router->post('/login', [AuthController::class, 'login']);\r\n-\r\n-    Route::post('/otp/send', [OtpController::class, 'sendOtp']);\r\n-    Route::post('/otp/verify', [OtpController::class, 'verifyOtp']);\r\n-    Route::post('/reset-password', [AuthController::class, 'resetPassword']);\r\n-\r\n-    // PROTECTED ROUTES (Requires Sanctum token)\r\n-    $router->middleware('auth:sanctum')->group(function () use ($router) {\r\n-        // Test route to get the authenticated user\r\n-        $router->get('/user', function (Request $request) {\r\n-            return $request->user();\r\n-        });        \r\n-        $router->post('/logout', [AuthController::class, 'logout']);\r\n-        $router->post('/change-password', [AuthController::class, 'changePassword']);\r\n-\r\n-        Route::get('/grants', [GrantController::class, 'index']);\r\n-\r\n-        Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n-        Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n-        Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n-\r\n-    });\r\n-});\r\n-\r\n-// Member FAQs (public)\r\n-Route::get('/member/faqs', [MemberFaqsController::class, 'index']);\r\n-\r\n-// Protected routes requiring authentication\r\n-Route::middleware(['auth:sanctum'])->group(function() {\r\n-\r\n-     // Announcements\r\n-    Route::get('/announcements', [AnnouncementController::class, 'index']);\r\n-    Route::post('/announcements', [AnnouncementController::class, 'store']);\r\n-\r\n-    // Credit Score\r\n-      Route::get('/credit-score', [CreditScoreController::class, 'show']);\r\n- \r\n-    // Profile\r\n-    Route::get('/profile', [ProfileController::class, 'show']);\r\n-   \r\n-    Route::get('/sectors', [SectorController::class, 'index']);\r\n-\r\n-    // Document Management\r\n-    Route::get('/applications/{applicationId}/documents', [DocumentController::class, 'index']);\r\n-    Route::get('/documents/{id}', [DocumentController::class, 'show']);\r\n-    Route::get('/documents/{id}/download', [DocumentController::class, 'download']);\r\n-    Route::delete('/documents/{id}', [DocumentController::class, 'destroy']);\r\n-    \r\n-    // Grant Applications\r\n-    Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n-    Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n-\r\n-     // Notifications\r\n-        Route::prefix('notifications')->group(function () {\r\n-        Route::get('/', [NotificationController::class, 'index']);\r\n-        Route::patch('/{id}/read', [NotificationController::class, 'markAsRead']);\r\n-        Route::get('/unread', [NotificationController::class, 'hasUnread']);\r\n-        Route::patch('/{id}/unread', [NotificationController::class, 'markAsUnread']);\r\n-        Route::delete('/{id}', [NotificationController::class, 'destroy']);\r\n-    });\r\n-\r\n-});\r\n-\r\n-    // With rate limit\r\n-  $router->middleware('auth:sanctum', 'throttle:10,1')->group(function () use ($router) { \r\n-    // Profile \r\n-     Route::post('/profile/picture', [ProfileController::class, 'updatePicture']);\r\n-     // Membership \r\n-    Route::post('/membership-application', [MembershipController::class, 'store']);\r\n-     // Grant Applications\r\n-    Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n-       // Document Management\r\n-    Route::post('/documents/upload', [DocumentController::class, 'upload']);\r\n-  });\r\n-\r\n-// Trainings routes (protected sanctum auth)\r\n-Route::prefix('mobile')->middleware('auth:sanctum')->group(function () {\r\n-    Route::get('/trainings', [TrainingsController::class, 'index']);\r\n-    Route::get('/myevents', [TrainingsController::class, 'myEvents']);\r\n-    Route::post('/trainings/{trainingId}/attend', [TrainingsController::class, 'attend']);\r\n-    Route::get('/trainings/{trainingId}', [TrainingsController::class, 'show']);\r\n-    Route::delete('/trainings/{trainingId}/cancel', [TrainingsController::class, 'cancelAttendance']);\r\n-});\r\n-\r\n-// Debug route\r\n-Route::get('/check-php-config', function () {\r\n-    $uploadMax = ini_get('upload_max_filesize');\r\n-    $postMax = ini_get('post_max_size');\r\n-    \r\n-    return response()->json([\r\n-        'upload_max_filesize' => $uploadMax,\r\n-        'post_max_size' => $postMax,\r\n-        'message' => 'These are the current settings your server is using.'\r\n-    ]);\r\n-});\r\n-\r\n-\r\n-\r\n-\r\n-//============================================\r\n-// FOR CHAT \r\n-//============================================\r\n-use App\\Http\\Controllers\\mobile\\MobileChatController;\r\n-\r\n-Route::middleware('auth:sanctum')->prefix('mobile/chat')->group(function () {\r\n-    // Changed from post /get-or-create to get /get (no creation, just fetch)\r\n-    Route::get('/get', [MobileChatController::class, 'getChat']);\r\n-\r\n-    // Keep existing message endpoints\r\n-    Route::post('/send', [MobileChatController::class, 'sendMessage']);\r\n-    Route::get('/history/{chat_id}', [MobileChatController::class, 'getChatHistory']);\r\n-    Route::get('/quick-replies/{role_id}', [MobileChatController::class, 'getQuickReplies']);\r\n-    Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n-});\r\n-\r\n-\r\n-// FOR\r\n-use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n-\r\n-Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n-    Route::post('/login-log', [MobileLogController::class, 'storeLoginLog']);\r\n-    Route::post('/logout-log', [MobileLogController::class, 'storeLogoutLog']);\r\n-});\r\n+// Feedback Routes -- add before OTP/public data/protected routes!\r\n+Route::post('/feedback', [FeedbackController::class, 'store']);\r\n+Route::get('/feedback', [FeedbackController::class, 'index']); // (optional)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1765198237090,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -152,5 +152,8 @@\n \r\n \r\n // Feedback Routes -- add before OTP/public data/protected routes!\r\n Route::post('/feedback', [FeedbackController::class, 'store']);\r\n-Route::get('/feedback', [FeedbackController::class, 'index']); // (optional)\n\\ No newline at end of file\n+Route::get('/feedback', [FeedbackController::class, 'index']); // (optional)\r\n+\r\n+\r\n+Route::post('/mobile/chat/create', [MobileChatController::class, 'createChat']);\r\n"
                },
                {
                    "date": 1765198276320,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,8 +135,10 @@\n     Route::post('/send', [MobileChatController::class, 'sendMessage']);\r\n     Route::get('/history/{chat_id}', [MobileChatController::class, 'getChatHistory']);\r\n     Route::get('/quick-replies/{role_id}', [MobileChatController::class, 'getQuickReplies']);\r\n     Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n+    Route::post('/mobile/chat/create', [MobileChatController::class, 'createChat']);\r\n+\r\n });\r\n \r\n \r\n // FOR LOGS\r\n@@ -155,5 +157,4 @@\n Route::post('/feedback', [FeedbackController::class, 'store']);\r\n Route::get('/feedback', [FeedbackController::class, 'index']); // (optional)\r\n \r\n \r\n-Route::post('/mobile/chat/create', [MobileChatController::class, 'createChat']);\r\n"
                },
                {
                    "date": 1765198373058,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -127,21 +127,22 @@\n //============================================\r\n use App\\Http\\Controllers\\mobile\\MobileChatController;\r\n \r\n Route::middleware('auth:sanctum')->prefix('mobile/chat')->group(function () {\r\n-    // Changed from post /get-or-create to get /get (no creation, just fetch)\r\n+\r\n     Route::get('/get', [MobileChatController::class, 'getChat']);\r\n-\r\n-    // Keep existing message endpoints\r\n     Route::post('/send', [MobileChatController::class, 'sendMessage']);\r\n     Route::get('/history/{chat_id}', [MobileChatController::class, 'getChatHistory']);\r\n     Route::get('/quick-replies/{role_id}', [MobileChatController::class, 'getQuickReplies']);\r\n     Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n-    Route::post('/mobile/chat/create', [MobileChatController::class, 'createChat']);\r\n \r\n+    // FIXED route\r\n+    Route::post('/create', [MobileChatController::class, 'createChat']);\r\n+\r\n });\r\n \r\n \r\n+\r\n // FOR LOGS\r\n use App\\Http\\Controllers\\mobile\\MobileLogController;\r\n \r\n Route::middleware('auth:sanctum')->prefix('mobile')->group(function() {\r\n"
                },
                {
                    "date": 1765211795510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,10 +133,8 @@\n     Route::post('/send', [MobileChatController::class, 'sendMessage']);\r\n     Route::get('/history/{chat_id}', [MobileChatController::class, 'getChatHistory']);\r\n     Route::get('/quick-replies/{role_id}', [MobileChatController::class, 'getQuickReplies']);\r\n     Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n-\r\n-    // FIXED route\r\n     Route::post('/create', [MobileChatController::class, 'createChat']);\r\n \r\n });\r\n \r\n"
                }
            ],
            "date": 1763537151350,
            "name": "Commit-0",
            "content": "<?php\r\n\r\nuse Illuminate\\Support\\Facades\\Route;\r\nuse Illuminate\\Http\\Request;\r\nuse Illuminate\\Routing\\Router;\r\n\r\n// Controllers\r\nuse App\\Http\\Controllers\\mobile\\AuthController; \r\nuse App\\Http\\Controllers\\mobile\\AnnouncementController;\r\nuse App\\Http\\Controllers\\mobile\\TrainingsController;\r\nuse App\\Http\\Controllers\\mobile\\MemberFaqsController;\r\nuse App\\Http\\Controllers\\mobile\\NotificationController;\r\nuse App\\Http\\Controllers\\mobile\\CreditScoreController; \r\nuse App\\Http\\Controllers\\Api\\DocumentController;\r\nuse App\\Http\\Controllers\\Api\\ProfileController;\r\nuse App\\Http\\Controllers\\Api\\MembershipController;\r\nuse App\\Http\\Controllers\\Api\\GrantController;\r\nuse App\\Http\\Controllers\\Api\\GrantApplicationController;\r\n\r\n// Public routes\r\nRoute::prefix('mobile')->group(function (Router $router) {\r\n    // PUBLIC AUTH ROUTES\r\n    $router->post('/register', [AuthController::class, 'register']);\r\n    $router->post('/login', [AuthController::class, 'login']);\r\n\r\n    // PROTECTED ROUTES (Requires Sanctum token)\r\n    $router->middleware('auth:sanctum')->group(function () use ($router) {\r\n        // Test route to get the authenticated user\r\n        $router->get('/user', function (Request $request) {\r\n            return $request->user();\r\n        });\r\n        \r\n        $router->post('/logout', [AuthController::class, 'logout']);\r\n        $router->post('/change-password', [AuthController::class, 'changePassword']);\r\n    });\r\n});\r\n\r\n// Member FAQs (public)\r\nRoute::get('/member/faqs', [MemberFaqsController::class, 'index']);\r\n\r\n// Protected routes requiring authentication\r\nRoute::middleware('auth:sanctum')->group(function() {\r\n    // Announcements\r\n    Route::get('/announcements', [AnnouncementController::class, 'index']);\r\n    // Credit Score\r\n      Route::get('/credit-score', [CreditScoreController::class, 'show']);\r\n    /*\r\n    // Profile\r\n    Route::get('/profile', [ProfileController::class, 'show']);\r\n    Route::post('/profile/picture', [ProfileController::class, 'updatePicture']);\r\n\r\n    // Membership\r\n    Route::post('/membership-application', [MembershipController::class, 'store']);\r\n   \r\n    // Grants\r\n    Route::get('/grants', [GrantController::class, 'index']);\r\n\r\n    // Grant Applications\r\n    Route::post('/grant-applications', [GrantApplicationController::class, 'store']);\r\n    Route::get('/grant-applications', [GrantApplicationController::class, 'index']);\r\n    Route::get('/grant-applications/{id}', [GrantApplicationController::class, 'show']);\r\n\r\n    // Document Management\r\n    Route::post('/documents/upload', [DocumentController::class, 'upload']);\r\n    Route::get('/applications/{applicationId}/documents', [DocumentController::class, 'index']);\r\n    Route::get('/documents/{id}', [DocumentController::class, 'show']);\r\n    Route::get('/documents/{id}/download', [DocumentController::class, 'download']);\r\n    Route::delete('/documents/{id}', [DocumentController::class, 'destroy']);\r\n    */\r\n\r\n    // Notifications\r\n    Route::prefix('notifications')->group(function () {\r\n        Route::get('/', [NotificationController::class, 'index']);\r\n        Route::patch('/{id}/read', [NotificationController::class, 'markAsRead']);\r\n        Route::get('/unread', [NotificationController::class, 'hasUnread']);\r\n        Route::patch('/{id}/unread', [NotificationController::class, 'markAsUnread']);\r\n        Route::delete('/{id}', [NotificationController::class, 'destroy']);\r\n    });\r\n});\r\n\r\n// Trainings routes (protected)\r\nRoute::prefix('mobile')->middleware('auth:sanctum')->group(function () {\r\n    Route::get('/trainings', [TrainingsController::class, 'index']);\r\n    Route::get('/myevents', [TrainingsController::class, 'myEvents']);\r\n    Route::post('/trainings/{trainingId}/attend', [TrainingsController::class, 'attend']);\r\n    Route::get('/trainings/{trainingId}', [TrainingsController::class, 'show']);\r\n    Route::delete('/trainings/{trainingId}/cancel', [TrainingsController::class, 'cancelAttendance']);\r\n});\r\n\r\n// Debug route\r\nRoute::get('/check-php-config', function () {\r\n    $uploadMax = ini_get('upload_max_filesize');\r\n    $postMax = ini_get('post_max_size');\r\n    \r\n    return response()->json([\r\n        'upload_max_filesize' => $uploadMax,\r\n        'post_max_size' => $postMax,\r\n        'message' => 'These are the current settings your server is using.'\r\n    ]);\r\n});\r\n\r\n//============================================\r\n// FOR CHAT \r\n//============================================\r\nuse App\\Http\\Controllers\\mobile\\MobileChatController;\r\n\r\nRoute::middleware('auth:sanctum')->prefix('mobile/chat')->group(function () {\r\n    Route::post('/get-or-create', [MobileChatController::class, 'getOrCreateChat']);\r\n    Route::post('/send', [MobileChatController::class, 'sendMessage']);\r\n    Route::get('/history/{chat_id}', [MobileChatController::class, 'getChatHistory']);\r\n    Route::get('/quick-replies/{role_id}', [MobileChatController::class, 'getQuickReplies']);\r\n    Route::post('/mark-read', [MobileChatController::class, 'markAsRead']);\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"
        }
    ]
}